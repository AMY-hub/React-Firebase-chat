/*! For license information please see main.1ec33da1.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=yi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,_t,It,Et=!1,St=[],Tt=null,Ct=null,Nt=null,At=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Vt),Dt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return jt(t,e)}if(0<St.length){jt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var zt=w.ReactCurrentBatchConfig;function qt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=1,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Kt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=4,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Gt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)zr(e,t,r,Wt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Ht(e,t,n,r))&&zr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}var Wt=null;function Ht(e,t,n,r){if(Wt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Yt=null,Jt=null;function Xt(){if(Jt)return Jt;var e,t,n=Yt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),fn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(F({},fn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function _n(){return xn}var In=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(In),Sn=nn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Dn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var On=l&&"TextEvent"in window&&!Pn,Ln=l&&(!Rn||Pn&&8<Pn&&11>=Pn),Mn=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Wn(e){Mr(e,0)}function Hn(e){if(H(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(l){var Yn;if(l){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}Yn=Jn}else Yn=!1;$n=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Kn&&(Kn.detachEvent("onpropertychange",er),Gn=Kn=null)}function er(e){if("value"===e.propertyName&&Hn(Gn)){var t=[];qn(t,Gn,e,be(e)),De(Wn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Gn=n,(Kn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Gn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},br={},xr={};function _r(e){if(br[e])return br[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return br[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=_r("animationend"),Er=_r("animationiteration"),Sr=_r("animationstart"),Tr=_r("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Rr=Nr[Dr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Sr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Fr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Ir:case Er:case Sr:s=vn;break;case Tr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Sn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(qr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(zn(u))if($n)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=Xt()):(Yt="value"in($t=i)?$t.value:$t.textContent,jn=!0)),0<(m=Kr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=Xt(),Jt=Yt=$t=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Re(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(qr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(qr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function Yr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var Xr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],wi=-1;function bi(e){return{current:e}}function xi(e){0>wi||(e.current=ki[wi],ki[wi]=null,wi--)}function _i(e,t){wi++,ki[wi]=e.current,e.current=t}var Ii={},Ei=bi(Ii),Si=bi(!1),Ti=Ii;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){xi(Si),xi(Ei)}function Di(e,t,n){if(Ei.current!==Ii)throw Error(a(168));_i(Ei,t),_i(Si,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ti=Ei.current,_i(Ei,e),_i(Si,Si.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,xi(Si),xi(Ei),_i(Ei,e)):xi(Si),_i(Si,n)}var Li=null,Mi=!1,Fi=!1;function Vi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He(Ze,Ui),i}finally{gt=t,Fi=!1}}return null}var ji=w.ReactCurrentBatchConfig;function Bi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var zi=bi(null),qi=null,Ki=null,Gi=null;function Wi(){Gi=Ki=qi=null}function Hi(e){var t=zi.current;xi(zi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $i(e,t){qi=e,Gi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===qi)throw Error(a(308));Ki=e,qi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var Ji=null,Xi=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Ji?Ji=[n]:Ji.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Xi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zs(),r=qs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ks(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Yi(a):(i=Ni(t)?Ti:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Yi(a):(a=Ni(t)?Ti:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,wa=null,ba=1,xa="";function _a(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function Ia(e,t,n){ga[ka++]=ba,ga[ka++]=xa,ga[ka++]=wa,wa=e;var r=ba;e=xa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ba=1<<32-ot(t)+i|n<<i|r,xa=a+e}else ba=1<<a|n<<i|r,xa=e}function Ea(e){null!==e.return&&(_a(e,1),Ia(e,1,0))}function Sa(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===wa;)wa=ga[--ka],ga[ka]=null,xa=ga[--ka],ga[ka]=null,ba=ga[--ka],ga[ka]=null}var Ta=null,Ca=null,Na=!1,Aa=null;function Da(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ta=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ta=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==wa?{id:ba,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ta=e,Ca=null,!0);default:return!1}}function Pa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Ra(e,t)){if(Pa(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ta;t&&Ra(e,t)?Da(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ta=e)}}else{if(Pa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ta=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ta=e}function Ma(e){if(e!==Ta)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Pa(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Da(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ta?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Ta=null,Na=!1}function Va(e){null===Aa?Aa=[e]:Aa.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ba(e){return(0,e._init)(e._payload)}function za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Ba(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=_c(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Sc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=_c(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case x:return(t=Tc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ic(t,e.mode,n,null)).return=e,t;ja(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);ja(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);ja(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Na&&_a(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Na&&_a(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Na&&_a(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Na&&_a(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Na&&_a(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&_a(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ba(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Ic(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=_c(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Tc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);ja(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Sc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var qa=za(!0),Ka=za(!1),Ga={},Wa=bi(Ga),Ha=bi(Ga),Qa=bi(Ga);function $a(e){if(e===Ga)throw Error(a(174));return e}function Ya(e,t){switch(_i(Qa,t),_i(Ha,e),_i(Wa,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Wa),_i(Wa,t)}function Ja(){xi(Wa),xi(Ha),xi(Qa)}function Xa(e){$a(Qa.current);var t=$a(Wa.current),n=se(t,e.type);t!==n&&(_i(Ha,e),_i(Wa,n))}function Za(e){Ha.current===e&&(xi(Wa),xi(Ha))}var eo=bi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Xo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Es|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Eo(e,t){var n=uo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Do(9,To.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ks(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Ks(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Po(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}uo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Vo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Go(){return wo().memoizedState}function Wo(e,t,n){var r=qs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(Yo(e,t,n),null!==(e=Ks(e,r,n=zs()))&&Jo(e,t,r))}function Ho(e,t,n){var r=qs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,i);else{Yo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ks(e,r,n=zs()))&&Jo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function $o(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Ji?Ji=[t]:Ji.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xo={readContext:Yi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:Yi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Yi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:Bo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ko.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=xa;t=":"+t+"R"+(n=(ba&~(1<<32-ot(ba)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Yi,useCallback:zo,useContext:Yi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:xo,useRef:Ro,useState:function(){return xo(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=xo(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},tu={readContext:Yi,useCallback:zo,useContext:Yi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=_o(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Ps=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Sa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,Ja(),xi(Si),xi(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&($s(Aa),Aa=null))),pu(t),null;case 5:Za(t);var i=$a(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=$a(Wa.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Yr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Qa.current),$a(Wa.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ta))switch(s=0!==(1&e.mode),e.tag){case 3:Yr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Yr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(xi(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&($s(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===_s&&(_s=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Ja(),null===e&&jr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==_s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ds&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*Je()-o.renderingStartTime>Ds&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,_i(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&bs)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$a(Wa.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=w.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Ka(t,null,n,r):qa(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return $i(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Na&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function wu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||bc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_c(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=xc(a,r)).ref=t.ref,e.return=t,t.child=e}function bu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Iu(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},_i(xs,bs),bs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,_i(xs,bs),bs|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,_i(xs,bs),bs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(xs,bs),bs|=r;return gu(e,t,i,n),t.child}function _u(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ni(n)?Ti:Ei.current;return a=Ci(t,a),$i(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Na&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Eu(e,t,n,r,i){if(Ni(n)){var a=!0;Pi(t)}else a=!1;if($i(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Yi(c):c=Ci(t,c=Ni(n)?Ti:Ei.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Xi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Si.current||Xi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Xi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Bi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Yi(s):s=Ci(t,s=Ni(n)?Ti:Ei.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Xi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Si.current||Xi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Xi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,a,i)}function Su(e,t,n,r,i,a){_u(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Uu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qa(t,e.child,null,a),t.child=qa(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ya(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Va(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Du(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ec(o,i,0,null),e=Ic(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Ru(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ec({mode:"visible",children:i.children},o,0,null),(u=Ic(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&qa(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ta=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=ba,ga[ka++]=xa,ga[ka++]=wa,ba=n.id,xa=n.overflow,wa=t),(t=Ru(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Pu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Pu(e,t,i.children,n),t.memoizedState=null,n)}function Ru(e,t){return(t=Ec({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Pu(e,t,n,r){var i=e.child;return e=i.sibling,n=xc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=xc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=xc(o,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Va(r),qa(t,e.child,null,n),(e=Ru(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ju(e,t){switch(Sa(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),xi(Si),xi(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return Ja(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var Bu=!1,zu=!1,qu="function"===typeof WeakSet?WeakSet:Set,Ku=null;function Gu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Wu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Wu(t,n,a)}i=i.next}while(i!==r)}}function $u(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Ju(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Wu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Gu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Gu(t,n);break;case 4:is(e,t,n)}}function Xu(e){var t=e.alternate;null!==t&&(e.alternate=null,Xu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if(Ju(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),Bt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ju(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),$u(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&J(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":X(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&Bt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Ku=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Ku;){var i=Ku,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Bu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||zu;u=Bu;var c=zu;if(Bu=o,(zu=s)&&!c)for(Ku=i;null!==Ku;)s=(o=Ku).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Ku=s):fs(i);for(;null!==a;)Ku=a,ss(a,t,n),a=a.sibling;Ku=i,Bu=u,zu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ku=a):cs(e)}}function cs(e){for(;null!==Ku;){var t=Ku;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:zu||$u(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}zu||512&t.flags&&Yu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Ku=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}function ls(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ku=n;break}Ku=t.return}}function fs(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Ku=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ku=u;break}Ku=t.return}}var hs,ds=Math.ceil,ps=w.ReactCurrentDispatcher,vs=w.ReactCurrentOwner,ys=w.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,ws=0,bs=0,xs=bi(0),_s=0,Is=null,Es=0,Ss=0,Ts=0,Cs=null,Ns=null,As=0,Ds=1/0,Rs=!1,Ps=null,Os=null,Ls=!1,Ms=null,Fs=0,Vs=0,Us=null,js=-1,Bs=0;function zs(){return 0!==(6&ms)?Je():-1!==js?js:js=Je()}function qs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==ws?ws&-ws:null!==ji.transition?(0===Bs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),Bs=e),Bs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ks(e,t,n){if(50<Vs)throw Vs=0,Us=null,Error(a(185));var r=Gs(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Ss|=t),4===_s&&Ys(r,ws)),Ws(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ds=Je()+500,Mi&&Ui())),r)}function Gs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ws(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?ws:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Vi(e)}(Js.bind(null,e)):Vi(Js.bind(null,e)),ri((function(){0===ms&&Ui()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(js=-1,Bs=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&ws===t||(Ds=Je()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Wi(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,ws=0,t=_s)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Is,tc(e,0),Ys(e,r),Ws(e,Je()),n;if(6===t)Ys(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Is,tc(e,0),Ys(e,r),Ws(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if(Ys(e,r),(130023424&r)===r&&10<(t=As+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){zs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if(Ys(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Ws(e,Je()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&$s(t)),e}function $s(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function Ys(e,t){for(t&=~Ts,t&=~Ss,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(0!==(6&ms))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Ws(e,Je()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Is,tc(e,0),Ys(e,t),Ws(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Ws(e,Je()),null}function Xs(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ds=Je()+500,Mi&&Ui())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&fc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Ui()}}function ec(){bs=xs.current,xi(xs)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Sa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Ja(),xi(Si),xi(Ei),ro();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:xi(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=xc(e.current,null),ws=bs=t,_s=0,Is=null,Ts=Ss=Es=0,Ns=Cs=null,null!==Ji){for(t=0;t<Ji.length;t++)if(null!==(r=(n=Ji[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ji=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Wi(),io.current=Xo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){_s=1,Is=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ws,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var m=fu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),hu(m,u,s,0,t),Va(c);break e}}o=c,4!==_s&&(_s=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(w){t=w,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Xo,null===e?Xo:e}function ic(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===gs||0===(268435455&Es)&&0===(268435455&Ss)||Ys(gs,ws)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&ws===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Wi(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,ws=0,_s}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!$e();)sc(ks)}function sc(e){var t=hs(e.alternate,e,bs);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,bs)))return void(ks=n)}else{if(null!==(n=ju(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return _s=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===_s&&(_s=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,ws=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Ku=t;null!==Ku;)if(e=(t=Ku).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Bi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(x){dc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Ku=t;null!==Ku;){var n=(t=Ku).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(I){dc(i,t,I)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Ku=n;else for(;null!==Ku;){t=Ku;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=Je())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Ku=n;for(var w=n.child;null!==w;){for(n=Ku=w;null!==Ku;){var b=(r=Ku).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Gu(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var _=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(I){dc(r,_,I)}}break;case 5:Gu(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==b?(b.return=r,Ku=b):ls(n)}w=w.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(I){dc(t,t.return,I)}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}}(e,r),hr(Xr),Xr=null,e.current=r,us(r,e,i),Ye(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Ws(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Rs)throw Rs=!1,e=Ps,Ps=null,e;0!==(1&Fs)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===Us?Vs++:(Vs=0,Us=e):Vs=0,Ui()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(Fs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Ku=e.current;null!==Ku;){var o=Ku,u=o.child;if(0!==(16&Ku.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ku=l;null!==Ku;){var f=Ku;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ku=h;else for(;null!==Ku;){var d=(f=Ku).sibling,p=f.return;if(Xu(f),f===l){Ku=null;break}if(null!==d){d.return=p,Ku=d;break}Ku=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ku=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ku=u;else e:for(;null!==Ku;){if(0!==(2048&(o=Ku).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ku=g;break e}Ku=o.return}}var k=e.current;for(Ku=k;null!==Ku;){var w=(u=Ku).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Ku=w;else e:for(u=k;null!==Ku;){if(0!==(2048&(s=Ku).flags))try{switch(s.tag){case 0:case 11:case 15:$u(9,s)}}catch(x){dc(s,s.return,x)}if(s===u){Ku=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Ku=b;break e}Ku=s.return}}if(ms=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=zs(),null!==(e=Gs(e,1))&&(yt(e,1,t),Ws(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=zs(),null!==(t=Gs(t,1))&&(yt(t,1,e),Ws(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=zs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(ws&n)===n&&(4===_s||3===_s&&(130023424&ws)===ws&&500>Je()-As?tc(e,0):Ts|=n),Ws(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=zs();null!==(e=Gs(e,t))&&(yt(e,t,n),Ws(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new kc(e,t,n,r)}function bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _c(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)bc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Ic(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=wc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=wc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=wc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Ec(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ic(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Ec(e,t,n,r){return(e=wc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Sc(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Tc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Dc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ri(e,n,t)}return t}function Rc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Dc(null),n=e.current,(a=ta(r=zs(),i=qs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Ws(e,r),e}function Pc(e,t,n,r){var i=t.current,a=zs(),o=qs(i);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ks(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Tu(t),Fa();break;case 5:Xa(t);break;case 1:Ni(t.type)&&Pi(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(zi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Du(e,t,n):(_i(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);_i(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return Uu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Na&&0!==(1048576&t.flags)&&Ia(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ei.current);$i(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Pi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Su(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=Bi(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=wu(null,t,r,Bi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 3:e:{if(Tu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ta=t,Na=!0,Aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),_u(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Du(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qa(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(zi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Si.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$i(t,n),r=r(i=Yi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=Bi(r=t.type,t.pendingProps),wu(e,t,r,i=Bi(r.type,i),n);case 15:return bu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Pi(t)):e=!1,$i(t,n),fa(t,r,i),da(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return Vu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}function Uc(e){this._internalRoot=e}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Bc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zc(){}function qc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Pc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Rc(t,r,e,0,null,!1,0,"",zc);return e._reactRootContainer=o,e[fi]=o.current,jr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",zc);return e._reactRootContainer=s,e[fi]=s.current,jr(8===e.nodeType?e.parentNode:e),Zs((function(){Pc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}Uc.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Pc(e,t,null,null)},Uc.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Pc(null,e,null,null)})),t[fi]=null}},Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),Ws(t,Je()),0===(6&ms)&&(Ds=Je()+500,Ui()))}break;case 13:var r=zs();Zs((function(){return Ks(e,1,r)})),Mc(e,1)}},bt=function(e){13===e.tag&&(Ks(e,134217728,zs()),Mc(e,134217728))},xt=function(e){if(13===e.tag){var t=zs(),n=qs(e);Ks(e,n,t),Mc(e,n)}},_t=function(){return gt},It=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Xs,Ne=Zs;var Kc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Se,Te,Xs]},Gc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Wc={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Wc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!jc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Vc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!Bc(t))throw Error(a(200));return qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uc(t)},t.render=function(e,t,n){if(!Bc(t))throw Error(a(200));return qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Bc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Xs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return qc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){m(A,0)};function P(e){E=e,I||(I=!0,_())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.d(r,{_:function(){return kS}});var e={};n.r(e),n.d(e,{FirebaseError:function(){return B},SDK_VERSION:function(){return Be},_DEFAULT_ENTRY_NAME:function(){return Ce},_addComponent:function(){return Re},_addOrOverwriteComponent:function(){return Pe},_apps:function(){return Ae},_clearComponents:function(){return Fe},_components:function(){return De},_getProvider:function(){return Le},_registerComponent:function(){return Oe},_removeServiceInstance:function(){return Me},deleteApp:function(){return Ge},getApp:function(){return qe},getApps:function(){return Ke},initializeApp:function(){return ze},onLog:function(){return Qe},registerVersion:function(){return He},setLogLevel:function(){return $e}});var t=n(791),i=n(250);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e){if(Array.isArray(e))return e}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){return h(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||l(e,t)||d()}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function x(e){var t=k();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function _(e,t,n){return _=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},_.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},I(e)}var E=n(757),S=n.n(E),T=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){return function(e){var t=T(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},A=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function D(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=D(e[n],t[n]));return e}var R=function(){function e(){var t=this;o(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return s(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function P(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(a)),""].join(".")}function O(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function L(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(O())}function M(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function F(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function V(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function U(){var e=O();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function j(){return"object"===typeof indexedDB}var B=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(v(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(v(a),z.prototype.create),a}return s(n)}(I(Error)),z=function(){function e(t,n,r){o(this,e),this.service=t,this.serviceName=n,this.errors=r}return s(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?q(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new B(n,a,t);return o}}]),e}();function q(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var K=/\{\$([^}]+)}/g;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(H(u)&&H(s)){if(!W(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function H(e){return null!==e&&"object"===typeof e}function Q(e){for(var t=[],n=function(){var e=p(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function $(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=p(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Y(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function J(e,t){var n=new X(e,t);return n.subscribe.bind(n)}var X=function(){function e(t,n){var r=this;o(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return s(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Z),void 0===r.error&&(r.error=Z),void 0===r.complete&&(r.complete=Z);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Z(){}function ee(e){return e&&e._delegate?e._delegate:e}function te(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var ne=function(){function e(t){o(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return s(e,[{key:"transaction",value:function(e,t){return new re(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new ie(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),re=function(){function e(t){var n=this;o(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return s(e,[{key:"objectStore",value:function(e){return new ie(this._transaction.objectStore(e))}}]),e}(),ie=function(){function e(t){o(this,e),this._store=t}return s(e,[{key:"index",value:function(e){return new ae(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new ae(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return te(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return te(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return te(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return te(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),ae=function(){function e(t){o(this,e),this._index=t}return s(e,[{key:"get",value:function(e){return te(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function oe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ue(e){return function(e){if(Array.isArray(e))return c(e)}(e)||oe(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){se(a,r,i,o,u,"next",e)}function u(e){se(a,r,i,o,u,"throw",e)}o(void 0)}))}}var le=function(){function e(t,n,r){o(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return s(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),fe="[DEFAULT]",he=function(){function e(t,n){o(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return s(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(s){}var t,n=f(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ce(E.mark((function e(){var t;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ue(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ue(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=f(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=p(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Jb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===fe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Jb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.component?this.component.multipleInstances?e:fe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var de,pe,ve=function(){function e(t){o(this,e),this.name=t,this.providers=new Map}return s(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new he(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ye=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pe||(pe={}));var me,ge,ke={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},we=pe.INFO,be=(a(de={},pe.DEBUG,"log"),a(de,pe.VERBOSE,"log"),a(de,pe.INFO,"info"),a(de,pe.WARN,"warn"),a(de,pe.ERROR,"error"),de),xe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=be[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},_e=function(){function e(t){o(this,e),this.name=t,this._logLevel=we,this._logHandler=xe,this._userLogHandler=null,ye.push(this)}return s(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ke[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.INFO].concat(t)),this._logHandler.apply(this,[this,pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.WARN].concat(t)),this._logHandler.apply(this,[this,pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.ERROR].concat(t)),this._logHandler.apply(this,[this,pe.ERROR].concat(t))}}]),e}();var Ie=function(){function e(t){o(this,e),this.container=t}return s(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ee="@firebase/app",Se="0.7.20",Te=new _e("@firebase/app"),Ce="[DEFAULT]",Ne=(a(me={},Ee,"fire-core"),a(me,"@firebase/app-compat","fire-core-compat"),a(me,"@firebase/analytics","fire-analytics"),a(me,"@firebase/analytics-compat","fire-analytics-compat"),a(me,"@firebase/app-check","fire-app-check"),a(me,"@firebase/app-check-compat","fire-app-check-compat"),a(me,"@firebase/auth","fire-auth"),a(me,"@firebase/auth-compat","fire-auth-compat"),a(me,"@firebase/database","fire-rtdb"),a(me,"@firebase/database-compat","fire-rtdb-compat"),a(me,"@firebase/functions","fire-fn"),a(me,"@firebase/functions-compat","fire-fn-compat"),a(me,"@firebase/installations","fire-iid"),a(me,"@firebase/installations-compat","fire-iid-compat"),a(me,"@firebase/messaging","fire-fcm"),a(me,"@firebase/messaging-compat","fire-fcm-compat"),a(me,"@firebase/performance","fire-perf"),a(me,"@firebase/performance-compat","fire-perf-compat"),a(me,"@firebase/remote-config","fire-rc"),a(me,"@firebase/remote-config-compat","fire-rc-compat"),a(me,"@firebase/storage","fire-gcs"),a(me,"@firebase/storage-compat","fire-gcs-compat"),a(me,"@firebase/firestore","fire-fst"),a(me,"@firebase/firestore-compat","fire-fst-compat"),a(me,"fire-js","fire-js"),a(me,"firebase","fire-js-all"),me),Ae=new Map,De=new Map;function Re(e,t){try{e.container.addComponent(t)}catch(n){Te.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Pe(e,t){e.container.addOrOverwriteComponent(t)}function Oe(e){var t=e.name;if(De.has(t))return Te.debug("There were multiple attempts to register component ".concat(t,".")),!1;De.set(t,e);var n,r=f(Ae.values());try{for(r.s();!(n=r.n()).done;){Re(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Le(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Me(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ce;Le(e,t).clearInstance(n)}function Fe(){De.clear()}var Ve=(a(ge={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),a(ge,"bad-app-name","Illegal App name: '{$appName}"),a(ge,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),a(ge,"app-deleted","Firebase App named '{$appName}' already deleted"),a(ge,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),a(ge,"invalid-log-argument","First argument to `onLog` must be null or a function."),a(ge,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),a(ge,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),a(ge,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),a(ge,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ge),Ue=new z("app","Firebase",Ve),je=function(){function e(t,n,r){var i=this;o(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new le("app",(function(){return i}),"PUBLIC"))}return s(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ue.create("app-deleted",{appName:this._name})}}]),e}(),Be="9.6.10";function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ce,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ue.create("bad-app-name",{appName:String(i)});var a=Ae.get(i);if(a){if(W(e,a.options)&&W(r,a.config))return a;throw Ue.create("duplicate-app",{appName:i})}var o,u=new ve(i),s=f(De.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new je(e,r,u);return Ae.set(i,l),l}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=Ae.get(e);if(!t)throw Ue.create("no-app",{appName:e});return t}function Ke(){return Array.from(Ae.values())}function Ge(e){return We.apply(this,arguments)}function We(){return(We=ce(E.mark((function e(t){var n;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ae.has(n)){e.next=6;break}return Ae.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,n){var r,i=null!==(r=Ne[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Te.warn(u.join(" "))}Oe(new le("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Qe(e,t){if(null!==e&&"function"!==typeof e)throw Ue.create("invalid-log-argument");!function(e,t){var n,r=f(ye);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ke[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:pe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function $e(e){var t;t=e,ye.forEach((function(e){e.setLogLevel(t)}))}var Ye="firebase-heartbeat-store",Je=null;function Xe(){var e,t,n;return Je||(Je=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ye)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new ne(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new ne(a.result),e.oldVersion,e.newVersion,new re(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Ue.create("storage-open",{originalErrorMessage:e.message})}))),Je}function Ze(e){return et.apply(this,arguments)}function et(){return et=ce(E.mark((function e(t){var n;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ye).objectStore(Ye).get(rt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Ue.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),et.apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return nt=ce(E.mark((function e(t,n){var r,i,a;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe();case 3:return r=e.sent,i=r.transaction(Ye,"readwrite"),a=i.objectStore(Ye),e.next=8,a.put(n,rt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Ue.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),nt.apply(this,arguments)}function rt(e){return"".concat(e.name,"!").concat(e.options.appId)}var it=function(){function e(t){var n=this;o(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ct(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return s(e,[{key:"triggerHeartbeat",value:function(){var e=ce(E.mark((function e(){var t,n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=at(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ce(E.mark((function e(){var t,n,r,i,a;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=at(),n=ot(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=N(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function at(){return(new Date).toISOString().substring(0,10)}function ot(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=f(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),lt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),lt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ut,st,ct=function(){function e(t){o(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return s(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ce(E.mark((function e(){return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ce(E.mark((function e(){var t;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ze(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ce(E.mark((function e(t){var n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ce(E.mark((function e(t){var n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ue(r.heartbeats),ue(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function lt(e){return N(JSON.stringify({version:2,heartbeats:e})).length}ut="",Oe(new le("platform-logger",(function(e){return new Ie(e)}),"PRIVATE")),Oe(new le("heartbeat",(function(e){return new it(e)}),"PRIVATE")),He(Ee,Se,ut),He(Ee,Se,"esm2017"),He("fire-js","");var ft=function(){function e(t,n){var r=this;o(this,e),this._delegate=t,this.firebase=n,Re(t,new le("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return s(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ge(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ce;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ce;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Re(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Pe(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ht=(a(st={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),a(st,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),st),dt=new z("app-compat","Firebase",ht);var pt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(G(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:He,setLogLevel:$e,onLog:Qe,apps:null,SDK_VERSION:Be,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Oe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw dt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&D(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!G(n,e=e||Ce))throw dt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ft);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){D(n,e)},createSubscribe:J,ErrorFactory:z,deepExtend:D}),n}(),vt=new _e("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&vt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mt=pt;!function(e){He("@firebase/app-compat","0.1.21",e)}();function gt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function kt(){return kt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=gt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kt.apply(this,arguments)}mt.registerVersion("firebase","9.6.10","app-compat");function wt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var bt;Object.create;var xt="facebook.com",_t="github.com",It="google.com",Et="password",St="twitter.com",Tt="EMAIL_SIGNIN",Ct="PASSWORD_RESET",Nt="RECOVER_EMAIL",At="REVERT_SECOND_FACTOR_ADDITION",Dt="VERIFY_AND_CHANGE_EMAIL",Rt="VERIFY_EMAIL";function Pt(){return a({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ot=function(){var e;return a(e={},"admin-restricted-operation","This operation is restricted to administrators only."),a(e,"argument-error",""),a(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),a(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),a(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),a(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),a(e,"cordova-not-ready","Cordova framework is not ready."),a(e,"cors-unsupported","This browser is not supported."),a(e,"credential-already-in-use","This credential is already associated with a different user account."),a(e,"custom-token-mismatch","The custom token corresponds to a different audience."),a(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),a(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),a(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),a(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),a(e,"email-already-in-use","The email address is already in use by another account."),a(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),a(e,"expired-action-code","The action code has expired."),a(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),a(e,"internal-error","An internal AuthError has occurred."),a(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),a(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),a(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),a(e,"invalid-auth-event","An internal AuthError has occurred."),a(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),a(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),a(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),a(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),a(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),a(e,"invalid-email","The email address is badly formatted."),a(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),a(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),a(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),a(e,"invalid-credential","The supplied auth credential is malformed or has expired."),a(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),a(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),a(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),a(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),a(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),a(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),a(e,"wrong-password","The password is invalid or the user does not have a password."),a(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),a(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),a(e,"invalid-provider-id","The specified provider ID is invalid."),a(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),a(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),a(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),a(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),a(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),a(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),a(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),a(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),a(e,"missing-continue-uri","A continue URL must be provided in the request."),a(e,"missing-iframe-start","An internal AuthError has occurred."),a(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),a(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),a(e,"missing-multi-factor-info","No second factor identifier is provided."),a(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),a(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),a(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),a(e,"app-deleted","This instance of FirebaseApp has been deleted."),a(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),a(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),a(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),a(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),a(e,"no-auth-event","An internal AuthError has occurred."),a(e,"no-such-provider","User was not linked to an account with the given provider."),a(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),a(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),a(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),a(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),a(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),a(e,"provider-already-linked","User can only be linked to one identity for the given provider."),a(e,"quota-exceeded","The project's quota for this operation has been exceeded."),a(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),a(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),a(e,"rejected-credential","The request contains malformed or mismatching credentials."),a(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),a(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),a(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),a(e,"timeout","The operation has timed out."),a(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),a(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),a(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),a(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),a(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),a(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),a(e,"unverified-email","The operation requires a verified email."),a(e,"user-cancelled","The user did not grant your application the permissions it requested."),a(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),a(e,"user-disabled","The user account has been disabled by an administrator."),a(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),a(e,"user-signed-out",""),a(e,"weak-password","The password must be 6 characters long or more."),a(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),a(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Lt=Pt,Mt=new z("auth","Firebase",Pt()),Ft=new _e("@firebase/auth");function Vt(e){if(Ft.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ft.error.apply(Ft,["Auth (".concat(Be,"): ").concat(e)].concat(n))}}function Ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qt.apply(void 0,[e].concat(n))}function jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qt.apply(void 0,[e].concat(n))}function Bt(e,t,n){var r=Object.assign(Object.assign({},Lt()),a({},t,n));return new z("auth","Firebase",r).create(t,{appName:e.name})}function zt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ut(e,"argument-error"),Bt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ue(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ue(o)))}return Mt.create.apply(Mt,[e].concat(n))}function Kt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qt.apply(void 0,[t].concat(r))}}function Gt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Vt(t),new Error(t)}function Wt(e,t){e||Gt(t)}var Ht=new Map;function Qt(e){Wt(e instanceof Function,"Expected a class definition");var t=Ht.get(e);return t?(Wt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ht.set(e,t),t)}function $t(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yt(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Xt=function(){function e(t,n){o(this,e),this.shortDelay=t,this.longDelay=n,Wt(n>t,"Short delay should be less than long delay!"),this.isMobile=L()||V()}return s(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yt()||F()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Zt(e,t){Wt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var en=function(){function e(){o(this,e)}return s(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),tn=(a(bt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),a(bt,"MISSING_CUSTOM_TOKEN","internal-error"),a(bt,"INVALID_IDENTIFIER","invalid-email"),a(bt,"MISSING_CONTINUE_URI","internal-error"),a(bt,"INVALID_PASSWORD","wrong-password"),a(bt,"MISSING_PASSWORD","internal-error"),a(bt,"EMAIL_EXISTS","email-already-in-use"),a(bt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),a(bt,"INVALID_IDP_RESPONSE","invalid-credential"),a(bt,"INVALID_PENDING_TOKEN","invalid-credential"),a(bt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),a(bt,"MISSING_REQ_TYPE","internal-error"),a(bt,"EMAIL_NOT_FOUND","user-not-found"),a(bt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),a(bt,"EXPIRED_OOB_CODE","expired-action-code"),a(bt,"INVALID_OOB_CODE","invalid-action-code"),a(bt,"MISSING_OOB_CODE","internal-error"),a(bt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),a(bt,"INVALID_ID_TOKEN","invalid-user-token"),a(bt,"TOKEN_EXPIRED","user-token-expired"),a(bt,"USER_NOT_FOUND","user-token-expired"),a(bt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),a(bt,"INVALID_CODE","invalid-verification-code"),a(bt,"INVALID_SESSION_INFO","invalid-verification-id"),a(bt,"INVALID_TEMPORARY_PROOF","invalid-credential"),a(bt,"MISSING_SESSION_INFO","missing-verification-id"),a(bt,"SESSION_EXPIRED","code-expired"),a(bt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),a(bt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),a(bt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),a(bt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),a(bt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),a(bt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),a(bt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),a(bt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),a(bt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),a(bt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),a(bt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),bt),nn=new Xt(3e4,6e4);function rn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function an(e,t,n,r){return on.apply(this,arguments)}function on(){return on=ce(S().mark((function e(t,n,r,i){var a,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",un(t,a,ce(S().mark((function e(){var a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Q(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",en.fetch()(fn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),on.apply(this,arguments)}function un(e,t,n){return sn.apply(this,arguments)}function sn(){return sn=ce(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},tn),n),e.prev=2,a=new hn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw dn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=p(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw dn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw dn(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw Bt(t,d,h);case 30:Ut(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof B)){e.next=37;break}throw e.t0;case 37:Ut(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),sn.apply(this,arguments)}function cn(e,t,n,r){return ln.apply(this,arguments)}function ln(){return ln=ce(S().mark((function e(t,n,r,i){var a,o,u=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,an(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ut(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ln.apply(this,arguments)}function fn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Zt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var hn=function(){function e(t){var n=this;o(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(jt(n.auth,"network-request-failed"))}),nn.get())}))}return s(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function dn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=jt(e,t,r);return i.customData._tokenResponse=n,i}function pn(e,t){return vn.apply(this,arguments)}function vn(){return vn=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}function yn(e,t){return mn.apply(this,arguments)}function mn(){return mn=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function gn(e,t){return kn.apply(this,arguments)}function kn(){return kn=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function wn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function bn(){return bn=ce(S().mark((function e(t){var n,r,i,a,o,u,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Kt((a=_n(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:wn(xn(a.auth_time)),issuedAtTime:wn(xn(a.iat)),expirationTime:wn(xn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function xn(e){return 1e3*Number(e)}function _n(e){var t=p(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Vt("JWT malformed, contained fewer than 3 sections"),null;try{var a=A(r);return a?JSON.parse(a):(Vt("Failed to decode base64 JWT payload"),null)}catch(o){return Vt("Caught error parsing JWT payload as JSON",o),null}}function In(e,t){return En.apply(this,arguments)}function En(){return En=ce(S().mark((function e(t,n){var r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof B&&Sn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),En.apply(this,arguments)}function Sn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Tn=function(){function e(t){o(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return s(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Cn=function(){function e(t,n){o(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return s(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Nn(e){return An.apply(this,arguments)}function An(){return An=ce(S().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,In(t,gn(r,{idToken:i}));case 6:Kt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Pn(o.providerUserInfo):[],s=Rn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Cn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),An.apply(this,arguments)}function Dn(){return(Dn=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,Nn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ue(n),ue(t))}function Pn(e){return e.map((function(e){var t=e.providerId,n=wt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function On(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(t,{},ce(S().mark((function e(){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Q({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=fn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",en.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}var Mn=function(){function e(){o(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return s(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Kt(e.idToken,"internal-error"),Kt("undefined"!==typeof e.idToken,"internal-error"),Kt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=_n(e);return Kt(t,"internal-error"),Kt("undefined"!==typeof t.exp,"internal-error"),Kt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ce(S().mark((function e(t){var n,r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Kt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Gt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Kt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Kt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Kt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Fn(e,t){Kt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Vn=function(){function e(t){o(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=wt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ue(a.providerData):[],this.metadata=new Cn(a.createdAt||void 0,a.lastLoginAt||void 0)}return s(e,[{key:"getIdToken",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Kt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return bn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Dn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ce(S().mark((function e(t){var n,r,i=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Nn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,In(this,pn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Kt(k&&_,t,"internal-error");var I=Mn.fromJSON(this.name,_);Kt("string"===typeof k,t,"internal-error"),Fn(f,t.name),Fn(h,t.name),Kt("boolean"===typeof w,t,"internal-error"),Kt("boolean"===typeof b,t,"internal-error"),Fn(d,t.name),Fn(p,t.name),Fn(v,t.name),Fn(y,t.name),Fn(m,t.name),Fn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ce(S().mark((function t(n,r){var i,a,o,u=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Mn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Nn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Un=function(){function e(){o(this,e),this.type="NONE",this.storage={}}return s(e,[{key:"_isAvailable",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Un.type="NONE";var jn=Un;function Bn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var zn=function(){function e(t,n,r){o(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,u=i.name;this.fullUserKey=Bn(this.userKey,a.apiKey,u),this.fullPersistenceKey=Bn("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return s(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Vn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ce(S().mark((function t(n,r){var i,a,o,u,s,c,l,h,d,p,v,y=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Qt(jn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Qt(jn),u=Bn(i,n.config.apiKey,n.name),s=null,c=f(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=Vn._fromJSON(n,d),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function qn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Kn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($n(t))return"Blackberry";if(Yn(t))return"Webos";if(Gn(t))return"Safari";if((t.includes("chrome/")||Wn(t))&&!t.includes("edge/"))return"Chrome";if(Qn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/firefox\//i.test(e)}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/crios\//i.test(e)}function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/iemobile/i.test(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/android/i.test(e)}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/blackberry/i.test(e)}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/webos/i.test(e)}function Jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/iphone|ipad|ipod/i.test(e)}function Xn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return Jn(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Zn(){return U()&&10===document.documentMode}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return Jn(e)||Qn(e)||Yn(e)||$n(e)||/windows phone/i.test(e)||Hn(e)}function tr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qn(O());break;case"Worker":t="".concat(qn(O()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Be,"/").concat(r)}var nr=function(){function e(t,n,r){o(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ir(this),this.idTokenSubscription=new ir(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return s(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Qt(t)),this._initializationPromise=this.queue(ce(S().mark((function r(){var i,a;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,zn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ce(S().mark((function e(t){var n,r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Kt(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ee(t):null)&&Kt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ce(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Kt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Qt(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Kt(n=t&&Qt(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,zn.create(this,[Qt(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ce(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Kt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ce(S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function rr(e){return ee(e)}var ir=function(){function e(t){var n=this;o(this,e),this.auth=t,this.observer=null,this.addObserver=J((function(e){return n.observer=e}))}return s(e,[{key:"next",get:function(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ar(e,t,n){var r=rr(e);Kt(r._canInitEmulator,r,"emulator-config-failed"),Kt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=or(t),o=function(e){var t=or(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ur(r.substr(a.length+1))}}var o=p(r.split(":"),2);return{host:o[0],port:ur(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function or(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ur(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var sr=function(){function e(t,n){o(this,e),this.providerId=t,this.signInMethod=n}return s(e,[{key:"toJSON",value:function(){return Gt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Gt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Gt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Gt("not implemented")}}]),e}();function cr(e,t){return lr.apply(this,arguments)}function lr(){return lr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:resetPassword",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return hr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return pr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:update",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return yr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithPassword",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function mr(e,t){return gr.apply(this,arguments)}function gr(){return gr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:sendOobCode",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(e,t){return wr.apply(this,arguments)}function wr(){return wr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function br(e,t){return xr.apply(this,arguments)}function xr(){return xr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function _r(e,t){return Ir.apply(this,arguments)}function Ir(){return Ir=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Er(e,t){return Sr.apply(this,arguments)}function Sr(){return Sr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Tr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithEmailLink",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Nr(e,t){return Ar.apply(this,arguments)}function Ar(){return Ar=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithEmailLink",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}var Dr=function(e){m(n,e);var t=x(n);function n(e,r,i){var a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=u,a}return s(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",vr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Tr(t,{email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",fr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Nr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(sr);function Rr(e,t){return Pr.apply(this,arguments)}function Pr(){return Pr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithIdp",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}var Or=function(e){m(n,e);var t=x(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return s(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Rr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Rr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Rr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Q(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ut("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=wt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(sr);function Lr(e,t){return Mr.apply(this,arguments)}function Mr(){return Mr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:sendVerificationCode",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}function Fr(){return Fr=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithPhoneNumber",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Vr(){return Vr=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(t,"POST","/v1/accounts:signInWithPhoneNumber",rn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw dn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}var Ur=a({},"USER_NOT_FOUND","user-not-found");function jr(){return jr=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithPhoneNumber",rn(t,r),Ur));case 2:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}var Br=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this,"phone","phone")).params=e,r}return s(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Fr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Vr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(sr);var zr=function(){function e(t){var n,r,i,a,u,s;o(this,e);var c=$(Y(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Kt(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return s(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=$(Y(e)).link,n=t?$(Y(t)).deep_link_id:null,r=$(Y(e)).deep_link_id;return(r?$(Y(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Jb){return null}}}]),e}();var qr=function(){function e(){o(this,e),this.providerId=e.PROVIDER_ID}return s(e,null,[{key:"credential",value:function(e,t){return Dr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=zr.parseLink(t);return Kt(n,"argument-error"),Dr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();qr.PROVIDER_ID="password",qr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Kr=function(){function e(t){o(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return s(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Gr=function(e){m(n,e);var t=x(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).scopes=[],e}return s(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ue(this.scopes)}}]),n}(Kr),Wr=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Kt(e.idToken||e.accessToken,"argument-error"),Or._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Kt("providerId"in t&&"signInMethod"in t,"argument-error"),Or._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Gr),Hr=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.call(this,"facebook.com")}return s(n,null,[{key:"credential",value:function(e){return Or._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Jb){return null}}}]),n}(Gr);Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hr.PROVIDER_ID="facebook.com";var Qr=function(e){m(n,e);var t=x(n);function n(){var e;return o(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return s(n,null,[{key:"credential",value:function(e,t){return Or._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Jb){return null}}}]),n}(Gr);Qr.GOOGLE_SIGN_IN_METHOD="google.com",Qr.PROVIDER_ID="google.com";var $r=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.call(this,"github.com")}return s(n,null,[{key:"credential",value:function(e){return Or._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Jb){return null}}}]),n}(Gr);$r.GITHUB_SIGN_IN_METHOD="github.com",$r.PROVIDER_ID="github.com";var Yr=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return s(n,[{key:"_getIdTokenResponse",value:function(e){return Rr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Rr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Rr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(sr),Jr=function(e){m(n,e);var t=x(n);function n(e){return o(this,n),Kt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return s(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Yr.fromJSON(e);return Kt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Yr._create(r,n)}catch(i){return null}}}]),n}(Kr),Xr=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.call(this,"twitter.com")}return s(n,null,[{key:"credential",value:function(e,t){return Or._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Jb){return null}}}]),n}(Gr);function Zr(e,t){return ei.apply(this,arguments)}function ei(){return ei=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signUp",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}Xr.TWITTER_SIGN_IN_METHOD="twitter.com",Xr.PROVIDER_ID="twitter.com";var ti=function(){function e(t){o(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return s(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ce(S().mark((function t(n,r,i){var a,o,u,s,c=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Vn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ni(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ce(S().mark((function t(n,r,i){var a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ni(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ni(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ri(){return ri=ce(S().mark((function e(t){var n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ti({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Zr(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ti._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}var ii=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var u,s;return o(this,n),(u=t.call(this,r.code,r.message)).operationType=i,u.user=a,Object.setPrototypeOf(v(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},u}return s(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(B);function ai(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ii._fromErrorAndOperation(e,n,t,r);throw n}))}function oi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ui(e,t){return si.apply(this,arguments)}function si(){return si=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,fi(!0,r,n);case 3:return e.t0=yn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=oi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return li=ce(S().mark((function e(t,n){var r,i,a=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=In,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ti._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function fi(e,t,n){return hi.apply(this,arguments)}function hi(){return(hi=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(n);case 2:i=oi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Kt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return pi=ce(S().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,In(t,ai(i,a,n,t),r);case 6:return Kt((o=e.sent).idToken,i,"internal-error"),Kt(u=_n(o.idToken),i,"internal-error"),s=u.sub,Kt(t.uid===s,i,"user-mismatch"),e.abrupt("return",ti._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ut(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),pi.apply(this,arguments)}function vi(e,t){return yi.apply(this,arguments)}function yi(){return yi=ce(S().mark((function e(t,n){var r,i,a,o,u=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ai(t,i,n);case 4:return a=e.sent,e.next=7,ti._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function mi(e,t){return gi.apply(this,arguments)}function gi(){return gi=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi(rr(t),n));case 1:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function ki(e,t){return wi.apply(this,arguments)}function wi(){return(wi=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,fi(!1,r,n.providerId);case 3:return e.abrupt("return",ci(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bi(e,t){return xi.apply(this,arguments)}function xi(){return(xi=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",di(ee(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cn(t,"POST","/v1/accounts:signInWithCustomToken",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ei(){return Ei=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rr(t),e.next=3,_i(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ti._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}var Si=function(){function e(t,n){o(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return s(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ti._fromServerResponse(e,t):Ut(e,"internal-error")}}]),e}(),Ti=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return s(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Si);function Ci(e,t,n){var r;Kt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Kt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Kt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Kt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ni(){return Ni=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ci(i,a,r),e.next=5,br(i,a);case 5:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(){return Ai=ce(S().mark((function e(t,n,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Di(){return Di=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Ri(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,cr(r,{oobCode:n});case 3:i=e.sent,Kt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Kt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Kt(i.mfaInfo,r,"internal-error");case 13:Kt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Si._fromServerResponse(rr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Oi(){return Oi=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ri(ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Li(e,t,n){return Mi.apply(this,arguments)}function Mi(){return Mi=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,Zr(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ti._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Fi(){return Fi=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"EMAIL_SIGNIN",email:n},Kt(r.handleCodeInApp,i,"argument-error"),r&&Ci(i,a,r),e.next=6,_r(i,a);case 6:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Vi(){return Vi=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),Kt((a=qr.credentialWithLink(n,r||$t()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",mi(i,a));case 4:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function Ui(e,t){return ji.apply(this,arguments)}function ji(){return ji=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:createAuthUri",rn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Bi(){return Bi=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yt()?$t():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ui(ee(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function zi(){return(zi=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ci(r.auth,a,n),e.next=8,kr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=ce(S().mark((function e(t,n,r){var i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ci(i.auth,o,r),e.next=8,Er(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",an(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Wi(){return(Wi=ce(S().mark((function e(t,n){var r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ee(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,In(a,Ki(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t,n){return Qi.apply(this,arguments)}function Qi(){return Qi=ce(S().mark((function e(t,n,r){var i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,In(t,fr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}var $i=s((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Yi=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var u;return o(this,n),(u=t.call(this,e,r,i)).username=a,u}return s(n)}($i),Ji=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"facebook.com",r)}return s(n)}($i),Xi=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return s(n)}(Yi),Zi=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"google.com",r)}return s(n)}($i),ea=function(e){m(n,e);var t=x(n);function n(e,r,i){return o(this,n),t.call(this,e,"twitter.com",r,i)}return s(n)}(Yi);function ta(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=_n(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new $i(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ji(a,i);case"github.com":return new Xi(a,i);case"google.com":return new Zi(a,i);case"twitter.com":return new ea(a,i,e.screenName||null);case"custom":case"anonymous":return new $i(a,null);default:return new $i(a,r,i)}}(n)}var na=function(){function e(t,n){o(this,e),this.type=t,this.credential=n}return s(e,[{key:"toJSON",value:function(){return{multiFactorSession:a({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ra=function(){function e(t,n,r){o(this,e),this.session=t,this.hints=n,this.signInResolver=r}return s(e,[{key:"resolveSignIn",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=rr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Si._fromServerResponse(r,e)}));Kt(i.mfaPendingCredential,r,"internal-error");var o=na._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ce(S().mark((function e(t){var a,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ti._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Kt(n.user,r,"internal-error"),e.abrupt("return",ti._forOperation(n.user,n.operationType,u));case 17:Ut(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ia(e,t){return an(e,"POST","/v2/accounts/mfaEnrollment:start",rn(e,t))}function aa(e,t){return an(e,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(e,t))}var oa=function(){function e(t){var n=this;o(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Si._fromServerResponse(t.auth,e)})))}))}return s(e,[{key:"getSession",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=na,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,In(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ce(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,In(this.user,aa(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ua=new WeakMap;var sa="__sak",ca=function(){function e(t,n){o(this,e),this.storageRetriever=t,this.type=n}return s(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(Jb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var la=function(e){m(n,e);var t=x(n);function n(){var e;return o(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=O();return Gn(e)||Jn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=er(),e._shouldAllowMigration=!0,e}return s(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Zn()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ce(S().mark((function e(t,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(g(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ce(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(g(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(g(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ca);la.type="LOCAL";var fa=la,ha=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return s(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ca);ha.type="SESSION";var da=ha;function pa(e){return Promise.all(e.map(function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var va=function(){function e(t){o(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return s(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ce(S().mark((function e(t){var n,r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,pa(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ya(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}va.receivers=[];var ma=function(){function e(t){o(this,e),this.target=t,this.handlers=new Set}return s(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ce(S().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ya("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ga(){return window}function ka(){return"undefined"!==typeof ga().WorkerGlobalScope&&"function"===typeof ga().importScripts}function wa(){return ba.apply(this,arguments)}function ba(){return(ba=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function xa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var _a="firebaseLocalStorageDb",Ia="firebaseLocalStorage",Ea="fbase_key",Sa=function(){function e(t){o(this,e),this.request=t}return s(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ta(e,t){return e.transaction([Ia],t?"readwrite":"readonly").objectStore(Ia)}function Ca(){var e=indexedDB.deleteDatabase(_a);return new Sa(e).toPromise()}function Na(){var e=indexedDB.open(_a,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ia,{keyPath:Ea})}catch(r){n(r)}})),e.addEventListener("success",ce(S().mark((function n(){var r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ia)){n.next=12;break}return r.close(),n.next=5,Ca();case 5:return n.t0=t,n.next=8,Na();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Aa(e,t,n){return Da.apply(this,arguments)}function Da(){return Da=ce(S().mark((function e(t,n,r){var i,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ta(t,!0).put((a(i={},Ea,n),a(i,"value",r),i)),e.abrupt("return",new Sa(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ra(e,t){return Pa.apply(this,arguments)}function Pa(){return Pa=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ta(t,!1).get(n),e.next=3,new Sa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Oa(e,t){var n=Ta(e,!0).delete(t);return new Sa(n).toPromise()}var La=function(){function e(){o(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return s(e,[{key:"_openDb",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Na();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ce(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=va._getInstance(ka()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ce(S().mark((function e(n,r){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ce(S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ma(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&xa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Na();case 5:return t=e.sent,e.next=8,Aa(t,sa,"1");case 8:return e.next=10,Oa(t,sa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ce(S().mark((function e(t,n){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Aa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ra(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ce(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Oa(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ce(S().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ta(e,!1).getAll();return new Sa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=f(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(d){i.e(d)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();La.type="LOCAL";var Ma=La;function Fa(e,t){return an(e,"POST","/v2/accounts/mfaSignIn:start",rn(e,t))}function Va(e){return Ua.apply(this,arguments)}function Ua(){return Ua=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function ja(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=jt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ba(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var za=1e12,qa=function(){function e(t){o(this,e),this.auth=t,this.counter=za,this._widgets=new Map}return s(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ka(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||za;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||za;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||za,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ka=function(){function e(t,n,r){var i=this;o(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Kt(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return s(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Ga=Ba("rcb"),Wa=new Xt(3e4,6e4),Ha="https://www.google.com/recaptcha/api.js?",Qa=function(){function e(){o(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ga().grecaptcha}return s(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Kt($a(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ga().grecaptcha):new Promise((function(r,i){var a=ga().setTimeout((function(){i(jt(e,"network-request-failed"))}),Wa.get());ga()[Ga]=function(){ga().clearTimeout(a),delete ga()[Ga];var o=ga().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(jt(e,"internal-error"))},ja("".concat(Ha,"?").concat(Q({onload:Ga,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(jt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ga().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function $a(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ya=function(){function e(){o(this,e)}return s(e,[{key:"load",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new qa(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ja="recaptcha",Xa={theme:"light",type:"image"},Za=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Xa),r=arguments.length>2?arguments[2]:void 0;o(this,e),this.parameters=n,this.type=Ja,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rr(r),this.isInvisible="invisible"===this.parameters.size,Kt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Kt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ya:new Qa,this.validateStartingState()}return s(e,[{key:"verify",value:function(){var e=ce(S().mark((function e(){var t,n,r,i=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Kt(!this.parameters.sitekey,this.auth,"argument-error"),Kt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Kt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ga()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Kt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ce(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kt(Yt()&&!ka(),this.auth,"internal-error"),e.next=3,eo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Va(this.auth);case 8:Kt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Kt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function eo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var to=function(){function e(t,n){o(this,e),this.verificationId=t,this.onConfirmation=n}return s(e,[{key:"confirm",value:function(e){var t=Br._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function no(){return no=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,oo(i,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new to(a,(function(e){return mi(i,e)})));case 5:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(e,t,n){return io.apply(this,arguments)}function io(){return(io=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,fi(!1,i,"phone");case 3:return e.next=5,oo(i.auth,n,ee(r));case 5:return a=e.sent,e.abrupt("return",new to(a,(function(e){return ki(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(){return(ao=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,oo(i.auth,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new to(a,(function(e){return bi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(e,t,n){return uo.apply(this,arguments)}function uo(){return uo=ce(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Kt("string"===typeof a,t,"argument-error"),Kt(r.type===Ja,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Kt("enroll"===u.type,t,"internal-error"),e.next=13,ia(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Kt("signin"===u.type,t,"internal-error"),Kt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Fa(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Lr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),uo.apply(this,arguments)}function so(){return(so=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ci(ee(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var co=function(){function e(t){o(this,e),this.providerId=e.PROVIDER_ID,this.auth=rr(t)}return s(e,[{key:"verifyPhoneNumber",value:function(e,t){return oo(this.auth,e,ee(t))}}],[{key:"credential",value:function(e,t){return Br._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Br._fromTokenResponse(n,r):null}}]),e}();function lo(e,t){return t?Qt(t):(Kt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}co.PROVIDER_ID="phone",co.PHONE_SIGN_IN_METHOD="phone";var fo=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this,"custom","custom")).params=e,r}return s(n,[{key:"_getIdTokenResponse",value:function(e){return Rr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Rr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Rr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(sr);function ho(e){return vi(e.auth,new fo(e),e.bypassAuthState)}function po(e){var t=e.auth,n=e.user;return Kt(n,t,"internal-error"),di(n,new fo(e),e.bypassAuthState)}function vo(e){return yo.apply(this,arguments)}function yo(){return yo=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Kt(r=t.user,n,"internal-error"),e.abrupt("return",ci(r,new fo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),yo.apply(this,arguments)}var mo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return s(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ce(S().mark((function t(n,r){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ce(S().mark((function e(t){var n,r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ho;case"linkViaPopup":case"linkViaRedirect":return vo;case"reauthViaPopup":case"reauthViaRedirect":return po;default:Ut(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),go=new Xt(2e3,1e4);function ko(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),zt(t,n,Kr),a=lo(i,r),o=new Io(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function bo(){return(bo=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt((i=ee(t)).auth,n,Kr),a=lo(i.auth,r),o=new Io(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t,n){return _o.apply(this,arguments)}function _o(){return(_o=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt((i=ee(t)).auth,n,Kr),a=lo(i.auth,r),o=new Io(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Io=function(e){m(n,e);var t=x(n);function n(e,r,i,a,u){var s;return o(this,n),(s=t.call(this,e,r,a,u)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=v(s),s}return s(n,[{key:"executeNotNull",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Kt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ce(S().mark((function e(){var t,n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(1===this.filter.length,"Popup operations only handle one event"),t=ya(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(jt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(jt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(jt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,go.get())}()}}]),n}(mo);Io.currentPopupAction=null;var Eo=new Map,So=function(e){m(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return s(n,[{key:"execute",value:function(){var e=ce(S().mark((function e(){var t,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Eo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,To(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,kt(g(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Eo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Eo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ce(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",kt(g(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",kt(g(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(mo);function To(e,t){return Co.apply(this,arguments)}function Co(){return Co=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ro(n),i=Do(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t)._set(Ro(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Do(e){return Qt(e._redirectPersistence)}function Ro(e){return Bn("pendingRedirect",e.config.apiKey,e.name)}function Po(e,t,n){return function(e,t,n){return Oo.apply(this,arguments)}(e,t,n)}function Oo(){return Oo=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),zt(t,n,Kr),a=lo(i,r),e.next=5,No(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Lo(e,t,n){return function(e,t,n){return Mo.apply(this,arguments)}(e,t,n)}function Mo(){return(Mo=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt((i=ee(t)).auth,n,Kr),a=lo(i.auth,r),e.next=5,No(a,i.auth);case 5:return e.next=7,qo(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t,n){return function(e,t,n){return Vo.apply(this,arguments)}(e,t,n)}function Vo(){return(Vo=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt((i=ee(t)).auth,n,Kr),a=lo(i.auth,r),e.next=5,fi(!1,i,n.providerId);case 5:return e.next=7,No(a,i.auth);case 7:return e.next=9,qo(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return jo=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(t)._initializationPromise;case 2:return e.abrupt("return",Bo(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return zo=ce(S().mark((function e(t,n){var r,i,a,o,u,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=rr(t),a=lo(i,n),o=new So(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function qo(e){return Ko.apply(this,arguments)}function Ko(){return(Ko=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ya("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Go=function(){function e(t){o(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return s(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ho(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ho(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Wo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Wo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ho(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Qo(e){return $o.apply(this,arguments)}function $o(){return $o=ce(S().mark((function e(t){var n,r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",an(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}var Yo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jo=/^https?/;function Xo(){return Xo=ce(S().mark((function e(t){var n,r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qo(t);case 4:n=e.sent,r=n.authorizedDomains,i=f(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Zo(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ut(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Xo.apply(this,arguments)}function Zo(e){var t=$t(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Jo.test(r))return!1;if(Yo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var eu=new Xt(3e4,6e4);function tu(){var e=ga().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ue(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var nu=null;function ru(e){return nu=nu||function(e){return new Promise((function(t,n){var r,i,a;function o(){tu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){tu(),n(jt(e,"network-request-failed"))},timeout:eu.get()})}if(null===(i=null===(r=ga().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ga().gapi)||void 0===a?void 0:a.load)){var u=Ba("iframefcb");return ga()[u]=function(){gapi.load?o():n(jt(e,"network-request-failed"))},ja("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw nu=null,e}))}(e),nu}var iu=new Xt(5e3,15e3),au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ou=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uu(e){var t=e.config;Kt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Zt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Be},i=ou.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Q(r).slice(1))}function su(e){return cu.apply(this,arguments)}function cu(){return cu=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ru(t);case 2:return n=e.sent,Kt(r=ga().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:uu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:au,dontclear:!0},(function(e){return new Promise(function(){var n=ce(S().mark((function n(r,i){var a,o,u;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ga().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=jt(t,"network-request-failed"),o=ga().setTimeout((function(){i(a)}),iu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}var lu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fu="_blank",hu="http://localhost",du=function(){function e(t){o(this,e),this.window=t,this.associatedEvent=null}return s(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function pu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},lu),{width:r.toString(),height:i.toString(),top:a,left:o}),c=O().toLowerCase();n&&(u=Wn(c)?fu:n),Kn(c)&&(t=t||hu,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=p(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Xn(c)&&"_self"!==u)return vu(t||"",u),new du(null);var f=window.open(t||"",u,l);Kt(f,e,"popup-blocked");try{f.focus()}catch(h){}return new du(f)}function vu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var yu="__/auth/handler",mu="emulator/auth/handler";function gu(e,t,n,r,i,a){Kt(e.config.authDomain,e,"auth-domain-config-required"),Kt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Be,eventId:i};if(t instanceof Kr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=p(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Gr){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,v=0,y=Object.keys(d);v<y.length;v++){var m=y[v];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(yu);return Zt(t,mu)}(e),"?").concat(Q(d).slice(1))}var ku="webStorageSupport",wu=function(){function e(){o(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=da,this._completeRedirectFn=Bo}return s(e,[{key:"_openPopup",value:function(){var e=ce(S().mark((function e(t,n,r,i){var a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=gu(t,n,r,$t(),i),e.abrupt("return",pu(t,o,ya()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ce(S().mark((function e(t,n,r,i){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=gu(t,n,r,$t(),i),ga().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Wt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(t);case 2:return n=e.sent,r=new Go(t),n.register("authEvent",(function(e){return Kt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ku,{type:ku},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ut(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Xo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return er()||Gn()||Jn()}}]),e}(),bu=wu,xu=function(){function e(t){o(this,e),this.factorId=t}return s(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Gt("unexpected MultiFactorSessionType")}}}]),e}(),_u=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this,"phone")).credential=e,r}return s(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return an(e,"POST","/v2/accounts/mfaEnrollment:finalize",rn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return an(e,"POST","/v2/accounts/mfaSignIn:finalize",rn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xu),Iu=function(){function e(){o(this,e)}return s(e,null,[{key:"assertion",value:function(e){return _u._fromCredential(e)}}]),e}();Iu.FACTOR_ID="phone";var Eu,Su="@firebase/auth",Tu="0.19.11",Cu=function(){function e(t){o(this,e),this.auth=t,this.internalListeners=new Map}return s(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Nu(){return window}Eu="Browser",Oe(new le("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Kt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Kt(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Eu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tr(Eu)},i=new nr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Oe(new le("auth-internal",(function(e){return function(e){return new Cu(e)}(rr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),He(Su,Tu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Eu)),He(Su,Tu,"esm2017");function Au(e,t,n){return Du.apply(this,arguments)}function Du(){return Du=ce(S().mark((function e(t,n,r){var i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nu(),o=a.BuildInfo,Wt(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Fu(n.sessionId);case 4:return u=e.sent,s={},Jn()?s.ibi=o.packageName:Qn()?s.apn=o.packageName:Ut(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",gu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Ru(){return Ru=ce(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nu(),r=n.BuildInfo,i={},Jn()?i.iosBundleId=r.packageName:Qn()?i.androidPackageName=r.packageName:Ut(t,"operation-not-supported-in-this-environment"),e.next=5,Qo(t,i);case 5:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Pu(e){var t=Nu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ou(e,t,n){return Lu.apply(this,arguments)}function Lu(){return Lu=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(jt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Qn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Lu.apply(this,arguments)}function Mu(e){var t,n,r,i,a,o,u,s,c,l,f=Nu();Kt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Kt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Kt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Kt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Kt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Fu(e){return Vu.apply(this,arguments)}function Vu(){return(Vu=ce(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uu(e){if(Wt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ju=function(e){m(n,e);var t=x(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return s(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),kt(g(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Go);function Bu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Wu(),postBody:null,tenantId:e.tenantId,error:jt(e,"no-auth-event")}}function zu(e,t){return Hu()._set(Qu(e),t)}function qu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu()._get(Qu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Hu()._remove(Qu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){var n,r,i=function(e){var t=$u(e),n=t.link?decodeURIComponent(t.link):void 0,r=$u(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return $u(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=$u(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?jt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Wu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Hu(){return Qt(fa)}function Qu(e){return Bn("authEvent",e.config.apiKey,e.name)}function $u(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=h(t=n)||oe(t)||l(t)||d();r[0];return $(r.slice(1).join("?"))}var Yu=function(){function e(){o(this,e),this._redirectPersistence=da,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bo}return s(e,[{key:"_initialize",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ju(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ut(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ce(S().mark((function e(t,n,r,i){var a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Eo.clear(),e.next=10,this._originValidation(t);case 10:return o=Bu(t,r,i),e.next=13,zu(t,o);case 13:return e.next=15,Au(t,o,n);case 15:return u=e.sent,e.next=18,Pu(u);case 18:return s=e.sent,e.abrupt("return",Ou(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ru.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Nu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qu(e);case 2:t.onEvent(Xu());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ce(S().mark((function n(r){var i,a;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,qu(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Gu(i,r.url)),t.onEvent(a||Xu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Nu().handleOpenURL=function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Ju=Yu;function Xu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}function Zu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return!("file:"!==Zu()&&"ionic:"!==Zu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ts(){return U()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return/Edge\/\d+/.test(e)}function rs(){try{var e=self.localStorage,t=ya();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();return ts()||ns(e)}()||j()}catch(n){return is()&&j()}return!1}function is(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function as(){return("http:"===Zu()||"https:"===Zu()||F()||es())&&!(V()||M())&&rs()&&!is()}function os(){return es()&&"undefined"!==typeof document}function us(){return ss.apply(this,arguments)}function ss(){return(ss=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(os()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cs={LOCAL:"local",NONE:"none",SESSION:"session"},ls=Kt,fs="persistence";function hs(e,t){ls(Object.values(cs).includes(t),e,"invalid-persistence-type"),V()?ls(t!==cs.SESSION,e,"unsupported-persistence-type"):M()?ls(t===cs.NONE,e,"unsupported-persistence-type"):is()?ls(t===cs.NONE||t===cs.LOCAL&&j(),e,"unsupported-persistence-type"):ls(t===cs.NONE||rs(),e,"unsupported-persistence-type")}function ds(e){return ps.apply(this,arguments)}function ps(){return ps=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=vs(),r=Bn(fs,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}function vs(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ys=Kt,ms=function(){function e(){o(this,e),this.browserResolver=Qt(bu),this.cordovaResolver=Qt(Ju),this.underlyingResolver=null,this._redirectPersistence=da,this._completeRedirectFn=Bo}return s(e,[{key:"_initialize",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ce(S().mark((function e(t,n,r,i){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ce(S().mark((function e(t,n,r,i){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return os()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ys(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,us();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gs(e){return e.unwrap()}function ks(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Is(e,function(e,t){var n,r=ee(e),i=t;return Kt(t.customData.operationType,r,"argument-error"),Kt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ra._fromError(r,i)}(e,t));else if(r){var i=ws(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ws(e){var t=(e instanceof B?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof B)&&"temporaryProof"in t&&"phoneNumber"in t)return co.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Et)return null;switch(r){case It:n=Qr;break;case xt:n=Hr;break;case _t:n=$r;break;case St:n=Xr;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Yr._create(r,u):Or._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Wr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof B?n.credentialFromError(e):n.credentialFromResult(e)}function bs(e,t){return t.catch((function(t){throw t instanceof B&&ks(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ws(t)),additionalUserInfo:ta(e),user:Es.getOrCreate(r)}}))}function xs(e,t){return _s.apply(this,arguments)}function _s(){return _s=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return bs(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}var Is=function(){function e(t,n){o(this,e),this.resolver=n,this.auth=t.wrapped()}return s(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return bs(gs(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Es=function(){function e(t){o(this,e),this._delegate=t,this.multiFactor=function(e){var t=ee(e);return ua.has(t)||ua.set(t,oa._fromUser(t)),ua.get(t)}(t)}return s(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs(this.auth,ki(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xs(this.auth,ro(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs(this.auth,xo(this._delegate,t,ms)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ds(rr(this.auth));case 2:return e.abrupt("return",Fo(this._delegate,t,ms));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs(this.auth,bi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return xs(this.auth,function(e,t,n){return ao.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return bs(this.auth,function(e,t,n){return bo.apply(this,arguments)}(this._delegate,e,ms))}},{key:"reauthenticateWithRedirect",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ds(rr(this.auth));case 2:return e.abrupt("return",Lo(this._delegate,t,ms));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return zi.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ui(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Hi(ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Hi(ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return so.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Wi.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Es.USER_MAP=new WeakMap;var Ss=Kt,Ts=function(){function e(t,n){if(o(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ss(r,"invalid-api-key",{appName:t.name}),Ss(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ms:void 0;this._delegate=n.initialize({options:{persistence:Ns(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ot),this.linkUnderlyingAuth()}return s(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Es.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ar(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Di.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ri(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ai.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs(this._delegate,Li(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=zr.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss(as(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Uo(this._delegate,ms);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",bs(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){rr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Cs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Cs(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Fi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ni.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hs(this._delegate,t),e.t0=t,e.next=e.t0===cs.SESSION?4:e.t0===cs.LOCAL?6:e.t0===cs.NONE?11:13;break;case 4:return n=da,e.abrupt("break",14);case 6:return e.next=8,Qt(Ma)._isAvailable();case 8:return r=e.sent,n=r?Ma:fa,e.abrupt("break",14);case 11:return n=jn,e.abrupt("break",14);case 13:return e.abrupt("return",Ut("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return bs(this._delegate,function(e){return ri.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return bs(this._delegate,mi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return bs(this._delegate,function(e,t){return Ei.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return bs(this._delegate,function(e,t,n){return mi(ee(e),qr.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return bs(this._delegate,function(e,t,n){return Vi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return xs(this._delegate,function(e,t,n){return no.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss(as(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",bs(this._delegate,ko(this._delegate,t,ms)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss(as(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ds(this._delegate);case 3:return e.abrupt("return",Po(this._delegate,t,ms));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Oi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Cs(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Es.getOrCreate(e))},error:t,complete:n}}function Ns(e,t){var n=function(e,t){var n=vs();if(!n)return[];var r=Bn(fs,e,t);switch(n.getItem(r)){case cs.NONE:return[jn];case cs.LOCAL:return[Ma,da];case cs.SESSION:return[da];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ma)||n.push(Ma),"undefined"!==typeof window)for(var r=0,i=[fa,da];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(jn)||n.push(jn),n}Ts.Persistence=cs;var As=function(){function e(){o(this,e),this.providerId="phone",this._delegate=new co(gs(mt.auth()))}return s(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return co.credential(e,t)}}]),e}();As.PHONE_SIGN_IN_METHOD=co.PHONE_SIGN_IN_METHOD,As.PROVIDER_ID=co.PROVIDER_ID;var Ds,Rs=Kt,Ps=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt.app();o(this,e),Rs(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Za(t,n,i.auth()),this.type=this._delegate.type}return s(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ds=mt).INTERNAL.registerComponent(new le("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ts(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Tt,PASSWORD_RESET:Ct,RECOVER_EMAIL:Nt,REVERT_SECOND_FACTOR_ADDITION:At,VERIFY_AND_CHANGE_EMAIL:Dt,VERIFY_EMAIL:Rt}},EmailAuthProvider:qr,FacebookAuthProvider:Hr,GithubAuthProvider:$r,GoogleAuthProvider:Qr,OAuthProvider:Wr,SAMLAuthProvider:Jr,PhoneAuthProvider:As,PhoneMultiFactorGenerator:Iu,RecaptchaVerifier:Ps,TwitterAuthProvider:Xr,Auth:Ts,AuthCredential:sr,Error:B}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ds.registerVersion("@firebase/auth-compat","0.2.11");var Os,Ls="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ms={},Fs=Fs||{},Vs=Ls||self;function Us(){}function js(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Bs(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var zs="closure_uid_"+(1e9*Math.random()>>>0),qs=0;function Ks(e,t,n){return e.call.apply(e.bind,arguments)}function Gs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ws(e,t,n){return(Ws=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ks:Gs).apply(null,arguments)}function Hs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Qs(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function $s(){this.s=this.s,this.o=this.o}var Ys={};$s.prototype.s=!1,$s.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,zs)&&e[zs]||(e[zs]=++qs)}(this);delete Ys[e]}},$s.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Js=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Xs=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Zs(e){return Array.prototype.concat.apply([],arguments)}function ec(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function tc(e){return/^[\s\xa0]*$/.test(e)}var nc,rc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ic(e,t){return-1!=e.indexOf(t)}function ac(e,t){return e<t?-1:e>t?1:0}e:{var oc=Vs.navigator;if(oc){var uc=oc.userAgent;if(uc){nc=uc;break e}}nc=""}function sc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function cc(e){var t={};for(var n in e)t[n]=e[n];return t}var lc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<lc.length;a++)n=lc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hc(e){return hc[" "](e),e}hc[" "]=Us;var dc,pc=ic(nc,"Opera"),vc=ic(nc,"Trident")||ic(nc,"MSIE"),yc=ic(nc,"Edge"),mc=yc||vc,gc=ic(nc,"Gecko")&&!(ic(nc.toLowerCase(),"webkit")&&!ic(nc,"Edge"))&&!(ic(nc,"Trident")||ic(nc,"MSIE"))&&!ic(nc,"Edge"),kc=ic(nc.toLowerCase(),"webkit")&&!ic(nc,"Edge");function wc(){var e=Vs.document;return e?e.documentMode:void 0}e:{var bc="",xc=function(){var e=nc;return gc?/rv:([^\);]+)(\)|;)/.exec(e):yc?/Edge\/([\d\.]+)/.exec(e):vc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):kc?/WebKit\/(\S+)/.exec(e):pc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xc&&(bc=xc?xc[1]:""),vc){var _c=wc();if(null!=_c&&_c>parseFloat(bc)){dc=String(_c);break e}}dc=bc}var Ic,Ec={};function Sc(){return function(e){var t=Ec;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=rc(String(dc)).split("."),n=rc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ac(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ac(0==a[2].length,0==o[2].length)||ac(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Vs.document&&vc){var Tc=wc();Ic=Tc||(parseInt(dc,10)||void 0)}else Ic=void 0;var Cc=Ic,Nc=function(){if(!Vs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Vs.addEventListener("test",Us,t),Vs.removeEventListener("test",Us,t)}catch(n){}return e}();function Ac(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Dc(e,t){if(Ac.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gc){e:{try{hc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Rc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Dc.Z.h.call(this)}}Ac.prototype.h=function(){this.defaultPrevented=!0},Qs(Dc,Ac);var Rc={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Pc="closure_listenable_"+(1e6*Math.random()|0),Oc=0;function Lc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Oc,this.ca=this.fa=!1}function Mc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Fc(e){this.src=e,this.g={},this.h=0}function Vc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Js(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Mc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Uc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Fc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Uc(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Lc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var jc="closure_lm_"+(1e6*Math.random()|0),Bc={};function zc(e,t,n,r,i){if(r&&r.once)return Kc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)zc(e,t[a],n,r,i);return null}return n=Jc(n),e&&e[Pc]?e.N(t,n,Bs(r)?!!r.capture:!!r,i):qc(e,t,n,!1,r,i)}function qc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Bs(i)?!!i.capture:!!i,u=$c(e);if(u||(e[jc]=u=new Fc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Qc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Nc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Hc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Kc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Kc(e,t[a],n,r,i);return null}return n=Jc(n),e&&e[Pc]?e.O(t,n,Bs(r)?!!r.capture:!!r,i):qc(e,t,n,!0,r,i)}function Gc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Gc(e,t[a],n,r,i);else r=Bs(r)?!!r.capture:!!r,n=Jc(n),e&&e[Pc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Uc(a=e.g[t],n,r,i))&&(Mc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=$c(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Uc(t,n,r,i)),(n=-1<e?t[e]:null)&&Wc(n))}function Wc(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Pc])Vc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Hc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$c(t))?(Vc(n,e),0==n.h&&(n.src=null,t[jc]=null)):Mc(e)}}}function Hc(e){return e in Bc?Bc[e]:Bc[e]="on"+e}function Qc(e,t){if(e.ca)e=!0;else{t=new Dc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Wc(e),e=n.call(r,t)}return e}function $c(e){return(e=e[jc])instanceof Fc?e:null}var Yc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jc(e){return"function"===typeof e?e:(e[Yc]||(e[Yc]=function(t){return e.handleEvent(t)}),e[Yc])}function Xc(){$s.call(this),this.i=new Fc(this),this.P=this,this.I=null}function Zc(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ac(t,e);else if(t instanceof Ac)t.target=t.target||e;else{var i=t;fc(t=new Ac(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=el(o,r,!0,t)&&i}if(i=el(o=t.g=e,r,!0,t)&&i,i=el(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=el(o=t.g=n[a],r,!1,t)&&i}function el(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Vc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Qs(Xc,$s),Xc.prototype[Pc]=!0,Xc.prototype.removeEventListener=function(e,t,n,r){Gc(this,e,t,n,r)},Xc.prototype.M=function(){if(Xc.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mc(n[r]);delete t.g[e],t.h--}}this.I=null},Xc.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var tl=Vs.JSON.stringify;function nl(){var e=ll,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var rl,il=function(){function e(){o(this,e),this.h=this.g=null}return s(e,[{key:"add",value:function(e,t){var n=al.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),al=new(function(){function e(t,n){o(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return s(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ol}),(function(e){return e.reset()})),ol=function(){function e(){o(this,e),this.next=this.g=this.h=null}return s(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ul(e){Vs.setTimeout((function(){throw e}),0)}function sl(e,t){rl||function(){var e=Vs.Promise.resolve(void 0);rl=function(){e.then(fl)}}(),cl||(rl(),cl=!0),ll.add(e,t)}var cl=!1,ll=new il;function fl(){for(var e;e=nl();){try{e.h.call(e.g)}catch(n){ul(n)}var t=al;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}cl=!1}function hl(e,t){Xc.call(this),this.h=e||1,this.g=t||Vs,this.j=Ws(this.kb,this),this.l=Date.now()}function dl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function pl(e,t,n){if("function"===typeof e)n&&(e=Ws(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ws(e.handleEvent,e)}return 2147483647<Number(t)?-1:Vs.setTimeout(e,t||0)}function vl(e){e.g=pl((function(){e.g=null,e.i&&(e.i=!1,vl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Qs(hl,Xc),(Os=hl.prototype).da=!1,Os.S=null,Os.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zc(this,"tick"),this.da&&(dl(this),this.start()))}},Os.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Os.M=function(){hl.Z.M.call(this),dl(this),delete this.g};var yl=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return s(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vl(this)}},{key:"M",value:function(){kt(g(n.prototype),"M",this).call(this),this.g&&(Vs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}($s);function ml(e){$s.call(this),this.h=e,this.g={}}Qs(ml,$s);var gl=[];function kl(e,t,n,r){Array.isArray(n)||(n&&(gl[0]=n.toString()),n=gl);for(var i=0;i<n.length;i++){var a=zc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wl(e){sc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Wc(e)}),e),e.g={}}function bl(){this.g=!0}function xl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return tl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ml.prototype.M=function(){ml.Z.M.call(this),wl(this)},ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bl.prototype.Aa=function(){this.g=!1},bl.prototype.info=function(){};var _l={},Il=null;function El(){return Il=Il||new Xc}function Sl(e){Ac.call(this,_l.Ma,e)}function Tl(e){var t=El();Zc(t,new Sl(t,e))}function Cl(e,t){Ac.call(this,_l.STAT_EVENT,e),this.stat=t}function Nl(e){var t=El();Zc(t,new Cl(t,e))}function Al(e,t){Ac.call(this,_l.Na,e),this.size=t}function Dl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Vs.setTimeout((function(){e()}),t)}_l.Ma="serverreachability",Qs(Sl,Ac),_l.STAT_EVENT="statevent",Qs(Cl,Ac),_l.Na="timingevent",Qs(Al,Ac);var Rl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ol(){}function Ll(e){return e.h||(e.h=e.i())}function Ml(){}Ol.prototype.h=null;var Fl,Vl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ul(){Ac.call(this,"d")}function jl(){Ac.call(this,"c")}function Bl(){}function zl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ml(this),this.P=Kl,e=mc?125:void 0,this.W=new hl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ql}function ql(){this.i=null,this.g="",this.h=!1}Qs(Ul,Ac),Qs(jl,Ac),Qs(Bl,Ol),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},Fl=new Bl;var Kl=45e3,Gl={},Wl={};function Hl(e,t,n){e.K=1,e.v=mf(ff(t)),e.s=n,e.U=!0,Ql(e,null)}function Ql(e,t){e.F=Date.now(),Xl(e),e.A=ff(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Af(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ql,e.g=Rh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new yl(Ws(e.Ia,e,e.g),e.O)),kl(e.V,e.g,"readystatechange",e.gb),t=e.H?cc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Tl(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function $l(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Yl(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Jl(e,n))==Wl){4==t&&(e.o=4,Nl(14),i=!1),xl(e.j,e.m,null,"[Incomplete Response]");break}if(r==Gl){e.o=4,Nl(15),xl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xl(e.j,e.m,r,null),rf(e,r)}$l(e)&&r!=Wl&&r!=Gl&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ih(t),t.L=!0,Nl(11))):(xl(e.j,e.m,n,"[Invalid Chunked Response]"),nf(e),tf(e))}function Jl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Wl:(n=Number(t.substring(n,r)),isNaN(n)?Gl:(r+=1)+n>t.length?Wl:(t=t.substr(r,n),e.C=r+n,t))}function Xl(e){e.Y=Date.now()+e.P,Zl(e,e.P)}function Zl(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Dl(Ws(e.eb,e),t)}function ef(e){e.B&&(Vs.clearTimeout(e.B),e.B=null)}function tf(e){0==e.l.G||e.I||Th(e.l,e)}function nf(e){ef(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,dl(e.W),wl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function rf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Vf(n.i,e)))if(n.I=e.N,!e.J&&Vf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Sh(n),vh(n)}_h(n),Nl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Dl(Ws(n.ab,n),6e3));if(1>=Ff(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Nh(n,11)}else if((e.J||n.g==e)&&Sh(n),!tc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ic(l,"spdy")||ic(l,"quic")||ic(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Uf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,yf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Dh(r,r.H?r.la:null,r.W),d.J){jf(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ef(p),Xl(p)),r.g=d}else xh(r);0<n.l.length&&gh(n)}else"stop"!=a[0]&&"close"!=a[0]||Nh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Nh(n,7):ph(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Tl(4)}catch(a){}}function af(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(js(e)||"string"===typeof e)Xs(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(js(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(js(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function of(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof of)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function uf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];sf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)sf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function sf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Os=zl.prototype).setTimeout=function(e){this.P=e},Os.gb=function(e){e=e.target;var t=this.L;t&&3==ch(e)?t.l():this.Ia(e)},Os.Ia=function(e){try{if(e==this.g)e:{var t=ch(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||mc||this.g&&(this.h.h||this.g.ga()||lh(this.g)))){this.I||4!=t||7==n||Tl(8==n||0>=r?3:2),ef(this);var i=this.g.ba();this.N=i;t:if($l(this)){var a=lh(this.g);e="";var o=a.length,u=4==ch(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){nf(this),tf(this);var s="";break t}this.h.i=new Vs.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Nl(12),nf(this),tf(this);break e}xl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rf(this,i)}this.U?(Yl(this,t,s),mc&&this.i&&3==t&&(kl(this.V,this.W,"tick",this.fb),this.W.start())):(xl(this.j,this.m,s,null),rf(this,s)),4==t&&nf(this),this.i&&!this.I&&(4==t?Th(this.l,this):(this.i=!1,Xl(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Nl(12)):(this.o=0,Nl(13)),nf(this),tf(this)}}}catch(t){}},Os.fb=function(){if(this.g){var e=ch(this.g),t=this.g.ga();this.C<t.length&&(ef(this),Yl(this,e,t),this.i&&4!=e&&Xl(this))}},Os.cancel=function(){this.I=!0,nf(this)},Os.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Tl(3),Nl(17)),nf(this),this.o=2,tf(this)):Zl(this,this.Y-e)},(Os=of.prototype).R=function(){uf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Os.T=function(){return uf(this),this.g.concat()},Os.get=function(e,t){return sf(this.h,e)?this.h[e]:t},Os.set=function(e,t){sf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Os.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var cf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof lf){this.g=void 0!==t?t:e.g,hf(this,e.j),this.s=e.s,df(this,e.i),pf(this,e.m),this.l=e.l,t=e.h;var n=new Sf;n.i=t.i,t.g&&(n.g=new of(t.g),n.h=t.h),vf(this,n),this.o=e.o}else e&&(n=String(e).match(cf))?(this.g=!!t,hf(this,n[1]||"",!0),this.s=gf(n[2]||""),df(this,n[3]||"",!0),pf(this,n[4]),this.l=gf(n[5]||"",!0),vf(this,n[6]||"",!0),this.o=gf(n[7]||"")):(this.g=!!t,this.h=new Sf(null,this.g))}function ff(e){return new lf(e)}function hf(e,t,n){e.j=n?gf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function df(e,t,n){e.i=n?gf(t,!0):t}function pf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vf(e,t,n){t instanceof Sf?(e.h=t,function(e,t){t&&!e.j&&(Tf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cf(this,t),Af(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=kf(t,If)),e.h=new Sf(t,e.g))}function yf(e,t,n){e.h.set(t,n)}function mf(e){return yf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function gf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}lf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kf(t,bf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(kf(t,bf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(kf(n,"/"==n.charAt(0)?_f:xf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kf(n,Ef)),e.join("")};var bf=/[#\/\?@]/g,xf=/[#\?:]/g,_f=/[#\?]/g,If=/[#\?@]/g,Ef=/#/g;function Sf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Tf(e){e.g||(e.g=new of,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cf(e,t){Tf(e),t=Df(e,t),sf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,sf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&uf(e)))}function Nf(e,t){return Tf(e),t=Df(e,t),sf(e.g.h,t)}function Af(e,t,n){Cf(e,t),0<n.length&&(e.i=null,e.g.set(Df(e,t),ec(n)),e.h+=n.length)}function Df(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Os=Sf.prototype).add=function(e,t){Tf(this),this.i=null,e=Df(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Os.forEach=function(e,t){Tf(this),this.g.forEach((function(n,r){Xs(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Os.T=function(){Tf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Os.R=function(e){Tf(this);var t=[];if("string"===typeof e)Nf(this,e)&&(t=Zs(t,this.g.get(Df(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Zs(t,e[n])}return t},Os.set=function(e,t){return Tf(this),this.i=null,Nf(this,e=Df(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Os.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Os.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Rf=s((function e(t,n){o(this,e),this.h=t,this.g=n}));function Pf(e){this.l=e||Lf,Vs.PerformanceNavigationTiming?e=0<(e=Vs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Vs.g&&Vs.g.Ea&&Vs.g.Ea()&&Vs.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Of,Lf=10;function Mf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ff(e){return e.h?1:e.g?e.g.size:0}function Vf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Uf(e,t){e.g?e.g.add(t):e.h=t}function jf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Bf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=f(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ec(e.i)}function zf(){}function qf(){this.g=new zf}function Kf(e,t,n){var r=n||"";try{af(e,(function(e,n){var i=e;Bs(e)&&(i=tl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Gf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Wf(e){this.l=e.$b||null,this.j=e.ib||!1}function Hf(e,t){Xc.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Qf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pf.prototype.cancel=function(){if(this.i=Bf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=f(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},zf.prototype.stringify=function(e){return Vs.JSON.stringify(e,void 0)},zf.prototype.parse=function(e){return Vs.JSON.parse(e,void 0)},Qs(Wf,Ol),Wf.prototype.g=function(){return new Hf(this.l,this.j)},Wf.prototype.i=(Of={},function(){return Of}),Qs(Hf,Xc);var Qf=0;function $f(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Yf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Jf(e)}function Jf(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Os=Hf.prototype).open=function(e,t){if(this.readyState!=Qf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Jf(this)},Os.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Vs).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Os.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yf(this)),this.readyState=Qf},Os.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Jf(this)),this.g&&(this.readyState=3,Jf(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Vs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$f(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Os.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yf(this):Jf(this),3==this.readyState&&$f(this)}},Os.Ua=function(e){this.g&&(this.response=this.responseText=e,Yf(this))},Os.Ta=function(e){this.g&&(this.response=e,Yf(this))},Os.ha=function(){this.g&&Yf(this)},Os.setRequestHeader=function(e,t){this.v.append(e,t)},Os.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Os.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Hf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xf=Vs.JSON.parse;function Zf(e){Xc.call(this),this.headers=new of,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eh,this.K=this.L=!1}Qs(Zf,Xc);var eh="",th=/^https?$/i,nh=["POST","PUT"];function rh(e){return"content-type"==e.toLowerCase()}function ih(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ah(e),uh(e)}function ah(e){e.D||(e.D=!0,Zc(e,"complete"),Zc(e,"error"))}function oh(e){if(e.h&&"undefined"!=typeof Fs&&(!e.C[1]||4!=ch(e)||2!=e.ba()))if(e.v&&4==ch(e))pl(e.Fa,0,e);else if(Zc(e,"readystatechange"),4==ch(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(cf)[1]||null;if(!a&&Vs.self&&Vs.self.location){var o=Vs.self.location.protocol;a=o.substr(0,o.length-1)}i=!th.test(a?a.toLowerCase():"")}t=i}if(t)Zc(e,"complete"),Zc(e,"success");else{e.m=6;try{var u=2<ch(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",ah(e)}}finally{uh(e)}}}function uh(e,t){if(e.g){sh(e);var n=e.g,r=e.C[0]?Us:null;e.g=null,e.C=null,t||Zc(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function sh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Vs.clearTimeout(e.A),e.A=null)}function ch(e){return e.g?e.g.readyState:0}function lh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case eh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function fh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return sc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yf(e,t,n))}function hh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function dh(e){this.za=0,this.l=[],this.h=new bl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=hh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=hh("baseRetryDelayMs",5e3,e),this.$a=hh("retryDelaySeedMs",1e4,e),this.Ya=hh("forwardChannelMaxRetries",2,e),this.ra=hh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Pf(e&&e.concurrentRequestLimit),this.Ca=new qf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ph(e){if(yh(e),3==e.G){var t=e.V++,n=ff(e.F);yf(n,"SID",e.J),yf(n,"RID",t),yf(n,"TYPE","terminate"),wh(e,n),(t=new zl(e,e.h,t,void 0)).K=2,t.v=mf(ff(n)),n=!1,Vs.navigator&&Vs.navigator.sendBeacon&&(n=Vs.navigator.sendBeacon(t.v.toString(),"")),!n&&Vs.Image&&((new Image).src=t.v,n=!0),n||(t.g=Rh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Xl(t)}Ah(e)}function vh(e){e.g&&(Ih(e),e.g.cancel(),e.g=null)}function yh(e){vh(e),e.u&&(Vs.clearTimeout(e.u),e.u=null),Sh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Vs.clearTimeout(e.m),e.m=null)}function mh(e,t){e.l.push(new Rf(e.Za++,t)),3==e.G&&gh(e)}function gh(e){Mf(e.i)||e.m||(e.m=!0,sl(e.Ha,e),e.C=0)}function kh(e,t){var n;n=t?t.m:e.V++;var r=ff(e.F);yf(r,"SID",e.J),yf(r,"RID",n),yf(r,"AID",e.U),wh(e,r),e.o&&e.s&&fh(r,e.o,e.s),n=new zl(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=bh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Uf(e.i,n),Hl(n,r,t)}function wh(e,t){e.j&&af({},(function(e,n){yf(t,n,e)}))}function bh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ws(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Kf(l,o,"req"+c+"_")}catch(ad){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function xh(e){e.g||e.u||(e.Y=1,sl(e.Ga,e),e.A=0)}function _h(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Dl(Ws(e.Ga,e),Ch(e,e.A)),e.A++,!0)}function Ih(e){null!=e.B&&(Vs.clearTimeout(e.B),e.B=null)}function Eh(e){e.g=new zl(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ff(e.oa);yf(t,"RID","rpc"),yf(t,"SID",e.J),yf(t,"CI",e.N?"0":"1"),yf(t,"AID",e.U),wh(e,t),yf(t,"TYPE","xmlhttp"),e.o&&e.s&&fh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=mf(ff(t)),n.s=null,n.U=!0,Ql(n,e)}function Sh(e){null!=e.v&&(Vs.clearTimeout(e.v),e.v=null)}function Th(e,t){var n=null;if(e.g==t){Sh(e),Ih(e),e.g=null;var r=2}else{if(!Vf(e.i,t))return;n=t.D,jf(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Zc(r=El(),new Al(r,n,t,i)),gh(e)}else xh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ff(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Dl(Ws(e.Ha,e,t),Ch(e,e.C)),e.C++,!0))}(e,t)||2==r&&_h(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Nh(e,5);break;case 4:Nh(e,10);break;case 3:Nh(e,6);break;default:Nh(e,2)}}function Ch(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Nh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ws(e.jb,e);n||(n=new lf("//www.google.com/images/cleardot.gif"),Vs.location&&"http"==Vs.location.protocol||hf(n,"https"),mf(n)),function(e,t){var n=new bl;if(Vs.Image){var r=new Image;r.onload=Hs(Gf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Hs(Gf,n,r,"TestLoadImage: error",!1,t),r.onabort=Hs(Gf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Hs(Gf,n,r,"TestLoadImage: timeout",!1,t),Vs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nl(2);e.G=0,e.j&&e.j.va(t),Ah(e),yh(e)}function Ah(e){e.G=0,e.I=-1,e.j&&(0==Bf(e.i).length&&0==e.l.length||(e.i.i.length=0,ec(e.l),e.l.length=0),e.j.ua())}function Dh(e,t,n){var r=function(e){return e instanceof lf?ff(e):new lf(e,void 0)}(n);if(""!=r.i)t&&df(r,t+"."+r.i),pf(r,r.m);else{var i=Vs.location;r=function(e,t,n,r){var i=new lf(null,void 0);return e&&hf(i,e),t&&df(i,t),n&&pf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&sc(e.aa,(function(e,t){yf(r,t,e)})),t=e.D,n=e.sa,t&&n&&yf(r,t,n),yf(r,"VER",e.ma),wh(e,r),r}function Rh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Zf(new Wf({ib:!0})):new Zf(e.qa)).L=e.H,t}function Ph(){}function Oh(){if(vc&&!(10<=Number(Cc)))throw Error("Environmental error: no available transport.")}function Lh(e,t){Xc.call(this),this.g=new dh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!tc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!tc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Vh(this)}function Mh(e){Ul.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Fh(){jl.call(this),this.status=1}function Vh(e){this.g=e}(Os=Zf.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fl.g(),this.C=this.u?Ll(this.u):Ll(Fl),this.g.onreadystatechange=Ws(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ih(this,a)}e=n||"";var i=new of(this.headers);r&&af(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=rh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Vs.FormData&&e instanceof Vs.FormData,!(0<=Js(nh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sh(this),0<this.B&&((this.K=function(e){return vc&&Sc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ws(this.pa,this)):this.A=pl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ih(this,a)}},Os.pa=function(){"undefined"!=typeof Fs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zc(this,"timeout"),this.abort(8))},Os.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zc(this,"complete"),Zc(this,"abort"),uh(this))},Os.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uh(this,!0)),Zf.Z.M.call(this)},Os.Fa=function(){this.s||(this.F||this.v||this.l?oh(this):this.cb())},Os.cb=function(){oh(this)},Os.ba=function(){try{return 2<ch(this)?this.g.status:-1}catch(Of){return-1}},Os.ga=function(){try{return this.g?this.g.responseText:""}catch(Of){return""}},Os.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xf(t)}},Os.Da=function(){return this.m},Os.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Os=dh.prototype).ma=8,Os.G=1,Os.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Os.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new zl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?fc(n=cc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=bh(this,t,r),yf(i=ff(this.F),"RID",e),yf(i,"CVER",22),this.D&&yf(i,"X-HTTP-Session-Id",this.D),wh(this,i),this.o&&n&&fh(i,this.o,n),Uf(this.i,t),this.Ra&&yf(i,"TYPE","init"),this.ja?(yf(i,"$req",r),yf(i,"SID","null"),t.$=!0,Hl(t,i,null)):Hl(t,i,r),this.G=2}}else 3==this.G&&(e?kh(this,e):0==this.l.length||Mf(this.i)||kh(this))},Os.Ga=function(){if(this.u=null,Eh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Dl(Ws(this.bb,this),e)}},Os.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Nl(10),vh(this),Eh(this))},Os.ab=function(){null!=this.v&&(this.v=null,vh(this),_h(this),Nl(19))},Os.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Nl(2)):(this.h.info("Failed to ping google.com"),Nl(1))},(Os=Ph.prototype).xa=function(){},Os.wa=function(){},Os.va=function(){},Os.ua=function(){},Os.Oa=function(){},Oh.prototype.g=function(e,t){return new Lh(e,t)},Qs(Lh,Xc),Lh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),sl(Ws(e.hb,e,t))),Nl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Dh(e,null,e.W),gh(e)},Lh.prototype.close=function(){ph(this.g)},Lh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,mh(this.g,t)}else this.v?((t={}).__data__=tl(e),mh(this.g,t)):mh(this.g,e)},Lh.prototype.M=function(){this.g.j=null,delete this.j,ph(this.g),delete this.g,Lh.Z.M.call(this)},Qs(Mh,Ul),Qs(Fh,jl),Qs(Vh,Ph),Vh.prototype.xa=function(){Zc(this.g,"a")},Vh.prototype.wa=function(e){Zc(this.g,new Mh(e))},Vh.prototype.va=function(e){Zc(this.g,new Fh(e))},Vh.prototype.ua=function(){Zc(this.g,"b")},Oh.prototype.createWebChannel=Oh.prototype.g,Lh.prototype.send=Lh.prototype.u,Lh.prototype.open=Lh.prototype.m,Lh.prototype.close=Lh.prototype.close,Rl.NO_ERROR=0,Rl.TIMEOUT=8,Rl.HTTP_ERROR=6,Pl.COMPLETE="complete",Ml.EventType=Vl,Vl.OPEN="a",Vl.CLOSE="b",Vl.ERROR="c",Vl.MESSAGE="d",Xc.prototype.listen=Xc.prototype.N,Zf.prototype.listenOnce=Zf.prototype.O,Zf.prototype.getLastError=Zf.prototype.La,Zf.prototype.getLastErrorCode=Zf.prototype.Da,Zf.prototype.getStatus=Zf.prototype.ba,Zf.prototype.getResponseJson=Zf.prototype.Qa,Zf.prototype.getResponseText=Zf.prototype.ga,Zf.prototype.send=Zf.prototype.ea;var Uh=Ms.createWebChannelTransport=function(){return new Oh},jh=Ms.getStatEventTarget=function(){return El()},Bh=Ms.ErrorCode=Rl,zh=Ms.EventType=Pl,qh=Ms.Event=_l,Kh=Ms.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gh=Ms.FetchXmlHttpFactory=Wf,Wh=Ms.WebChannel=Ml,Hh=Ms.XhrIo=Zf,Qh="@firebase/firestore",$h=function(){function e(t){o(this,e),this.uid=t}return s(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$h.UNAUTHENTICATED=new $h(null),$h.GOOGLE_CREDENTIALS=new $h("google-credentials-uid"),$h.FIRST_PARTY=new $h("first-party-uid"),$h.MOCK_USER=new $h("mock-user");var Yh="9.6.10",Jh=new _e("@firebase/firestore");function Xh(){return Jh.logLevel}function Zh(e){if(Jh.logLevel<=pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nd);Jh.debug.apply(Jh,["Firestore (".concat(Yh,"): ").concat(e)].concat(ue(i)))}}function ed(e){if(Jh.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nd);Jh.error.apply(Jh,["Firestore (".concat(Yh,"): ").concat(e)].concat(ue(i)))}}function td(e){if(Jh.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nd);Jh.warn.apply(Jh,["Firestore (".concat(Yh,"): ").concat(e)].concat(ue(i)))}}function nd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function rd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Yh,") INTERNAL ASSERTION FAILED: ")+e;throw ed(t),new Error(t)}function id(e,t){e||rd()}function ad(e,t){return e}var od={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ud=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return s(n)}(B),sd=s((function e(){var t=this;o(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),cd=s((function e(t,n){o(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ld=function(){function e(){o(this,e)}return s(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($h.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fd=function(){function e(t){o(this,e),this.token=t,this.changeListener=null}return s(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),hd=function(){function e(t){o(this,e),this.t=t,this.currentUser=$h.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return s(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new sd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new sd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Zh("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Zh("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new sd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Zh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(id("string"==typeof n.accessToken),new cd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return id(null===e||"string"==typeof e),new $h(e)}}]),e}(),dd=s((function e(t,n,r){o(this,e),this.type="FirstParty",this.user=$h.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),pd=function(){function e(t,n,r){o(this,e),this.h=t,this.l=n,this.m=r}return s(e,[{key:"getToken",value:function(){return Promise.resolve(new dd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($h.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),vd=s((function e(t){o(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),yd=function(){function e(t){o(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return s(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Zh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Zh("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Zh("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Zh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(id("string"==typeof t.token),e.p=t.token,new vd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),md=function(){function e(t,n){var r=this;o(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return s(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function gd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}md.A=-1;var kd=function(){function e(){o(this,e)}return s(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=gd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function wd(e,t){return e<t?-1:e>t?1:0}function bd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function xd(e){return e+"\0"}var _d=function(){function e(t,n){if(o(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ud(od.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ud(od.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ud(od.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ud(od.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return s(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?wd(this.nanoseconds,e.nanoseconds):wd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Id=function(){function e(t){o(this,e),this.timestamp=t}return s(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new _d(0,0))}},{key:"max",value:function(){return new e(new _d(253402300799,999999999))}}]),e}();function Ed(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Td(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Cd=function(){function e(t,n,r){o(this,e),void 0===n?n=0:n>t.length&&rd(),void 0===r?r=t.length-n:r>t.length-n&&rd(),this.segments=t,this.offset=n,this.len=r}return s(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Nd=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ud(od.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ue(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cd),Ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dd=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ad.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ud(od.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ud(od.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ud(od.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ud(od.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Cd),Rd=function(){function e(t){o(this,e),this.fields=t,t.sort(Dd.comparator)}return s(e,[{key:"covers",value:function(e){var t,n=f(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return bd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Pd=function(e){function t(e){o(this,t),this.binaryString=e}return s(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return wd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Pd.EMPTY_BYTE_STRING=new Pd("");var Od=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ld(e){if(id(!!e),"string"==typeof e){var t=0,n=Od.exec(e);if(id(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Md(e.seconds),nanos:Md(e.nanos)}}function Md(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fd(e){return"string"==typeof e?Pd.fromBase64String(e):Pd.fromUint8Array(e)}function Vd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ud(e){var t=e.mapValue.fields.__previous_value__;return Vd(t)?Ud(t):t}function jd(e){var t=Ld(e.mapValue.fields.__local_write_time__.timestampValue);return new _d(t.seconds,t.nanos)}var Bd=s((function e(t,n,r,i,a,u,s,c){o(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),zd=function(){function e(t,n){o(this,e),this.projectId=t,this.database=n||"(default)"}return s(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function qd(e){return null==e}function Kd(e){return 0===e&&1/e==-1/0}function Gd(e){return"number"==typeof e&&Number.isInteger(e)&&!Kd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Wd=function(){function e(t){o(this,e),this.path=t}return s(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Nd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Nd.fromString(t))}},{key:"fromName",value:function(t){return new e(Nd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Nd.emptyPath())}},{key:"comparator",value:function(e,t){return Nd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Nd(t.slice()))}}]),e}(),Hd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qd={nullValue:"NULL_VALUE"};function $d(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vd(e)?4:cp(e)?9:10:rd()}function Yd(e,t){if(e===t)return!0;var n=$d(e);if(n!==$d(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jd(e).isEqual(jd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ld(e.timestampValue),r=Ld(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fd(e.bytesValue).isEqual(Fd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Md(e.geoPointValue.latitude)===Md(t.geoPointValue.latitude)&&Md(e.geoPointValue.longitude)===Md(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Md(e.integerValue)===Md(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Md(e.doubleValue),r=Md(t.doubleValue);return n===r?Kd(n)===Kd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return bd(e.arrayValue.values||[],t.arrayValue.values||[],Yd);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ed(n)!==Ed(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yd(n[i],r[i])))return!1;return!0}(e,t);default:return rd()}}function Jd(e,t){return void 0!==(e.values||[]).find((function(e){return Yd(e,t)}))}function Xd(e,t){if(e===t)return 0;var n=$d(e),r=$d(t);if(n!==r)return wd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Md(e.integerValue||e.doubleValue),r=Md(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zd(e.timestampValue,t.timestampValue);case 4:return Zd(jd(e),jd(t));case 5:return wd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Fd(e),r=Fd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=wd(n[i],r[i]);if(0!==a)return a}return wd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=wd(Md(e.latitude),Md(t.latitude));return 0!==n?n:wd(Md(e.longitude),Md(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xd(n[i],r[i]);if(a)return a}return wd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=wd(r[o],a[o]);if(0!==u)return u;var s=Xd(n[r[o]],i[a[o]]);if(0!==s)return s}return wd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw rd()}}function Zd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wd(e,t);var n=Ld(e),r=Ld(t),i=wd(n.seconds,r.seconds);return 0!==i?i:wd(n.nanos,r.nanos)}function ep(e){return tp(e)}function tp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ld(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Fd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=f(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=tp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=f(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(tp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):rd();var t,n}function np(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function rp(e){return!!e&&"integerValue"in e}function ip(e){return!!e&&"arrayValue"in e}function ap(e){return!!e&&"nullValue"in e}function op(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function up(e){return!!e&&"mapValue"in e}function sp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Sd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=sp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=sp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function cp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function lp(e,t){return void 0===e?t:void 0===t||Xd(e,t)>0?e:t}function fp(e,t){return void 0===e?t:void 0===t||Xd(e,t)<0?e:t}var hp=function(){function e(t){o(this,e),this.value=t}return s(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!up(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sp(t)}},{key:"setAll",value:function(e){var t=this,n=Dd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=sp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());up(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yd(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];up(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Sd(t,(function(t,n){return e[t]=n}));var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(sp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function dp(e){var t=[];return Sd(e.fields,(function(e,n){var r=new Dd([e]);if(up(n)){var i=dp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Rd(t)}var pp=function(){function e(t,n,r,i,a,u){o(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=u}return s(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=hp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=hp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Id.min(),Id.min(),hp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Id.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Id.min(),hp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Id.min(),hp.empty(),2)}}]),e}(),vp=s((function e(t,n,r,i){o(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function yp(e){return e.fields.find((function(e){return 2===e.kind}))}function mp(e){return e.fields.filter((function(e){return 2!==e.kind}))}vp.UNKNOWN_ID=-1;var gp=s((function e(t,n){o(this,e),this.fieldPath=t,this.kind=n})),kp=function(){function e(t,n){o(this,e),this.sequenceNumber=t,this.offset=n}return s(e,null,[{key:"empty",value:function(){return new e(0,xp.min())}}]),e}();function wp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Id.fromTimestamp(1e9===r?new _d(n+1,0):new _d(n,r));return new xp(i,Wd.empty(),t)}function bp(e){return new xp(e.readTime,e.key,-1)}var xp=function(){function e(t,n,r){o(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return s(e,null,[{key:"min",value:function(){return new e(Id.min(),Wd.empty(),-1)}},{key:"max",value:function(){return new e(Id.max(),Wd.empty(),-1)}}]),e}();function _p(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Wd.comparator(e.documentKey,t.documentKey))?n:wd(e.largestBatchId,t.largestBatchId)}var Ip=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;o(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=s,this.P=null}));function Ep(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ip(e,t,n,r,i,a,o)}function Sp(e){var t=ad(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ep(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ep(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ep(e)})).join(",")),t.P=n}return t.P}function Tp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Bp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Yd(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qp(e.startAt,t.startAt)&&qp(e.endAt,t.endAt)}function Cp(e){return Wd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Np(e,t){return e.filters.filter((function(e){return e instanceof Ap&&e.field.isEqual(t)}))}var Ap=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xd(t,this.value)):null!==t&&$d(this.value)===$d(t)&&this.v(Xd(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Dp(e,t,r):"array-contains"===t?new Lp(e,r):"in"===t?new Mp(e,r):"not-in"===t?new Fp(e,r):"array-contains-any"===t?new Vp(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Rp(e,n):new Pp(e,n)}}]),n}(function(){return s((function e(){o(this,e)}))}()),Dp=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,e,r,i)).key=Wd.fromName(i.referenceValue),a}return s(n,[{key:"matches",value:function(e){var t=Wd.comparator(e.key,this.key);return this.v(t)}}]),n}(Ap),Rp=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,"in",r)).keys=Op("in",r),i}return s(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ap),Pp=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,"not-in",r)).keys=Op("not-in",r),i}return s(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ap);function Op(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wd.fromName(e.referenceValue)}))}var Lp=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"array-contains",r)}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ip(t)&&Jd(t.arrayValue,this.value)}}]),n}(Ap),Mp=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"in",r)}return s(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Jd(this.value.arrayValue,t)}}]),n}(Ap),Fp=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"not-in",r)}return s(n,[{key:"matches",value:function(e){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Jd(this.value.arrayValue,t)}}]),n}(Ap),Vp=function(e){m(n,e);var t=x(n);function n(e,r){return o(this,n),t.call(this,e,"array-contains-any",r)}return s(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Jd(t.value.arrayValue,e)}))}}]),n}(Ap),Up=s((function e(t,n){o(this,e),this.position=t,this.inclusive=n})),jp=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";o(this,e),this.field=t,this.dir=n}));function Bp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function zp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Wd.comparator(Wd.fromName(o.referenceValue),n.key):Xd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yd(e.position[n],t.position[n]))return!1;return!0}var Kp=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;o(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=s,this.endAt=c,this.D=null,this.C=null,this.startAt,this.endAt}));function Gp(e,t,n,r,i,a,o,u){return new Kp(e,t,n,r,i,a,o,u)}function Wp(e){return new Kp(e)}function Hp(e){return!qd(e.limit)&&"F"===e.limitType}function Qp(e){return!qd(e.limit)&&"L"===e.limitType}function $p(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yp(e){var t,n=f(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Jp(e){return null!==e.collectionGroup}function Xp(e){var t=ad(e);if(null===t.D){t.D=[];var n=Yp(t),r=$p(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new jp(n)),t.D.push(new jp(Dd.keyField(),"asc"));else{var i,a=!1,o=f(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new jp(Dd.keyField(),s))}}}return t.D}function Zp(e){var t=ad(e);if(!t.C)if("F"===t.limitType)t.C=Ep(t.path,t.collectionGroup,Xp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=f(Xp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new jp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Up(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Up(t.startAt.position,!t.startAt.inclusive):null;t.C=Ep(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function ev(e,t,n){return new Kp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tv(e,t){return Tp(Zp(e),Zp(t))&&e.limitType===t.limitType}function nv(e){return"".concat(Sp(Zp(e)),"|lt:").concat(e.limitType)}function rv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ep(t.value));var t})).join(", "),"]")),qd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ep(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ep(e)})).join(",")),"Target(".concat(t,")")}(Zp(e)),"; limitType=").concat(e.limitType,")")}function iv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=f(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=f(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Xp(e),t))&&!(e.endAt&&!function(e,t,n){var r=zp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Xp(e),t))}(e,t)}function av(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ov(e){return function(t,n){var r,i=!1,a=f(Xp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=uv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function uv(e,t,n){var r=e.field.isKeyField()?Wd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xd(r,i):rd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rd()}}function sv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(t)?"-0":t}}function cv(e){return{integerValue:""+e}}function lv(e,t){return Gd(t)?cv(t):sv(e,t)}var fv=s((function e(){o(this,e),this._=void 0}));function hv(e,t,n){return e instanceof vv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yv?mv(e,t):e instanceof gv?kv(e,t):function(e,t){var n=pv(e,t),r=bv(n)+bv(e.k);return rp(n)&&rp(e.k)?cv(r):sv(e.M,r)}(e,t)}function dv(e,t,n){return e instanceof yv?mv(e,t):e instanceof gv?kv(e,t):n}function pv(e,t){return e instanceof wv?rp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var vv=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n)}(fv),yv=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).elements=e,r}return s(n)}(fv);function mv(e,t){var n,r=xv(t),i=f(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yd(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gv=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).elements=e,r}return s(n)}(fv);function kv(e,t){var n,r=xv(t),i=f(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yd(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var wv=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).M=e,i.k=r,i}return s(n)}(fv);function bv(e){return Md(e.integerValue||e.doubleValue)}function xv(e){return ip(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _v=s((function e(t,n){o(this,e),this.field=t,this.transform=n}));var Iv=s((function e(t,n){o(this,e),this.version=t,this.transformResults=n})),Ev=function(){function e(t,n){o(this,e),this.updateTime=t,this.exists=n}return s(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Sv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Tv=s((function e(){o(this,e)}));function Cv(e,t,n){e instanceof Pv?function(e,t,n){var r=e.value.clone(),i=Mv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ov?function(e,t,n){if(Sv(e.precondition,t)){var r=Mv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nv(e,t,n){e instanceof Pv?function(e,t,n){if(Sv(e.precondition,t)){var r=e.value.clone(),i=Fv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Rv(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Ov?function(e,t,n){if(Sv(e.precondition,t)){var r=Fv(e.fieldTransforms,n,t),i=t.data;i.setAll(Lv(e)),i.setAll(r),t.convertToFoundDocument(Rv(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Sv(e.precondition,t)&&t.convertToNoDocument(Id.min())}(e,t)}function Av(e,t){var n,r=null,i=f(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=pv(a.transform,o||null);null!=u&&(null==r&&(r=hp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Dv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&bd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yv&&t instanceof yv||e instanceof gv&&t instanceof gv?bd(e.elements,t.elements,Yd):e instanceof wv&&t instanceof wv?Yd(e.k,t.k):e instanceof vv&&t instanceof vv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Rv(e){return e.isFoundDocument()?e.version:Id.min()}var Pv=function(e){m(n,e);var t=x(n);function n(e,r,i){var a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return o(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=u,a.type=0,a}return s(n)}(Tv),Ov=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return o(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=i,u.precondition=a,u.fieldTransforms=s,u.type=1,u}return s(n)}(Tv);function Lv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Mv(e,t,n){var r=new Map;id(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,dv(o,u,n[i]))}return r}function Fv(e,t,n){var r,i=new Map,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,hv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Vv,Uv,jv=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return s(n)}(Tv),Bv=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return s(n)}(Tv),zv=s((function e(t){o(this,e),this.count=t}));function qv(e){switch(e){default:return rd();case od.CANCELLED:case od.UNKNOWN:case od.DEADLINE_EXCEEDED:case od.RESOURCE_EXHAUSTED:case od.INTERNAL:case od.UNAVAILABLE:case od.UNAUTHENTICATED:return!1;case od.INVALID_ARGUMENT:case od.NOT_FOUND:case od.ALREADY_EXISTS:case od.PERMISSION_DENIED:case od.FAILED_PRECONDITION:case od.ABORTED:case od.OUT_OF_RANGE:case od.UNIMPLEMENTED:case od.DATA_LOSS:return!0}}function Kv(e){if(void 0===e)return ed("GRPC error has no .code"),od.UNKNOWN;switch(e){case Vv.OK:return od.OK;case Vv.CANCELLED:return od.CANCELLED;case Vv.UNKNOWN:return od.UNKNOWN;case Vv.DEADLINE_EXCEEDED:return od.DEADLINE_EXCEEDED;case Vv.RESOURCE_EXHAUSTED:return od.RESOURCE_EXHAUSTED;case Vv.INTERNAL:return od.INTERNAL;case Vv.UNAVAILABLE:return od.UNAVAILABLE;case Vv.UNAUTHENTICATED:return od.UNAUTHENTICATED;case Vv.INVALID_ARGUMENT:return od.INVALID_ARGUMENT;case Vv.NOT_FOUND:return od.NOT_FOUND;case Vv.ALREADY_EXISTS:return od.ALREADY_EXISTS;case Vv.PERMISSION_DENIED:return od.PERMISSION_DENIED;case Vv.FAILED_PRECONDITION:return od.FAILED_PRECONDITION;case Vv.ABORTED:return od.ABORTED;case Vv.OUT_OF_RANGE:return od.OUT_OF_RANGE;case Vv.UNIMPLEMENTED:return od.UNIMPLEMENTED;case Vv.DATA_LOSS:return od.DATA_LOSS;default:return rd()}}(Uv=Vv||(Vv={}))[Uv.OK=0]="OK",Uv[Uv.CANCELLED=1]="CANCELLED",Uv[Uv.UNKNOWN=2]="UNKNOWN",Uv[Uv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uv[Uv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uv[Uv.NOT_FOUND=5]="NOT_FOUND",Uv[Uv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uv[Uv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uv[Uv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uv[Uv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uv[Uv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uv[Uv.ABORTED=10]="ABORTED",Uv[Uv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uv[Uv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uv[Uv.INTERNAL=13]="INTERNAL",Uv[Uv.UNAVAILABLE=14]="UNAVAILABLE",Uv[Uv.DATA_LOSS=15]="DATA_LOSS";var Gv=function(){function e(t,n){o(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return s(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=p(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Sd(this.inner,(function(t,n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=p(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Td(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Wv=function(){function e(t,n){o(this,e),this.comparator=t,this.root=n||Qv.EMPTY}return s(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Qv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hv(this.root,e,this.comparator,!0)}}]),e}(),Hv=function(){function e(t,n,r,i){o(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return s(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Qv=function(){function e(t,n,r,i,a){o(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return s(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw rd();if(this.right.isRed())throw rd();var e=this.left.check();if(e!==this.right.check())throw rd();return e+(this.isRed()?0:1)}}]),e}();Qv.EMPTY=null,Qv.RED=!0,Qv.BLACK=!1,Qv.EMPTY=new(function(){function e(){o(this,e),this.size=0}return s(e,[{key:"key",get:function(){throw rd()}},{key:"value",get:function(){throw rd()}},{key:"color",get:function(){throw rd()}},{key:"left",get:function(){throw rd()}},{key:"right",get:function(){throw rd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Qv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $v=function(){function e(t){o(this,e),this.comparator=t,this.data=new Wv(this.comparator)}return s(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Yv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Yv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Yv=function(){function e(t){o(this,e),this.iter=t}return s(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Jv(e){return e.hasNext()?e.getNext():void 0}var Xv=new Wv(Wd.comparator);function Zv(){return Xv}var ey=new Wv(Wd.comparator);function ty(){return ey}function ny(){return new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var ry=new Wv(Wd.comparator),iy=new $v(Wd.comparator);function ay(){for(var e=iy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var oy=new $v(wd);function uy(){return oy}var sy=function(){function e(t,n,r,i,a){o(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return s(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,cy.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Id.min(),r,uy(),Zv(),ay())}}]),e}(),cy=function(){function e(t,n,r,i,a){o(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return s(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Pd.EMPTY_BYTE_STRING,n,ay(),ay(),ay())}}]),e}(),ly=s((function e(t,n,r,i){o(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),fy=s((function e(t,n){o(this,e),this.targetId=t,this.$=n})),hy=s((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),dy=function(){function e(){o(this,e),this.B=0,this.L=yy(),this.U=Pd.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return s(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=ay(),t=ay(),n=ay();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rd()}})),new cy(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=yy()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),py=function(){function e(t){o(this,e),this.nt=t,this.st=new Map,this.it=Zv(),this.rt=vy(),this.ot=new $v(wd)}return s(e,[{key:"ut",value:function(e){var t,n=f(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=f(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:rd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Cp(i))if(0===n){var a=new Wd(i.path);this.ct(t,a,pp.newNoDocument(a,Id.min()))}else id(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Cp(a.target)){var o=new Wd(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,pp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=ay();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new sy(e,n,this.ot,this.it,r);return this.it=Zv(),this.rt=vy(),this.ot=new $v(wd),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new dy,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new $v(wd),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Zh("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new dy),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function vy(){return new Wv(Wd.comparator)}function yy(){return new Wv(Wd.comparator)}var my={asc:"ASCENDING",desc:"DESCENDING"},gy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ky=s((function e(t,n){o(this,e),this.databaseId=t,this.N=n}));function wy(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function by(e,t){return e.N?t.toBase64():t.toUint8Array()}function xy(e,t){return wy(e,t.toTimestamp())}function _y(e){return id(!!e),Id.fromTimestamp(function(e){var t=Ld(e);return new _d(t.seconds,t.nanos)}(e))}function Iy(e,t){return function(e){return new Nd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ey(e){var t=Nd.fromString(e);return id(Qy(t)),t}function Sy(e,t){return Iy(e.databaseId,t.path)}function Ty(e,t){var n=Ey(t);if(n.get(1)!==e.databaseId.projectId)throw new ud(od.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ud(od.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wd(Dy(n))}function Cy(e,t){return Iy(e.databaseId,t)}function Ny(e){var t=Ey(e);return 4===t.length?Nd.emptyPath():Dy(t)}function Ay(e){return new Nd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dy(e){return id(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ry(e,t,n){return{name:Sy(e,t),fields:n.value.mapValue.fields}}function Py(e,t,n){var r=Ty(e,t.name),i=_y(t.updateTime),a=new hp({mapValue:{fields:t.fields}}),o=pp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Oy(e,t){return"found"in t?function(e,t){id(!!t.found),t.found.name,t.found.updateTime;var n=Ty(e,t.found.name),r=_y(t.found.updateTime),i=new hp({mapValue:{fields:t.found.fields}});return pp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){id(!!t.missing),id(!!t.readTime);var n=Ty(e,t.missing),r=_y(t.readTime);return pp.newNoDocument(n,r)}(e,t):rd()}function Ly(e,t){var n;if(t instanceof Pv)n={update:Ry(e,t.key,t.value)};else if(t instanceof jv)n={delete:Sy(e,t.key)};else if(t instanceof Ov)n={update:Ry(e,t.key,t.data),updateMask:Hy(t.fieldMask)};else{if(!(t instanceof Bv))return rd();n={verify:Sy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof vv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wv)return{fieldPath:t.field.canonicalString(),increment:n.k};throw rd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rd()}(e,t.precondition)),n}function My(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ev.updateTime(_y(e.updateTime)):void 0!==e.exists?Ev.exists(e.exists):Ev.none()}(t.currentDocument):Ev.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)id("REQUEST_TIME"===t.setToServerValue),n=new vv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new yv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new gv(i)}else"increment"in t?n=new wv(e,t.increment):rd();var a=Dd.fromServerFormat(t.fieldPath);return new _v(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ty(e,t.update.name),a=new hp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Rd(t.map((function(e){return Dd.fromServerFormat(e)})))}(t.updateMask);return new Ov(i,a,o,n,r)}return new Pv(i,a,n,r)}if(t.delete){var u=Ty(e,t.delete);return new jv(u,n)}if(t.verify){var s=Ty(e,t.verify);return new Bv(s,n)}return rd()}function Fy(e,t){return{documents:[Cy(e,t.path)]}}function Vy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Cy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Cy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(op(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NAN"}};if(ap(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(op(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NOT_NAN"}};if(ap(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qy(e.field),op:zy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:qy(e.field),direction:By(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||qd(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Uy(e){var t=Ny(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){id(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=jy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new jp(Ky(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return qd(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Up(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Up(n,t)}(n.endAt)),Gp(t,i,u,o,s,"F",c,l)}function jy(e){return e?void 0!==e.unaryFilter?[Wy(e)]:void 0!==e.fieldFilter?[Gy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return jy(e)})).reduce((function(e,t){return e.concat(t)})):rd():[]}function By(e){return my[e]}function zy(e){return gy[e]}function qy(e){return{fieldPath:e.canonicalString()}}function Ky(e){return Dd.fromServerFormat(e.fieldPath)}function Gy(e){return Ap.create(Ky(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rd()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wy(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ky(e.unaryFilter.field);return Ap.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ky(e.unaryFilter.field);return Ap.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ky(e.unaryFilter.field);return Ap.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ky(e.unaryFilter.field);return Ap.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rd()}}function Hy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Qy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function $y(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Jy(t)),t=Yy(e.get(n),t);return Jy(t)}function Yy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Jy(e){return e+"\x01\x01"}function Xy(e){var t=e.length;if(id(t>=2),2===t)return id("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Nd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&rd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:rd()}a=o+2}return new Nd(r)}var Zy=["userId","batchId"];function em(e,t){return[e,$y(t)]}function tm(e,t,n){return[e,$y(t),n]}var nm={},rm=["prefixPath","collectionGroup","readTime","documentId"],im=["prefixPath","collectionGroup","documentId"],am=["collectionGroup","readTime","prefixPath","documentId"],om=["canonicalId","targetId"],um=["targetId","path"],sm=["path","targetId"],cm=["collectionId","parent"],lm=["indexId","uid"],fm=["uid","sequenceNumber"],hm=["indexId","uid","arrayValue","directionalValue","documentKey"],dm=["indexId","uid","documentKey"],pm=["userId","collectionPath","documentId"],vm=["userId","collectionPath","largestBatchId"],ym=["userId","collectionGroup","largestBatchId"],mm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),gm=[].concat(ue(mm),["documentOverlays"]),km=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wm=[].concat(km,["indexConfiguration","indexState","indexEntries"]),bm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xm=function(){function e(){o(this,e),this.onCommittedListeners=[]}return s(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),_m=function(){function e(t){var n=this;o(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return s(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&rd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=f(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Im=function(){function e(t,n){var r=this;o(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new sd,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Tm(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Rm(e.target.error);r.At.reject(new Tm(t,n))}}return s(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Zh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Nm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Tm(n,t)}}}]),e}(),Em=function(){function e(t,n,r){o(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(O())&&ed("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return s(e,[{key:"Nt",value:function(){var e=ce(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Zh("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Tm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ud(od.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ud(od.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Tm(t,n))},i.onupgradeneeded=function(e){Zh("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Zh("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ce(S().mark((function e(t,n,r,i){var a,o,u,s,c=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(S().mark((function e(){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Im.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),_m.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Zh("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Zh("SimpleDb","Removing database:",e),Am(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!j())return!1;if(e.St())return!0;var t=O(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/React-Firebase-chat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Sm=function(){function e(t){o(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return s(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Am(this.Ft.delete())}}]),e}(),Tm=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,od.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return s(n)}(ud);function Cm(e){return"IndexedDbTransactionError"===e.name}var Nm=function(){function e(t){o(this,e),this.store=t}return s(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Zh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Am(n)}},{key:"add",value:function(e){return Zh("SimpleDb","ADD",this.store.name,e,e),Am(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Am(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Zh("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Zh("SimpleDb","DELETE",this.store.name,e),Am(this.store.delete(e))}},{key:"count",value:function(){return Zh("SimpleDb","COUNT",this.store.name),Am(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new _m((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new _m((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Zh("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new _m((function(n,r){t.onerror=function(e){var t=Rm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new _m((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Sm(i),o=t(i.primaryKey,i.value,a);if(o instanceof _m){var u=o.catch((function(e){return a.done(),_m.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return _m.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Am(e){return new _m((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Rm(e.target.error);n(t)}}))}var Dm=!1;function Rm(e){var t=Em.Vt(O());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ud("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Dm||(Dm=!0,setTimeout((function(){throw r}),0)),r}}return e}var Pm=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return s(n)}(xm);function Om(e,t){var n=ad(e);return Em.xt(n.Ht,t)}var Lm=function(){function e(t,n,r,i){o(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return s(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Cv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=f(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Nv(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=f(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Nv(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Id.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ay())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&bd(this.mutations,e.mutations,(function(e,t){return Dv(e,t)}))&&bd(this.baseMutations,e.baseMutations,(function(e,t){return Dv(e,t)}))}}]),e}(),Mm=function(){function e(t,n,r,i){o(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return s(e,null,[{key:"from",value:function(t,n,r){id(t.mutations.length===r.length);for(var i=ry,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Fm=function(){function e(t,n){o(this,e),this.largestBatchId=t,this.mutation=n}return s(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Vm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Id.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Id.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pd.EMPTY_BYTE_STRING;o(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return s(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Um=s((function e(t){o(this,e),this.Jt=t}));function jm(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Sy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wy(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zm(t.version)};else{if(!t.isUnknownDocument())return rd();r.unknownDocument={path:n.path.toArray(),version:zm(t.version)}}return r}function Bm(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zm(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qm(e){var t=new _d(e.seconds,e.nanoseconds);return Id.fromTimestamp(t)}function Km(e,t){for(var n=(t.baseMutations||[]).map((function(t){return My(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return My(e.Jt,t)})),u=_d.fromMillis(t.localWriteTimeMs);return new Lm(t.batchId,u,n,o)}function Gm(e){var t,n,r=qm(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qm(e.lastLimboFreeSnapshotVersion):Id.min();return void 0!==e.query.documents?(id(1===(n=e.query).documents.length),t=Zp(Wp(Ny(n.documents[0])))):t=function(e){return Zp(Uy(e))}(e.query),new Vm(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pd.fromBase64String(e.resumeToken))}function Wm(e,t){var n,r=zm(t.snapshotVersion),i=zm(t.lastLimboFreeSnapshotVersion);n=Cp(t.target)?Fy(e.Jt,t.target):Vy(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Hm(e){var t=Uy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ev(t,t.limit,"L"):t}function Qm(e,t){return new Fm(t.largestBatchId,My(e.Jt,t.overlayMutation))}function $m(e,t){var n=t.path.lastSegment();return[e,$y(t.path.popLast()),n]}var Ym=function(){function e(){o(this,e)}return s(e,[{key:"getBundleMetadata",value:function(e,t){return Jm(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qm(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Jm(e).put({bundleId:(n=t).id,createTime:zm(_y(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Xm(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Hm(t.bundledQuery),readTime:qm(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Xm(e).put(function(e){return{name:e.name,readTime:zm(_y(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Jm(e){return Om(e,"bundles")}function Xm(e){return Om(e,"namedQueries")}var Zm=function(){function e(t,n){o(this,e),this.M=t,this.userId=n}return s(e,[{key:"getOverlay",value:function(e,t){var n=this;return eg(e).get($m(this.userId,t)).next((function(e){return e?Qm(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Fm(t,a);i.push(r.Xt(e,o))})),_m.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add($y(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(eg(e).Qt("collectionPathOverlayIndex",i))})),_m.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ny(),a=$y(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return eg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Qm(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ny(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Qm(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return eg(e).put(function(e,t,n){var r=p($m(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ly(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function eg(e){return Om(e,"documentOverlays")}var tg=function(){function e(){o(this,e)}return s(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Md(e.integerValue));else if("doubleValue"in e){var n=Md(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Kd(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?cp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):rd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Wd.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function ng(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function rg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ng(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}tg.fe=new tg;var ig=function(){function e(){o(this,e),this.buffer=new Uint8Array(1024),this.position=0}return s(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=rg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=rg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ag=function(){function e(t){o(this,e),this.De=t}return s(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),og=function(){function e(t){o(this,e),this.De=t}return s(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),ug=function(){function e(){o(this,e),this.De=new ig,this.Ce=new ag(this.De),this.xe=new og(this.De)}return s(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),sg=function(){function e(t,n,r,i){o(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return s(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function cg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=lg(e.arrayValue,t.arrayValue))?n:0!==(n=lg(e.directionalValue,t.directionalValue))?n:Wd.comparator(e.documentKey,t.documentKey)}function lg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var fg=function(){function e(t){o(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=f(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return s(e,[{key:"$e",value:function(e){var t=yp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=mp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=f(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),hg=function(){function e(){o(this,e),this.qe=new dg}return s(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),_m.resolve()}},{key:"getCollectionParents",value:function(e,t){return _m.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return _m.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return _m.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return _m.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return _m.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return _m.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return _m.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return _m.resolve()}},{key:"updateIndexEntries",value:function(e,t){return _m.resolve()}}]),e}(),dg=function(){function e(){o(this,e),this.index={}}return s(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $v(Nd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $v(Nd.comparator)).toArray()}}]),e}(),pg=new Uint8Array(0),vg=function(){function e(t){o(this,e),this.user=t,this.Ge=new dg,this.Ke=new Gv((function(e){return Sp(e)}),(function(e,t){return Tp(e,t)})),this.uid=t.uid||""}return s(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:$y(i)};return yg(e).put(a)}return _m.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[xd(t),""],!1,!0);return yg(e).qt(r).next((function(e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Xy(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=gg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=gg(e),r=kg(e),i=mg(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=mg(e),i=!0,a=new Map;return _m.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=ay();return _m.forEach(a,(function(i,a){var o;Zh("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Sp(t)));var u=function(e,t){var n=yp(t);if(void 0===n)return null;var r,i=f(Np(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=f(mp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=f(Np(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=f(mp(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,h=f(Np(e,s.fieldPath));try{for(h.s();!(u=h.n()).done;){var d=u.value,p=void 0,v=!0;switch(d.op){case"<":case"<=":p="nullValue"in(r=d.value)?Qd:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?np(zd.empty(),Wd.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:rd();break;case"==":case"in":case">=":p=d.value;break;case">":p=d.value,v=!1;break;case"!=":case"not-in":p=Qd}lp(c,p)===p&&(c=p,l=v)}}catch(g){h.e(g)}finally{h.f()}if(null!==e.startAt)for(var y=0;y<e.orderBy.length;++y)if(e.orderBy[y].field.isEqual(s.fieldPath)){var m=e.startAt.position[y];lp(c,m)===m&&(c=m,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(g){o.e(g)}finally{o.f()}return new Up(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=f(mp(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,h=f(Np(e,s.fieldPath));try{for(h.s();!(u=h.n()).done;){var d=u.value,p=void 0,v=!0;switch(d.op){case">=":case">":p="nullValue"in(r=d.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?np(zd.empty(),Wd.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Hd:rd(),v=!1;break;case"==":case"in":case"<=":p=d.value;break;case"<":p=d.value,v=!1;break;case"!=":case"not-in":p=Hd}fp(c,p)===p&&(c=p,l=v)}}catch(g){h.e(g)}finally{h.f()}if(null!==e.endAt)for(var y=0;y<e.orderBy.length;++y)if(e.orderBy[y].field.isEqual(s.fieldPath)){var m=e.endAt.position[y];fp(c,m)===m&&(c=m,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(g){o.e(g)}finally{o.f()}return new Up(i,a)}(a,i),h=n.je(i,a,c),d=n.je(i,a,l),p=n.We(i,a,s),v=n.ze(i.indexId,u,h,!!c&&c.inclusive,d,!!l&&l.inclusive,p);return _m.forEach(v,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Wd(Xy(t.documentKey)))}))}))}))})).next((function(){return e}))}return _m.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):pg,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,ue(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new sg(e,Wd.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new sg(e,Wd.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new sg(e,Wd.empty(),pg,pg)}},{key:"getFieldIndex",value:function(e,t){var n=new fg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new ug,i=f(mp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);tg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new ug;return tg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ug);var i,a=0,o=f(mp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=f(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.tn(t,s.fieldPath)&&ip(c))r=this.en(r,s,c);else{var d=h.Ne(s.kind);tg.fe.Zt(c,d)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=ue(e),a=[],o=f(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=f(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new ug;h.seed(l.Se()),tg.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ap&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=gg(e),i=kg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return _m.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kp(t.sequenceNumber,new xp(qm(t.readTime),new Wd(Xy(t.documentKey)),t.largestBatchId)):kp.empty(),r=e.fields.map((function(e){var t=p(e,2),n=t[0],r=t[1];return new gp(Dd.fromServerFormat(n),r)}));return new vp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:wd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=gg(e),a=kg(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return _m.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:zm(r.readTime),documentKey:$y(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return _m.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?_m.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),_m.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?_m.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return mg(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:$y(t.key.path)})}},{key:"cn",value:function(e,t,n){return mg(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,$y(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=mg(e),i=new $v(cg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,$y(t.path)])},(function(e,r){i=i.add(new sg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new $v(cg),r=this.Ze(t,e);if(null==r)return n;var i=yp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ip(a)){var o,u=f(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new sg(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new sg(t.indexId,e.key,pg,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;Zh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Jv(a),s=Jv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Jv(o)):l?(i(u),u=Jv(a)):(u=Jv(a),s=Jv(o))}}(n,r,cg,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),_m.waitFor(a)}},{key:"sn",value:function(e){var t=1;return kg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return cg(e,t)})).filter((function(e,t,n){return!t||0!==cg(e,n[t-1])}));var r=[];r.push(e);var i,a=f(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=cg(o,e),s=cg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function yg(e){return Om(e,"collectionParents")}function mg(e){return Om(e,"indexEntries")}function gg(e){return Om(e,"indexConfiguration")}function kg(e){return Om(e,"indexState")}var wg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bg=function(){function e(t,n,r){o(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return s(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function xg(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){id(1===u)})));var c,l=[],h=f(n.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=tm(t,d.key.path,n.batchId);a.push(i.delete(p)),l.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return _m.waitFor(a).next((function(){return l}))}function _g(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rd();t=e.noDocument}return JSON.stringify(t).length}bg.DEFAULT_COLLECTION_PERCENTILE=10,bg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bg.DEFAULT=new bg(41943040,bg.DEFAULT_COLLECTION_PERCENTILE,bg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bg.DISABLED=new bg(-1,0,0);var Ig=function(){function e(t,n,r,i){o(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return s(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Tg(e),o=Sg(e);return o.add({}).next((function(u){id("number"==typeof u);var s,c=new Lm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ly(e.Jt,t)})),i=n.mutations.map((function(t){return Ly(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],d=new $v((function(e,t){return wd(e.canonicalString(),t.canonicalString())})),p=f(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,y=tm(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(y,nm))}}catch(m){p.e(m)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),_m.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Sg(e).get(t).next((function(e){return e?(id(e.userId===n.userId),Km(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?_m.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Sg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(id(t.batchId>=r),a=Km(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Km(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=em(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Tg(e).Wt({range:i},(function(r,i,o){var u=p(r,3),s=u[0],c=u[1],l=u[2],f=Xy(c);if(s===n.userId&&t.path.isEqual(f))return Sg(e).get(l).next((function(e){if(!e)throw rd();id(e.userId===n.userId),a.push(Km(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $v(wd),i=[];return t.forEach((function(t){var a=em(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Tg(e).Wt({range:o},(function(e,i,a){var o=p(e,3),u=o[0],s=o[1],c=o[2],l=Xy(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),_m.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=em(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new $v(wd);return Tg(e).Wt({range:o},(function(e,t,a){var o=p(e,3),s=o[0],c=o[1],l=o[2],f=Xy(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Sg(e).get(t).next((function(e){if(null===e)throw rd();id(e.userId===n.userId),r.push(Km(n.M,e))})))})),_m.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return xg(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),_m.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return _m.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Tg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Xy(e[1]);i.push(a)}else r.done()})).next((function(){id(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Eg(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return Cg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return id(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Eg(e,t,n){var r=em(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Tg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=p(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Sg(e){return Om(e,"mutations")}function Tg(e){return Om(e,"documentMutations")}function Cg(e){return Om(e,"mutationQueues")}var Ng=function(){function e(t){o(this,e),this.wn=t}return s(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),Ag=function(){function e(t,n){o(this,e),this.referenceDelegate=t,this.M=n}return s(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new Ng(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return Id.fromTimestamp(new _d(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Dg(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return id(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Dg(e).Wt((function(o,u){var s=Gm(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return _m.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Dg(e).Wt((function(e,n){var r=Gm(n);t(r)}))}},{key:"yn",value:function(e){return Rg(e).get("targetGlobalKey").next((function(e){return id(null!==e),e}))}},{key:"pn",value:function(e,t){return Rg(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return Dg(e).put(Wm(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Sp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Dg(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Gm(n);Tp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Pg(e);return t.forEach((function(t){var o=$y(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),_m.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Pg(e);return _m.forEach(t,(function(t){var a=$y(t.path);return _m.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Pg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pg(e),i=ay();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Xy(e[1]),a=new Wd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=$y(t.path),r=IDBKeyRange.bound([n],[xd(n)],!1,!0),i=0;return Pg(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=p(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Dg(e).get(t).next((function(e){return e?Gm(e):null}))}}]),e}();function Dg(e){return Om(e,"targets")}function Rg(e){return Om(e,"targetGlobal")}function Pg(e){return Om(e,"targetDocuments")}function Og(e){return Lg.apply(this,arguments)}function Lg(){return Lg=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===od.FAILED_PRECONDITION&&t.message===bm){e.next=2;break}throw t;case 2:Zh("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Lg.apply(this,arguments)}function Mg(e,t){var n=p(e,2),r=n[0],i=n[1],a=p(t,2),o=a[0],u=a[1],s=wd(r,o);return 0===s?wd(i,u):s}var Fg=function(){function e(t){o(this,e),this.En=t,this.buffer=new $v(Mg),this.An=0}return s(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Mg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Vg=function(){function e(t,n){o(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return s(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;Zh("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Cm(n.t0)){n.next=12;break}Zh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Og(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Ug=function(){function e(t,n){o(this,e),this.Sn=t,this.params=n}return s(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return _m.resolve(md.A);var r=new Fg(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Zh("LruGarbageCollector","Garbage collection skipped; disabled"),_m.resolve(wg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Zh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),wg):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Zh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Xh()<=pe.DEBUG&&Zh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),_m.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),jg=function(){function e(t,n){o(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ug(e,t)}(this,n)}return s(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Bg(e,n)}},{key:"removeReference",value:function(e,t,n){return Bg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Bg(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return Cg(e).zt((function(r){return Eg(e,r,t).next((function(e){return e&&(n=!0),_m.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Id.min()),Pg(e).delete([0,$y(o.path)])}))}));i.push(s)}})).next((function(){return _m.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Bg(e,t)}},{key:"kn",value:function(e,t){var n,r=Pg(e),i=md.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=p(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==md.A&&t(new Wd(Xy(n)),i),i=s,n=u):i=md.A})).next((function(){i!==md.A&&t(new Wd(Xy(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Bg(e,t){return Pg(e).put(function(e,t){return{targetId:0,path:$y(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var zg=function(){function e(){o(this,e),this.changes=new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return s(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,pp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?_m.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),qg=function(){function e(t){o(this,e),this.M=t}return s(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Wg(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Wg(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Bm(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=pp.newInvalidDocument(t);return Wg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:pp.newInvalidDocument(t)};return Wg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(t))},(function(e,i){r={document:n.Fn(t,i),size:_g(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Zv();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=Zv(),i=new Wv(Wd.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,_g(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return _m.resolve();var r=new $v($g);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Hg(r.first()),Hg(r.last())),a=r.getIterator(),o=a.getNext();return Wg(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Wd.fromSegments([].concat(ue(t.prefixPath),[t.collectionGroup,t.documentId]));o&&$g(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Hg(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Bm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wg(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Zv(),i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(Wd.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Zv(),o=Qg(t,n),u=Qg(t,xp.max());return Wg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(Wd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Kg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Gg(e).get("remoteDocumentGlobalKey").next((function(e){return id(!!e),e}))}},{key:"On",value:function(e,t){return Gg(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Py(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Wd.fromSegments(t.noDocument.path),i=qm(t.noDocument.readTime);n=pp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return rd();var a=Wd.fromSegments(t.unknownDocument.path),o=qm(t.unknownDocument.version);n=pp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new _d(e[0],e[1]);return Id.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Id.min()))return n}return pp.newInvalidDocument(e)}}]),e}(),Kg=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return s(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $v((function(e,t){return wd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=jm(t.qn.M,o);i=i.add(a.path.popLast());var c=_g(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=jm(t.qn.M,o.convertToNoDocument(Id.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),_m.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(zg);function Gg(e){return Om(e,"remoteDocumentGlobal")}function Wg(e){return Om(e,"remoteDocumentsV14")}function Hg(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Qg(e,t){var n=t.documentKey.path.toArray();return[e,Bm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $g(e,t){var n=e.path.length-t.path.length;return 0!==n?n:Wd.comparator(e,t)}var Yg=function(){function e(t){o(this,e),this.M=t}return s(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Im("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zy,{unique:!0}),e.createObjectStore("documentMutations")}(e),Jg(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=_m.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Jg(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Id.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return _m.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:pm});t.createIndex("collectionPathOverlayIndex",vm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ym,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:rm});t.createIndex("documentKeyIndex",im),t.createIndex("collectionGroupIndex",am)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:lm}).createIndex("sequenceNumberIndex",fm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:hm}).createIndex("documentKeyIndex",dm,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=_g(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return _m.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return _m.forEach(r,(function(r){id(r.userId===n.userId);var i=Km(t.M,r);return xg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Nd(n),o=function(e){return[0,$y(e)]}(a);r.push(t.get(o).next((function(n){return n?_m.resolve():function(n){return t.put({targetId:0,path:$y(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return _m.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:cm});var n=t.store("collectionParents"),r=new dg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:$y(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Nd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=p(e,3),r=(n[0],n[1]),a=(n[2],Xy(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Gm(r),a=Wm(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Wd(Nd.fromString(i.document.name).popFirst(5)):i.noDocument?Wd.fromSegments(i.noDocument.path):i.unknownDocument?Wd.fromSegments(i.unknownDocument.path):rd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return _m.waitFor(r)}))}}]),e}();function Jg(e){e.createObjectStore("targetDocuments",{keyPath:um}).createIndex("documentTargetsIndex",sm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",om,{unique:!0}),e.createObjectStore("targetGlobal")}var Xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zg=function(){function e(t,n,r,i,a,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(o(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=u,this.document=s,this.Yn=l,this.Xn=f,this.Zn=h,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new ud(od.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jg(this,i),this.cs=n+"main",this.M=new Um(c),this.hs=new Em(this.cs,this.Zn,new Yg(this.M)),this.ls=new Ag(this.referenceDelegate,this.M),this.fs=function(e){return new qg(e)}(this.M),this.ds=new Ym,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===f&&ed("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return s(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ud(od.FAILED_PRECONDITION,Xg);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new md(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=ce(S().mark((function n(r){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=ce(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return tk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(Cm(t))return Zh("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Zh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return ek(e).get("owner").next((function(e){return _m.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return tk(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=ce(S().mark((function e(){var t,n,r,i,a=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Om(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return _m.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=f(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?_m.resolve(!0):ek(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new ud(od.FAILED_PRECONDITION,Xg);return!1}}return!(!t.networkEnabled||!t.inForeground)||tk(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Zh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ce(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Pm(e,md.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return tk(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return Ig.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new vg(e)}},{key:"getDocumentOverlayCache",value:function(e){return Zm.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Zh("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?wm:13===i?km:12===i?gm:11===i?mm:void rd();return this.hs.runTransaction(e,o,u,(function(i){return a=new Pm(i,r.ts?r.ts.next():md.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw ed("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new ud(od.FAILED_PRECONDITION,bm);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return ek(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ud(od.FAILED_PRECONDITION,Xg)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ek(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=ek(e);return n.get("owner").next((function(e){return t.bs(e)?(Zh("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_m.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ed("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!M()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Zh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ed("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(Qs){ed("Failed to set zombie client id.",Qs)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(Qs){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Em.vt()}}]),e}();function ek(e){return Om(e,"owner")}function tk(e){return Om(e,"clientMetadata")}function nk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var rk=function(){function e(t,n,r){o(this,e),this.fs=t,this.$s=n,this.indexManager=r}return s(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=f(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Wd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):Jp(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Wd(t)).next((function(e){var t=ty();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ty();return this.indexManager.getCollectionParents(e,i).next((function(o){return _m.forEach(o,(function(o){var u=function(e,t){return new Kp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=f(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=pp.newInvalidDocument(s),r=r.insert(s,c)),Nv(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){iv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),ik=function(){function e(t,n,r,i){o(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return s(e,null,[{key:"Js",value:function(t,n){var r,i=ay(),a=ay(),o=f(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ak=function(){function e(){o(this,e)}return s(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Id.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(Hp(t)||Qp(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Xh()<=pe.DEBUG&&Zh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rv(t)),i.Xs.Ks(e,t,wp(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new $v(ov(e));return t.forEach((function(t,r){iv(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Xh()<=pe.DEBUG&&Zh("QueryEngine","Using full collection scan to execute query:",rv(t)),this.Xs.Ks(e,t,xp.min())}}]),e}(),ok=function(){function e(t,n,r,i){o(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Wv(wd),this.ii=new Gv((function(e){return Sp(e)}),Tp),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return s(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new rk(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function uk(e,t,n,r){return new ok(e,t,n,r)}function sk(e,t){return ck.apply(this,arguments)}function ck(){return ck=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=ay(),s=f(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=f(c.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value;u=u.add(d.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var p,v=f(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=f(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ck.apply(this,arguments)}function lk(e,t){var n=ad(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=_m.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);id(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function fk(e){var t=ad(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function hk(e,t){var n=ad(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Pd.EMPTY_BYTE_STRING,Id.min()).withLastLimboFreeSnapshotVersion(Id.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=Zv();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(dk(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Id.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return _m.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function dk(e,t,n){var r=ay();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Zv();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Id.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Zh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function pk(e,t){var n=ad(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function vk(e,t){var n=ad(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,_m.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Vm(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function yk(e,t,n){return mk.apply(this,arguments)}function mk(){return mk=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ad(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Cm(e.t1)){e.next=12;break}throw e.t1;case 12:Zh("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),mk.apply(this,arguments)}function gk(e,t,n){var r=ad(e),i=Id.min(),a=ay();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ad(e),i=r.ii.get(n);return void 0!==i?_m.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,Zp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:Id.min(),n?a:ay())})).next((function(e){return bk(r,av(t),e),{documents:e,hi:a}}))}))}function kk(e,t){var n=ad(e),r=ad(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function wk(e,t){var n=ad(e),r=n.ri.get(t)||Id.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,wp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return bk(n,t,e),e}))}function bk(e,t,n){var r=Id.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function xk(e,t,n,r){return _k.apply(this,arguments)}function _k(){return _k=ce(S().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,d,p,v;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ad(t),o=ay(),u=Zv(),s=f(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.li(l.metadata.name),l.document&&(o=o.add(h)),(d=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(h,d)}catch(y){s.e(y)}finally{s.f()}return p=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,vk(a,function(e){return Zp(Wp(Nd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return dk(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.ls.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),_k.apply(this,arguments)}function Ik(e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=ce(S().mark((function e(t,n){var r,i,a,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:ay(),e.next=3,vk(t,Zp(Hm(n.bundledQuery)));case 3:return i=e.sent,a=ad(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=_y(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(Pd.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ek.apply(this,arguments)}var Sk=function(){function e(t){o(this,e),this.M=t,this._i=new Map,this.wi=new Map}return s(e,[{key:"getBundleMetadata",value:function(e,t){return _m.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:_y(n.createTime)}),_m.resolve()}},{key:"getNamedQuery",value:function(e,t){return _m.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Hm(e.bundledQuery),readTime:_y(e.readTime)}}(t)),_m.resolve()}}]),e}(),Tk=function(){function e(){o(this,e),this.overlays=new Wv(Wd.comparator),this.mi=new Map}return s(e,[{key:"getOverlay",value:function(e,t){return _m.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),_m.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),_m.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ny(),i=t.length+1,a=new Wd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return _m.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Wv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ny(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ny(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return _m.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Fm(t,n));var a=this.mi.get(t);void 0===a&&(a=ay(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Ck=function(){function e(){o(this,e),this.gi=new $v(Nk.yi),this.pi=new $v(Nk.Ii)}return s(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Nk(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new Nk(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Wd(new Nd([])),r=new Nk(n,e),i=new Nk(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Wd(new Nd([])),n=new Nk(t,e),r=new Nk(t,e+1),i=ay();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Nk(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Nk=function(){function e(t,n){o(this,e),this.key=t,this.Vi=n}return s(e,null,[{key:"yi",value:function(e,t){return Wd.comparator(e.key,t.key)||wd(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return wd(e.Vi,t.Vi)||Wd.comparator(e.key,t.key)}}]),e}(),Ak=function(){function e(t,n){o(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new $v(Nk.yi)}return s(e,[{key:"checkEmpty",value:function(e){return _m.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new Lm(i,t,n,r);this.$s.push(a);var o,u=f(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new Nk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return _m.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return _m.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return _m.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return _m.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return _m.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Nk(t,0),i=new Nk(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),_m.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $v(wd);return t.forEach((function(e){var t=new Nk(e,0),i=new Nk(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),_m.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Wd.isDocumentKey(i)||(i=i.child(""));var a=new Nk(new Wd(i),0),o=new $v(wd);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),_m.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;id(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return _m.forEach(t.mutations,(function(i){var a=new Nk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Nk(t,0),r=this.Si.firstAfterOrEqual(n);return _m.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,_m.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),Dk=function(){function e(t){o(this,e),this.ki=t,this.docs=new Wv(Wd.comparator),this.size=0}return s(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return _m.resolve(n?n.document.mutableCopy():pp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Zv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():pp.newInvalidDocument(e))})),_m.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Zv(),i=new Wd(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||_p(bp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return _m.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){rd()}},{key:"Mi",value:function(e,t){return _m.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Rk(this)}},{key:"getSize",value:function(e){return _m.resolve(this.size)}}]),e}(),Rk=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).qn=e,r}return s(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),_m.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(zg),Pk=function(){function e(t){o(this,e),this.persistence=t,this.Oi=new Gv((function(e){return Sp(e)}),Tp),this.lastRemoteSnapshotVersion=Id.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Ck,this.targetCount=0,this.Bi=Ng.mn()}return s(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),_m.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return _m.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return _m.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),_m.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),_m.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Ng(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,_m.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),_m.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,_m.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),_m.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return _m.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return _m.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),_m.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),_m.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),_m.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return _m.resolve(n)}},{key:"containsKey",value:function(e,t){return _m.resolve(this.$i.containsKey(t))}}]),e}(),Ok=function(){function e(t,n){var r=this;o(this,e),this.Li={},this.overlays={},this.ts=new md(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Pk(this),this.indexManager=new hg,this.fs=new Dk((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Um(n),this.ds=new Sk(this.M)}return s(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Tk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new Ak(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Zh("MemoryPersistence","Starting transaction:",e);var i=new Lk(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return _m.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Lk=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return s(n)}(xm),Mk=function(){function e(t){o(this,e),this.persistence=t,this.Qi=new Ck,this.ji=null}return s(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw rd()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),_m.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),_m.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),_m.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _m.forEach(this.zi,(function(r){var i=Wd.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,Id.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return _m.or([function(){return _m.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function Fk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Vk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Uk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jk=function(){function e(t,n,r,i){o(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return s(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ud(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ed("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Bk=function(){function e(t,n,r){o(this,e),this.targetId=t,this.state=n,this.error=r}return s(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ud(i.error.code,i.error.message))),a?new e(t,i.state,r):(ed("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),zk=function(){function e(t,n){o(this,e),this.clientId=t,this.activeTargetIds=n}return s(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=uy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Gd(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ed("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),qk=function(){function e(t,n){o(this,e),this.clientId=t,this.onlineState=n}return s(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ed("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Kk=function(){function e(){o(this,e),this.activeTargetIds=uy()}return s(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Gk=function(){function e(t,n,r,i,a){o(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Wv(wd),this.started=!1,this.ir=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Fk(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Kk),this.ar=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return s(e,[{key:"start",value:function(){var e=ce(S().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,d=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=f(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Fk(this.persistenceKey,i)))&&(o=zk.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=f(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(p){c.e(p)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Uk(this.persistenceKey,e));if(n){var r=Bk.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Uk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Zh("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Zh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Zh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Zh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void ed("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(ce(S().mark((function e(){var r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=md.A;if(null!=e)try{var n=JSON.parse(e);id("number"==typeof n),t=n}catch(e){ed("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==md.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new jk(this.currentUser,e,t,n),i=Vk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Vk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Uk(this.persistenceKey,e),i=new Bk(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return zk.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jk.Ji(new $h(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Bk.Ji(r,t)}},{key:"wr",value:function(e){return qk.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Zh("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=uy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Wk=function(){function e(){o(this,e),this.Fr=new Kk,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return s(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Kk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Hk=function(){function e(){o(this,e)}return s(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Qk=function(){function e(){var t=this;o(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return s(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Zh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=f(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Zh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=f(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Yk=function(){function e(t){o(this,e),this.jr=t.jr,this.Wr=t.Wr}return s(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Jk=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return s(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Hh;o.listenOnce(zh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Bh.NO_ERROR:var t=o.getResponseJson();Zh("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Bh.TIMEOUT:Zh("Connection",'RPC "'+e+'" timed out'),a(new ud(od.DEADLINE_EXCEEDED,"Request time out"));break;case Bh.HTTP_ERROR:var n=o.getStatus();if(Zh("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(od).indexOf(t)>=0?t:od.UNKNOWN}(r.status);a(new ud(u,r.message))}else a(new ud(od.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ud(od.UNAVAILABLE,"Connection failed."));break;default:rd()}}finally{Zh("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Uh(),a=jh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Gh({})),this.uo(o.initMessageHeaders,t,n),L()||V()||O().indexOf("Electron/")>=0||U()||O().indexOf("MSAppHost/")>=0||F()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Zh("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Yk({jr:function(e){l?Zh("Connection","Not sending because WebChannel is closed:",e):(c||(Zh("Connection","Opening WebChannel transport."),s.open(),c=!0),Zh("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Wh.EventType.OPEN,(function(){l||Zh("Connection","WebChannel transport opened.")})),h(s,Wh.EventType.CLOSE,(function(){l||(l=!0,Zh("Connection","WebChannel transport closed"),f.eo())})),h(s,Wh.EventType.ERROR,(function(e){l||(l=!0,td("Connection","WebChannel transport errored:",e),f.eo(new ud(od.UNAVAILABLE,"The operation could not be completed")))})),h(s,Wh.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];id(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Zh("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Vv[e];if(void 0!==t)return Kv(t)}(a),u=i.message;void 0===o&&(o=od.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new ud(o,u)),s.close()}else Zh("Connection","WebChannel received:",n),f.no(n)}})),h(a,qh.STAT_EVENT,(function(e){e.stat===Kh.PROXY?Zh("Connection","Detected buffering proxy"):e.stat===Kh.NOPROXY&&Zh("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){o(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return s(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Zh("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return Zh("RestConnection","Received: ",e),e}),(function(t){throw td("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=$k[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Xk(){return"undefined"!=typeof window?window:null}function Zk(){return"undefined"!=typeof document?document:null}function ew(e){return new ky(e,!0)}var tw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;o(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return s(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Zh("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),nw=function(){function e(t,n,r,i,a,u,s,c){o(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new tw(t,n)}return s(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===od.RESOURCE_EXHAUSTED?(ed(n.toString()),ed("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===od.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=p(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new ud(od.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Zh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(Zh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),rw=function(e){m(n,e);var t=x(n);function n(e,r,i,a,u,s){var c;return o(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=u,c}return s(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:rd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(id(void 0===t||"string"==typeof t),Pd.fromBase64String(t||"")):(id(void 0===t||t instanceof Uint8Array),Pd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?od.UNKNOWN:Kv(e.code);return new ud(t,e.message||"")}(o);n=new hy(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ty(e,s.document.name),l=_y(s.document.updateTime),f=new hp({mapValue:{fields:s.document.fields}}),h=pp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ly(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Ty(e,v.document),m=v.readTime?_y(v.readTime):Id.min(),g=pp.newNoDocument(y,m),k=v.removedTargetIds||[];n=new ly([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Ty(e,w.document),x=w.removedTargetIds||[];n=new ly([],x,b,null)}else{if(!("filter"in t))return rd();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new zv(I),S=_.targetId;n=new fy(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Id.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Id.min():t.readTime?_y(t.readTime):Id.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Ay(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Cp(r)?{documents:Fy(e,r)}:{query:Vy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=by(e,t.resumeToken):t.snapshotVersion.compareTo(Id.min())>0&&(n.readTime=wy(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Ay(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(nw),iw=function(e){m(n,e);var t=x(n);function n(e,r,i,a,u,s){var c;return o(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=u,c.Wo=!1,c}return s(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,kt(g(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(id(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(id(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?_y(e.updateTime):_y(t);return n.isEqual(Id.min())&&(n=_y(t)),new Iv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=_y(e.commitTime);return this.listener.Jo(n,t)}return id(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Ay(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ly(t.M,e)}))};this.Oo(n)}}]),n}(nw),aw=function(e){m(n,e);var t=x(n);function n(e,r,i,a){var u;return o(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.bo=i,u.M=a,u.Zo=!1,u}return s(n,[{key:"tu",value:function(){if(this.Zo)throw new ud(od.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=p(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===od.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ud(od.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=p(i,2),o=a[0],u=a[1];return r.bo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===od.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ud(od.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return s((function e(){o(this,e)}))}()),ow=function(){function e(t,n){o(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return s(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(ed(t),this.su=!1):Zh("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),uw=s((function e(t,n,r,i,a){var u=this;o(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=gw(u),!e.t0){e.next=5;break}return Zh("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ad(t)).lu.add(4),e.next=4,lw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,sw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new ow(r,i)}));function sw(e){return cw.apply(this,arguments)}function cw(){return cw=ce(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gw(t)){e.next=18;break}n=f(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),cw.apply(this,arguments)}function lw(e){return fw.apply(this,arguments)}function fw(){return fw=ce(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),fw.apply(this,arguments)}function hw(e,t){var n=ad(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),mw(n)?yw(n):Hw(n).Co()&&pw(n,t))}function dw(e,t){var n=ad(e),r=Hw(n);n.hu.delete(t),r.Co()&&vw(n,t),0===n.hu.size&&(r.Co()?r.ko():gw(n)&&n._u.set("Unknown"))}function pw(e,t){e.wu.Z(t.targetId),Hw(e).Qo(t)}function vw(e,t){e.wu.Z(t),Hw(e).jo(t)}function yw(e){e.wu=new py({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),Hw(e).start(),e._u.iu()}function mw(e){return gw(e)&&!Hw(e).Do()&&e.hu.size>0}function gw(e){return 0===ad(e).lu.size}function kw(e){e.wu=void 0}function ww(e){return bw.apply(this,arguments)}function bw(){return bw=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){pw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(e,t){return _w.apply(this,arguments)}function _w(){return _w=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kw(t),mw(t)?(t._u.uu(n),yw(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function Iw(e,t,n){return Ew.apply(this,arguments)}function Ew(){return Ew=ce(S().mark((function e(t,n,r){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof hy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=f(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Zh("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Sw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ly?t.wu.ut(n):n instanceof fy?t.wu._t(n):t.wu.ht(n),r.isEqual(Id.min())){e.next=29;break}return e.prev=14,e.next=17,fk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Pd.EMPTY_BYTE_STRING,n.snapshotVersion)),vw(e,t);var r=new Vm(n.target,t,1,n.sequenceNumber);pw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Zh("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Sw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ew.apply(this,arguments)}function Sw(e,t,n){return Tw.apply(this,arguments)}function Tw(){return Tw=ce(S().mark((function e(t,n,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cm(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,lw(t);case 5:t._u.set("Offline"),r||(r=function(){return fk(t.localStore)}),t.asyncQueue.enqueueRetryable(ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zh("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,sw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Cw(e,t){return t().catch((function(n){return Sw(e,n,t)}))}function Nw(e){return Aw.apply(this,arguments)}function Aw(){return Aw=ce(S().mark((function e(t){var n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ad(t),r=Qw(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!Dw(n)){e.next=19;break}return e.prev=3,e.next=6,pk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Rw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Sw(n,e.t0);case 17:e.next=2;break;case 19:Pw(n)&&Ow(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Aw.apply(this,arguments)}function Dw(e){return gw(e)&&e.cu.length<10}function Rw(e,t){e.cu.push(t);var n=Qw(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Pw(e){return gw(e)&&!Qw(e).Do()&&e.cu.length>0}function Ow(e){Qw(e).start()}function Lw(e){return Mw.apply(this,arguments)}function Mw(){return Mw=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qw(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e){return Vw.apply(this,arguments)}function Vw(){return Vw=ce(S().mark((function e(t){var n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Qw(t),r=f(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function Uw(e,t,n){return jw.apply(this,arguments)}function jw(){return jw=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=Mm.from(i,n,r),e.next=3,Cw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Nw(t);case 5:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Bw(e,t){return zw.apply(this,arguments)}function zw(){return zw=ce(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Qw(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qv(i=n.code)||i===od.ABORTED){e.next=7;break}return r=t.cu.shift(),Qw(t).No(),e.next=5,Cw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Nw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Pw(t)&&Ow(t);case 5:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function qw(e,t){return Kw.apply(this,arguments)}function Kw(){return Kw=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ad(t)).asyncQueue.verifyOperationInProgress(),Zh("RemoteStore","RemoteStore received new credentials"),i=gw(r),r.lu.add(3),e.next=6,lw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,sw(r);case 12:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Gw(e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ad(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,sw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,lw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Hw(e){return e.mu||(e.mu=function(e,t,n){var r=ad(e);return r.tu(),new rw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:ww.bind(null,e),Jr:xw.bind(null,e),Ko:Iw.bind(null,e)}),e.fu.push(function(){var t=ce(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),mw(e)?yw(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:kw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Qw(e){return e.gu||(e.gu=function(e,t,n){var r=ad(e);return r.tu(),new iw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Lw.bind(null,e),Jr:Bw.bind(null,e),Yo:Fw.bind(null,e),Jo:Uw.bind(null,e)}),e.fu.push(function(){var t=ce(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Nw(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(Zh("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var $w=function(){function e(t,n,r,i,a){o(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new sd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return s(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ud(od.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Yw(e,t){if(ed("AsyncQueue","".concat(t,": ").concat(e)),Cm(e))return new ud(od.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Jw=function(){function e(t){o(this,e),this.comparator=t?function(e,n){return t(e,n)||Wd.comparator(e.key,n.key)}:function(e,t){return Wd.comparator(e.key,t.key)},this.keyedMap=ty(),this.sortedSet=new Wv(this.comparator)}return s(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Xw=function(){function e(){o(this,e),this.yu=new Wv(Wd.comparator)}return s(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):rd():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Zw=function(){function e(t,n,r,i,a,u,s,c){o(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c}return s(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Jw.emptySet(n),a,r,i,!0,!1)}}]),e}(),eb=s((function e(){o(this,e),this.Iu=void 0,this.listeners=[]})),tb=s((function e(){o(this,e),this.queries=new Gv((function(e){return nv(e)}),tv),this.onlineState="Unknown",this.Tu=new Set}));function nb(e,t){return rb.apply(this,arguments)}function rb(){return rb=ce(S().mark((function e(t,n){var r,i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ad(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new eb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Yw(e.t0,"Initialization of query '".concat(rv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&sb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),rb.apply(this,arguments)}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=ce(S().mark((function e(t,n){var r,i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ad(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){var n,r=ad(e),i=!1,a=f(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=f(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&sb(r)}function ub(e,t,n){var r=ad(e),i=r.queries.get(t);if(i){var a,o=f(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function sb(e){e.Tu.forEach((function(e){e.next()}))}var cb=function(){function e(t,n,r){o(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return s(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=f(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Zw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Zw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),lb=function(){function e(t,n){o(this,e),this.payload=t,this.byteLength=n}return s(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),fb=function(){function e(t){o(this,e),this.M=t}return s(e,[{key:"li",value:function(e){return Ty(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?Py(this.M,e.document,!1):pp.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return _y(e)}}]),e}(),hb=function(){function e(t,n,r){o(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=db(t)}return s(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Nd.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new fb(this.M),i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=f(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||ay()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ce(S().mark((function e(){var t,n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xk(this.localStore,new fb(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=f(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ik(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function db(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var pb=s((function e(t){o(this,e),this.key=t})),vb=s((function e(t){o(this,e),this.key=t})),yb=function(){function e(t,n){o(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=ay(),this.mutatedKeys=ay(),this.Lu=ov(t),this.Uu=new Jw(this.Lu)}return s(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new Xw,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Hp(this.query)&&i.size===this.query.limit?i.last():null,c=Qp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=iv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Hp(this.query)||Qp(this.query))for(;o.size>this.query.limit;){var l=Hp(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rd()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Zw(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Xw,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=ay(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new vb(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new pb(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=ay();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Zw.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),mb=s((function e(t,n,r){o(this,e),this.query=t,this.targetId=n,this.view=r})),gb=s((function e(t){o(this,e),this.key=t,this.Xu=!1})),kb=function(){function e(t,n,r,i,a,u){o(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new Gv((function(e){return nv(e)}),tv),this.ea=new Map,this.na=new Set,this.sa=new Wv(Wd.comparator),this.ia=new Map,this.ra=new Ck,this.oa={},this.ua=new Map,this.aa=Ng.gn(),this.onlineState="Unknown",this.ca=void 0}return s(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function wb(e,t){return bb.apply(this,arguments)}function bb(){return bb=ce(S().mark((function e(t,n){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dx(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,vk(r.localStore,Zp(n));case 8:return u=e.sent,r.isPrimaryClient&&hw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,xb(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function xb(e,t,n,r){return _b.apply(this,arguments)}function _b(){return _b=ce(S().mark((function e(t,n,r,i){var a,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=ce(S().mark((function e(t,n,r,i){var a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,gk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qb(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,gk(t.localStore,n,!0);case 3:return a=e.sent,o=new yb(n,a.hi),u=o.Gu(a.documents),s=cy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),qb(t,r,c.zu),l=new mb(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Ib(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ad(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!tv(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,yk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),dw(r.remoteStore,i.targetId),Bb(r,i.targetId)})).catch(Og);case 9:e.next=14;break;case 11:return Bb(r,i.targetId),e.next=14,yk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=ce(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=px(t),e.prev=1,e.next=4,function(e,t){var n,r=ad(e),i=_d.now(),a=t.reduce((function(e,t){return e.add(t.key)}),ay());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=f(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Av(c,n.get(c.key));null!=l&&u.push(new Ov(c.key,l,dp(l.value.mapValue),Ev.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Wv(wd)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Wb(i,a.changes);case 9:return e.next=11,Nw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Yw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Tb.apply(this,arguments)}function Cb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),e.prev=1,e.next=4,hk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(id(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?id(n.Xu):e.removedDocuments.size>0&&(id(n.Xu),n.Xu=!1))})),e.next=8,Wb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Og(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Nb.apply(this,arguments)}function Ab(e,t,n){var r=ad(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ad(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=f(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sb(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Db(e,t,n){return Rb.apply(this,arguments)}function Rb(){return Rb=ce(S().mark((function e(t,n,r){var i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ad(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Wv(Wd.comparator)).insert(o,pp.newNoDocument(o,Id.min())),s=ay().add(o),c=new sy(Id.min(),new Map,new $v(wd),u,s),e.next=9,Cb(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),Gb(i),e.next=16;break;case 14:return e.next=16,yk(i.localStore,n,!1).then((function(){return Bb(i,n,r)})).catch(Og);case 16:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),i=n.batch.batchId,e.prev=1,e.next=4,lk(r.localStore,n);case 4:return a=e.sent,jb(r,i,null),Ub(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Wb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Og(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ob.apply(this,arguments)}function Lb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return Mb=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ad(t),e.prev=1,e.next=4,function(e,t){var n=ad(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return id(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,jb(i,n,r),Ub(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Wb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Og(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Mb.apply(this,arguments)}function Fb(e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=ce(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gw((r=ad(t)).remoteStore)||Zh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ad(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Yw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Vb.apply(this,arguments)}function Ub(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function jb(e,t,n){var r=ad(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function Bb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=f(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||zb(e,t)}))}function zb(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(dw(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Gb(e))}function qb(e,t,n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof pb?(e.ra.addReference(a.key,t),Kb(e,a)):a instanceof vb?(Zh("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||zb(e,a.key)):rd()}}catch(o){i.e(o)}finally{i.f()}}function Kb(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(Zh("SyncEngine","New document in limbo: "+n),e.na.add(r),Gb(e))}function Gb(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Wd(Nd.fromString(t)),r=e.aa.next();e.ia.set(r,new gb(n)),e.sa=e.sa.insert(n,r),hw(e.remoteStore,new Vm(Zp(Wp(n.path)),r,2,md.A))}}function Wb(e,t,n){return Hb.apply(this,arguments)}function Hb(){return Hb=ce(S().mark((function e(t,n,r){var i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ad(t),a=[],o=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ik.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=ce(S().mark((function e(t,n){var r,i,a,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return _m.forEach(n,(function(t){return _m.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return _m.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Cm(e.t0)){e.next=10;break}throw e.t0;case 10:Zh("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=f(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Qb(e,t){return $b.apply(this,arguments)}function $b(){return $b=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ad(t)).currentUser.isEqual(n)){e.next=11;break}return Zh("SyncEngine","User change. New user:",n.toKey()),e.next=5,sk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new ud(od.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Wb(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function Yb(e,t){var n=ad(e),r=n.ia.get(t);if(r&&r.Xu)return ay().add(r.key);var i=ay(),a=n.ea.get(t);if(!a)return i;var o,u=f(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Jb(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),e.next=3,gk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&qb(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t){return ex.apply(this,arguments)}function ex(){return ex=ce(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),e.abrupt("return",wk(r.localStore,n).then((function(e){return Wb(r,e)})));case 2:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t,n,r){return nx.apply(this,arguments)}function nx(){return nx=ce(S().mark((function e(t,n,r,i){var a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ad(t),e.next=3,function(e,t){var n=ad(e),r=ad(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):_m.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Nw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(jb(a,n,i||null),Ub(a,n),function(e,t){ad(ad(e).$s).dn(t)}(a.localStore,n)):rd();case 11:return e.next=13,Wb(a,o);case 13:e.next=16;break;case 15:Zh("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=ce(S().mark((function e(t,n){var r,i,a,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dx(r=ad(t)),px(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ax(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,Gw(r.remoteStore,!0);case 9:o=f(a);try{for(o.s();!(u=o.n()).done;)s=u.value,hw(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Bb(r,t),yk(r.localStore,t,!0)})),dw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,ax(r,c);case 21:return function(e){var t=ad(e);t.ia.forEach((function(e,n){dw(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new Wv(Wd.comparator)}(r),r.ca=!1,e.next=25,Gw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t,n){return ox.apply(this,arguments)}function ox(){return ox=ce(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d,p,v,y,m,g;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ad(t),a=[],o=[],u=f(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ea.get(c))||0===h.length){e.next=34;break}return e.next=11,vk(i.localStore,Zp(h[0]));case 11:l=e.sent,d=f(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.ta.get(v),e.next=20,Jb(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,kk(i.localStore,c);case 36:return g=e.sent,e.next=39,vk(i.localStore,g);case 39:return l=e.sent,e.next=42,xb(i,ux(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),ox.apply(this,arguments)}function ux(e){return Gp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sx(e){var t=ad(e);return ad(ad(t.localStore).persistence).Os()}function cx(e,t,n,r){return lx.apply(this,arguments)}function lx(){return lx=ce(S().mark((function e(t,n,r,i){var a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ad(t)).ca){e.next=3;break}return e.abrupt("return",void Zh("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,wk(a.localStore,av(o[0]));case 10:return u=e.sent,s=sy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Wb(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,yk(a.localStore,n,!0);case 17:return Bb(a,n,i),e.abrupt("break",20);case 19:rd();case 20:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t,n){return hx.apply(this,arguments)}function hx(){return hx=ce(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=dx(t)).ca){e.next=45;break}a=f(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return Zh("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,kk(i.localStore,u);case 12:return s=e.sent,e.next=15,vk(i.localStore,s);case 15:return c=e.sent,e.next=18,xb(i,ux(s),c.targetId,!1);case 18:hw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=f(r),e.prev=30,d=S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,yk(i.localStore,t,!1).then((function(){dw(i.remoteStore,t),Bb(i,t)})).catch(Og);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),hx.apply(this,arguments)}function dx(e){var t=ad(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Db.bind(null,t),t.Zu.Ko=ob.bind(null,t.eventManager),t.Zu.la=ub.bind(null,t.eventManager),t}function px(e){var t=ad(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lb.bind(null,t),t}function vx(e,t,n){var r=ad(e);(function(){var e=ce(S().mark((function e(t,n,r){var i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ad(e),r=_y(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(db(i)),a=new hb(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Wb(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=ad(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(td("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var yx=function(){function e(){o(this,e),this.synchronizeTabs=!1}return s(e,[{key:"initialize",value:function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=ew(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return uk(this.persistence,new ak,e.initialUser,this.M)}},{key:"_a",value:function(e){return new Ok(Mk.Wi,this.M)}},{key:"da",value:function(e){return new Wk}},{key:"terminate",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mx=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return s(n,[{key:"initialize",value:function(){var e=ce(S().mark((function e(t){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(g(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,px(this.ga.syncEngine);case 6:return e.next=8,Nw(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return uk(this.persistence,new ak,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Vg(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=nk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?bg.withCacheSize(this.cacheSizeBytes):bg.DEFAULT;return new Zg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Xk(),Zk(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new Wk}}]),n}(yx),gx=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return s(n,[{key:"initialize",value:function(){var e=ce(S().mark((function e(t){var r,i=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(g(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof Gk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:tx.bind(null,r),Mr:cx.bind(null,r),Or:fx.bind(null,r),Os:sx.bind(null,r),Nr:Zb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rx(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=Xk();if(!Gk.vt(t))throw new ud(od.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=nk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mx),kx=function(){function e(){o(this,e)}return s(e,[{key:"initialize",value:function(){var e=ce(S().mark((function e(t,n){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ab(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qb.bind(null,this.syncEngine),e.next=12,Gw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new tb}},{key:"createDatastore",value:function(e){var t,n=ew(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Jk(t));return function(e,t,n,r){return new aw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ab(o.syncEngine,e,0)},a=Qk.vt()?new Qk:new Hk,new uw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new kb(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ad(t),Zh("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,lw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function wx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ce(S().mark((function r(){var i;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var bx=function(){function e(t){o(this,e),this.observer=t,this.muted=!1}return s(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),xx=function(){function e(t,n){var r=this;o(this,e),this.Ia=t,this.M=n,this.metadata=new sd,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return s(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=ce(S().mark((function e(){var t,n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new lb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=ce(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=ce(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_x=function(){function e(t){o(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return s(e,[{key:"lookup",value:function(){var e=ce(S().mark((function e(t){var n,r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ud(od.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ce(S().mark((function e(t,n){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),i=Ay(r.M)+"/documents",a={documents:n.map((function(e){return Sy(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Oy(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());id(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new jv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ce(S().mark((function e(){var t,n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Wd.fromPath(t);n.mutations.push(new Bv(r,n.precondition(r)))})),e.next=7,function(){var e=ce(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ad(t),i=Ay(r.M)+"/documents",a={writes:n.map((function(e){return Ly(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rd();t=Id.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ud(od.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ev.updateTime(t):Ev.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Id.min()))throw new ud(od.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ev.updateTime(t)}return Ev.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ix=function(){function e(t,n,r,i){o(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new tw(this.asyncQueue,"transaction_retry")}return s(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(ce(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _x(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!qd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qv(t)}return!1}}]),e}(),Ex=function(){function e(t,n,r,i){var a=this;o(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$h.UNAUTHENTICATED,this.clientId=kd.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zh("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Zh("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return s(e,[{key:"getConfiguration",value:function(){var e=ce(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ud(od.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new sd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ce(S().mark((function n(){var r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Yw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Zh("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,sk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=ce(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ax(t);case 3:return r=e.sent,Zh("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e){return Dx.apply(this,arguments)}function Dx(){return Dx=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Zh("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Sx(t,new yx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Rx(e){return Px.apply(this,arguments)}function Px(){return Px=ce(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Zh("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Cx(t,new kx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Ox(e){return Ax(e).then((function(e){return e.persistence}))}function Lx(e){return Ax(e).then((function(e){return e.localStore}))}function Mx(e){return Rx(e).then((function(e){return e.remoteStore}))}function Fx(e){return Rx(e).then((function(e){return e.syncEngine}))}function Vx(e){return Ux.apply(this,arguments)}function Ux(){return Ux=ce(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=wb.bind(null,n.syncEngine),r.onUnlisten=Ib.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function jx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function i(){return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bx({next:function(a){t.enqueueAndForget((function(){return ib(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ud(od.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ud(od.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new cb(Wp(n.path),a,{includeMetadataChanges:!0,Du:!0});return nb(e,o)},i.next=3,Vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Bx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function i(){return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bx({next:function(n){t.enqueueAndForget((function(){return ib(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ud(od.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new cb(n,a,{includeMetadataChanges:!0,Du:!0});return nb(e,o)},i.next=3,Vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var zx=new Map;function qx(e,t,n){if(!n)throw new ud(od.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Kx(e,t,n,r){if(!0===t&&!0===r)throw new ud(od.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Gx(e){if(!Wd.isDocumentKey(e))throw new ud(od.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wx(e){if(Wd.isDocumentKey(e))throw new ud(od.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Hx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":rd()}function Qx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ud(od.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Hx(e);throw new ud(od.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $x(e,t){if(t<=0)throw new ud(od.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Yx=function(){function e(t){var n;if(o(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ud(od.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ud(od.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Kx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return s(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Jx=function(){function e(t,n,r){o(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yx({}),this._settingsFrozen=!1,t instanceof zd?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ud(od.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(e.options.projectId)}(t))}return s(e,[{key:"app",get:function(){if(!this._app)throw new ud(od.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ud(od.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ld;switch(e.type){case"gapi":var t=e.client;return id(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new pd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ud(od.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=zx.get(e);t&&(Zh("ComponentProvider","Removing Datastore"),zx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Xx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Qx(e,Jx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&td("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=$h.MOCK_USER;else{o=P(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ud(od.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $h(s)}e._authCredentials=new fd(new cd(o,u))}}var Zx=function(){function e(t,n,r){o(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return s(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new t_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),e_=function(){function e(t,n,r){o(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return s(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),t_=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,e,r,Wp(i)))._path=i,a.type="collection",a}return s(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Zx(this.firestore,null,new Wd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(e_);function n_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),qx("collection","path",t),e instanceof Jx){var a=Nd.fromString.apply(Nd,[t].concat(r));return Wx(a),new t_(e,null,a)}if(!(e instanceof Zx||e instanceof t_))throw new ud(od.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nd.fromString.apply(Nd,[t].concat(r)));return Wx(o),new t_(e.firestore,null,o)}function r_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=kd.R()),qx("doc","path",t),e instanceof Jx){var a=Nd.fromString.apply(Nd,[t].concat(r));return Gx(a),new Zx(e,null,new Wd(a))}if(!(e instanceof Zx||e instanceof t_))throw new ud(od.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Nd.fromString.apply(Nd,[t].concat(r)));return Gx(o),new Zx(e.firestore,e instanceof t_?e.converter:null,new Wd(o))}function i_(e,t){return e=ee(e),t=ee(t),(e instanceof Zx||e instanceof t_)&&(t instanceof Zx||t instanceof t_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function a_(e,t){return e=ee(e),t=ee(t),e instanceof e_&&t instanceof e_&&e.firestore===t.firestore&&tv(e._query,t._query)&&e.converter===t.converter}var o_=function(){function e(){var t=this;o(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new tw(this,"async_queue_retry"),this.Ua=function(){var e=Zk();e&&Zh("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Zk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return s(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=Zk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new sd;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=ce(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Cm(e.t0)){e.next=12;break}throw e.t0;case 12:Zh("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ed("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=$w.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&rd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=ce(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=f(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=f(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function u_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=f(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var s_=function(){function e(){o(this,e),this._progressObserver={},this._taskCompletionResolver=new sd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return s(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),c_=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new o_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return s(n,[{key:"_terminate",value:function(){return this._firestoreClient||f_(this),this._firestoreClient.terminate()}}]),n}(Jx);function l_(e){return e._firestoreClient||f_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function f_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Bd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ex(e._authCredentials,e._appCheckCredentials,e._queue,r)}function h_(e,t,n){var r=new sd;return e.asyncQueue.enqueue(ce(S().mark((function i(){return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Sx(e,n);case 3:return i.next=5,Cx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===od.FAILED_PRECONDITION||e.code===od.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function d_(e){return function(e){return e.asyncQueue.enqueue(ce(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ox(e);case 2:return n=t.sent,t.next=5,Mx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ad(e);return t.lu.delete(0),sw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(l_(e=Qx(e,c_)))}function p_(e){return function(e){return e.asyncQueue.enqueue(ce(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ox(e);case 2:return n=t.sent,t.next=5,Mx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ad(t)).lu.add(0),e.next=4,lw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(l_(e=Qx(e,c_)))}function v_(e,t){var n=l_(e=Qx(e,c_)),r=new s_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new xx(e,t)}(function(e,t){if(e instanceof Uint8Array)return wx(e,t);if(e instanceof ArrayBuffer)return wx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ew(t));e.asyncQueue.enqueueAndForget(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vx,t.next=3,Fx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function y_(e,t){return function(e,t){return e.asyncQueue.enqueue(ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ad(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,Lx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(l_(e=Qx(e,c_)),t).then((function(t){return t?new e_(e,null,t.query):null}))}function m_(e){if(e._initialized||e._terminated)throw new ud(od.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var g_=function(){function e(){o(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ud(od.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dd(n)}return s(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var k_=function(){function e(t){o(this,e),this._byteString=t}return s(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Pd.fromBase64String(t))}catch(t){throw new ud(od.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Pd.fromUint8Array(t))}}]),e}(),w_=s((function e(t){o(this,e),this._methodName=t})),b_=function(){function e(t,n){if(o(this,e),!isFinite(t)||t<-90||t>90)throw new ud(od.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ud(od.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return s(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return wd(this._lat,e._lat)||wd(this._long,e._long)}}]),e}(),x_=/^__.*__$/,__=function(){function e(t,n,r){o(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return s(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ov(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pv(e,this.data,t,this.fieldTransforms)}}]),e}(),I_=function(){function e(t,n,r){o(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return s(e,[{key:"toMutation",value:function(e,t){return new Ov(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function E_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rd()}}var S_=function(){function e(t,n,r,i,a,u){o(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=u||[]}return s(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return W_(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(E_(this.Ya)&&x_.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),T_=function(){function e(t,n,r){o(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||ew(t)}return s(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new S_({Ya:e,methodName:t,oc:n,path:Dd.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function C_(e){var t=e._freezeSettings(),n=ew(e._databaseId);return new T_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function N_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);z_("Data must be an object, but it was:",o,r);var u,s,c=j_(r,o);if(a.merge)u=new Rd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],d=f(a.mergeFields);try{for(d.s();!(l=d.n()).done;){var p=l.value,v=q_(t,p,n);if(!o.contains(v))throw new ud(od.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));H_(h,v)||h.push(v)}}catch(y){d.e(y)}finally{d.f()}u=new Rd(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new __(new hp(c),u,s)}var A_=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(w_);function D_(e,t,n){return new S_({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var R_=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"_toFieldTransform",value:function(e){return new _v(e.path,new vv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(w_),P_=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e)).ac=r,i}return s(n,[{key:"_toFieldTransform",value:function(e){var t=D_(this,e,!0),n=this.ac.map((function(e){return U_(e,t)})),r=new yv(n);return new _v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_),O_=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e)).ac=r,i}return s(n,[{key:"_toFieldTransform",value:function(e){var t=D_(this,e,!0),n=this.ac.map((function(e){return U_(e,t)})),r=new gv(n);return new _v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_),L_=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e)).cc=r,i}return s(n,[{key:"_toFieldTransform",value:function(e){var t=new wv(e.M,lv(e.M,this.cc));return new _v(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_);function M_(e,t,n,r){var i=e.uc(1,t,n);z_("Data must be an object, but it was:",i,r);var a=[],o=hp.empty();Sd(r,(function(e,r){var u=G_(t,e,n);r=ee(r);var s=i.nc(u);if(r instanceof A_)a.push(u);else{var c=U_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Rd(a);return new I_(o,u,i.fieldTransforms)}function F_(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[q_(t,r,n)],s=[i];if(a.length%2!=0)throw new ud(od.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(q_(t,a[c])),s.push(a[c+1]);for(var l=[],f=hp.empty(),h=u.length-1;h>=0;--h)if(!H_(l,u[h])){var d=u[h],p=s[h];p=ee(p);var v=o.nc(d);if(p instanceof A_)l.push(d);else{var y=U_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Rd(l);return new I_(f,m,o.fieldTransforms)}function V_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return U_(n,e.uc(r?4:3,t))}function U_(e,t){if(B_(e=ee(e)))return z_("Unsupported field value:",t,e),j_(e,t);if(e instanceof w_)return function(e,t){if(!E_(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=f(e);try{for(a.s();!(n=a.n()).done;){var o=U_(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return lv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=_d.fromDate(e);return{timestampValue:wy(t.M,n)}}if(e instanceof _d){var r=new _d(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wy(t.M,r)}}if(e instanceof b_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof k_)return{bytesValue:by(t.M,e._byteString)};if(e instanceof Zx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Iy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(Hx(e)))}(e,t)}function j_(e,t){var n={};return Td(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sd(e,(function(e,r){var i=U_(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function B_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _d||e instanceof b_||e instanceof k_||e instanceof Zx||e instanceof w_)}function z_(e,t,n){if(!B_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Hx(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function q_(e,t,n){if((t=ee(t))instanceof g_)return t._internalPath;if("string"==typeof t)return G_(e,t);throw W_("Field path arguments must be of type string or ",e,!1,void 0,n)}var K_=new RegExp("[~\\*/\\[\\]]");function G_(e,t,n){if(t.search(K_)>=0)throw W_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(g_,ue(t.split(".")))._internalPath}catch(r){throw W_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function W_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ud(od.INVALID_ARGUMENT,u+e+s)}function H_(e,t){return e.some((function(e){return e.isEqual(t)}))}var Q_=function(){function e(t,n,r,i,a){o(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return s(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Zx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new $_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Y_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),$_=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(){return kt(g(n.prototype),"data",this).call(this)}}]),n}(Q_);function Y_(e,t){return"string"==typeof t?G_(e,t):t instanceof g_?t._internalPath:t._delegate._internalPath}var J_=function(){function e(t,n){o(this,e),this.hasPendingWrites=t,this.fromCache=n}return s(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),X_=function(e){m(n,e);var t=x(n);function n(e,r,i,a,u,s){var c;return o(this,n),(c=t.call(this,e,r,i,a,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return s(n,[{key:"exists",value:function(){return kt(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Z_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Y_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Q_),Z_=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt(g(n.prototype),"data",this).call(this,e)}}]),n}(X_),eI=function(){function e(t,n,r,i){o(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new J_(i.hasPendingWrites,i.fromCache),this.query=r}return s(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Z_(n._firestore,n._userDataWriter,r.key,r,new J_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ud(od.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Z_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new J_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Z_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new J_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:tI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function tI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rd()}}function nI(e,t){return e instanceof X_&&t instanceof X_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof eI&&t instanceof eI&&e._firestore===t._firestore&&a_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function rI(e){if(Qp(e)&&0===e.explicitOrderBy.length)throw new ud(od.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iI=s((function e(){o(this,e)}));function aI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var oI=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return s(n,[{key:"_apply",value:function(e){var t=C_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ud(od.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){mI(o,a);var s,c=[],l=f(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(yI(r,e,h))}}catch(p){l.e(p)}finally{l.f()}u={arrayValue:{values:c}}}else u=yI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||mI(o,a),u=V_(n,"where",o,"in"===a||"not-in"===a);var d=Ap.create(i,a,u);return function(e,t){if(t.S()){var n=Yp(e);if(null!==n&&!n.isEqual(t.field))throw new ud(od.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=$p(e);null!==r&&gI(e,t.field,r)}var i=function(e,t){var n,r=f(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new ud(od.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ud(od.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new e_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Kp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(iI);var uI=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return s(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ud(od.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ud(od.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jp(t,n);return function(e,t){if(null===$p(e)){var n=Yp(e);null!==n&&gI(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new e_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Kp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(iI);var sI=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return s(n,[{key:"_apply",value:function(e){return new e_(e.firestore,e.converter,ev(e._query,this._c,this.wc))}}]),n}(iI);var cI=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return s(n,[{key:"_apply",value:function(e){var t=vI(e,this.type,this.mc,this.gc);return new e_(e.firestore,e.converter,function(e,t){return new Kp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(iI);function lI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cI("startAt",t,!0)}function fI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cI("startAfter",t,!1)}var hI=function(e){m(n,e);var t=x(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return s(n,[{key:"_apply",value:function(e){var t=vI(e,this.type,this.mc,this.gc);return new e_(e.firestore,e.converter,function(e,t){return new Kp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(iI);function dI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hI("endBefore",t,!1)}function pI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hI("endAt",t,!0)}function vI(e,t,n,r){if(n[0]=ee(n[0]),n[0]instanceof Q_)return function(e,t,n,r,i){if(!r)throw new ud(od.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=f(Xp(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(np(t,r.key));else{var c=r.data.field(s.field);if(Vd(c))throw new ud(od.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ud(od.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new Up(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=C_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ud(od.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ud(od.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Jp(e)&&-1!==c.indexOf("/"))throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Nd.fromString(c));if(!Wd.isDocumentKey(l))throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Wd(l);u.push(np(t,f))}else{var h=V_(n,r,c);u.push(h)}}return new Up(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function yI(e,t,n){if("string"==typeof(n=ee(n))){if(""===n)throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jp(t)&&-1!==n.indexOf("/"))throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Nd.fromString(n));if(!Wd.isDocumentKey(r))throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return np(e,new Wd(r))}if(n instanceof Zx)return np(e,n._key);throw new ud(od.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Hx(n),"."))}function mI(e,t){if(!Array.isArray(e)||0===e.length)throw new ud(od.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ud(od.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function gI(e,t,n){if(!n.isEqual(t))throw new ud(od.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var kI=function(){function e(){o(this,e)}return s(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Md(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Sd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new b_(Md(e.latitude),Md(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ud(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ld(e);return new _d(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Nd.fromString(e);id(Qy(n));var r=new zd(n.get(1),n.get(3)),i=new Wd(n.popFirst(5));return r.isEqual(t)||ed("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function wI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bI=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new k_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zx(this.firestore,null,t)}}]),n}(kI),xI=function(){function e(t,n){o(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=C_(t)}return s(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=_I(e,this._firestore),i=wI(r.converter,t,n),a=N_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ev.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=_I(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ee(t))||t instanceof g_?F_(this._dataReader,"WriteBatch.update",i._key,t,n,o):M_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ev.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=_I(e,this._firestore);return this._mutations=this._mutations.concat(new jv(t._key,Ev.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ud(od.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function _I(e,t){if((e=ee(e)).firestore!==t)throw new ud(od.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var II=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new k_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zx(this.firestore,null,t)}}]),n}(kI);function EI(e){e=Qx(e,Zx);var t=Qx(e.firestore,c_),n=l_(t),r=new II(t);return function(e,t){var n=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ce(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ad(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ud(od.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Yw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Lx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new X_(t,r,e._key,n,new J_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function SI(e){e=Qx(e,e_);var t=Qx(e.firestore,c_),n=l_(t),r=new II(t);return function(e,t){var n=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ce(S().mark((function e(t,n,r){var i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gk(t,n,!0);case 3:i=e.sent,a=new yb(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Yw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Lx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new eI(t,r,e,n)}))}function TI(e,t,n){e=Qx(e,Zx);var r=Qx(e.firestore,c_),i=wI(e.converter,t,n);return DI(r,[N_(C_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ev.none())])}function CI(e,t,n){e=Qx(e,Zx);for(var r=Qx(e.firestore,c_),i=C_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return DI(r,[("string"==typeof(t=ee(t))||t instanceof g_?F_(i,"updateDoc",e._key,t,n,o):M_(i,"updateDoc",e._key,t)).toMutation(e._key,Ev.exists(!0))])}function NI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ee(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||u_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(u_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Zx)l=Qx(e.firestore,c_),f=Wp(e._key.path),c={next:function(t){n[s]&&n[s](RI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Qx(e,e_);l=Qx(p.firestore,c_),f=p._query;var v=new II(l);c={next:function(e){n[s]&&n[s](new eI(l,v,p,e))},error:n[s+1],complete:n[s+2]},rI(e._query)}return function(e,t,n,r){var i=new bx(r),a=new cb(t,i,n);return e.asyncQueue.enqueueAndForget(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nb,t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ib,t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(l_(l),f,h,c)}function AI(e,t){return function(e,t){var n=new bx(t);return e.asyncQueue.enqueueAndForget(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ad(e).Tu.add(t),t.next()},t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(ce(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ad(e).Tu.delete(t)},t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(l_(e=Qx(e,c_)),u_(t)?t:{next:t})}function DI(e,t){return function(e,t){var n=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Sb,r.next=3,Fx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(l_(e),t)}function RI(e,t,n){var r=n.docs.get(t._key),i=new II(e);return new X_(e,i,t._key,r,new J_(n.hasPendingWrites,n.fromCache),t.converter)}var PI=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,r))._firestore=e,i}return s(n,[{key:"get",value:function(e){var t=this,r=_I(e,this._firestore),i=new II(this._firestore);return kt(g(n.prototype),"get",this).call(this,e).then((function(e){return new X_(t._firestore,i,r._key,e._document,new J_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){o(this,e),this._firestore=t,this._transaction=n,this._dataReader=C_(t)}return s(e,[{key:"get",value:function(e){var t=this,n=_I(e,this._firestore),r=new bI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return rd();var i=e[0];if(i.isFoundDocument())return new Q_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Q_(t._firestore,r,n._key,null,n.converter);throw rd()}))}},{key:"set",value:function(e,t,n){var r=_I(e,this._firestore),i=wI(r.converter,t,n),a=N_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=_I(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ee(t))||t instanceof g_?F_(this._dataReader,"Transaction.update",i._key,t,n,o):M_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=_I(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function OI(e,t){return function(e,t){var n=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function r(){var i;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Rx(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Ix(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(l_(e=Qx(e,c_)),(function(n){return t(new PI(e,n))}))}function LI(){return new R_("serverTimestamp")}function MI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new P_("arrayUnion",t)}function FI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new O_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yh=e}(Be),Oe(new le("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new c_(i,new hd(e.getProvider("auth-internal")),new yd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),He(Qh,"3.4.7",e),He(Qh,"3.4.7","esm2017")}();function VI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ud("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function UI(){if("undefined"===typeof Uint8Array)throw new ud("unimplemented","Uint8Arrays are not available in this environment.")}function jI(){if("undefined"==typeof atob)throw new ud("unimplemented","Blobs are unavailable in Firestore in this environment.")}var BI=function(){function e(t){o(this,e),this._delegate=t}return s(e,[{key:"toBase64",value:function(){return jI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return UI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return jI(),new e(k_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return UI(),new e(k_.fromUint8Array(t))}}]),e}();function zI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var qI=function(){function e(){o(this,e)}return s(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){m_(e=Qx(e,c_));var n=l_(e),r=e._freezeSettings(),i=new kx;return h_(n,i,new mx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){m_(e=Qx(e,c_));var t=l_(e),n=e._freezeSettings(),r=new kx;return h_(t,r,new gx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ud(od.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new sd;return e._queue.enqueueAndForgetEvenWhileRestricted(ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Em.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Em.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(nk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),KI=function(){function e(t,n,r){var i=this;o(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof zd||(this._appCompat=t)}return s(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||td("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return d_(this._delegate)}},{key:"disableNetwork",value:function(){return p_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Kx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new sd;return e.asyncQueue.enqueueAndForget(ce(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Fb,n.next=3,Fx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(l_(e=Qx(e,c_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return AI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ud("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new iE(this,n_(this._delegate,e))}catch(t){throw YI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new $I(this,r_(this._delegate,e))}catch(t){throw YI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new tE(this,function(e,t){if(e=Qx(e,Jx),qx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ud(od.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new e_(e,null,function(e){return new Kp(Nd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw YI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return OI(this._delegate,(function(n){return e(new WI(t,n))}))}},{key:"batch",value:function(){var e=this;return l_(this._delegate),new HI(new xI(this._delegate,(function(t){return DI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return v_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return y_(this._delegate,e).then((function(e){return e?new tE(t,e):null}))}}]),e}(),GI=function(e){m(n,e);var t=x(n);function n(e){var r;return o(this,n),(r=t.call(this)).firestore=e,r}return s(n,[{key:"convertBytes",value:function(e){return new BI(new k_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return $I.forKey(t,this.firestore,null)}}]),n}(kI);var WI=function(){function e(t,n){o(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new GI(t)}return s(e,[{key:"get",value:function(e){var t=this,n=aE(e);return this._delegate.get(n).then((function(e){return new ZI(t._firestore,new X_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=aE(e);return n?(VI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aE(e);return this._delegate.delete(t),this}}]),e}(),HI=function(){function e(t){o(this,e),this._delegate=t}return s(e,[{key:"set",value:function(e,t,n){var r=aE(e);return n?(VI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),QI=function(){function e(t,n,r){o(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return s(e,[{key:"fromFirestore",value:function(e,t){var n=new Z_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new GI(t),n),i.set(n,a)),a}}]),e}();QI.INSTANCES=new WeakMap;var $I=function(){function e(t,n){o(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GI(t)}return s(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new iE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new iE(this.firestore,n_(this._delegate,e))}catch(t){throw YI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ee(e))instanceof Zx&&i_(this._delegate,e)}},{key:"set",value:function(e,t){t=VI("DocumentReference.set",t);try{return t?TI(this._delegate,e,t):TI(this._delegate,e)}catch(n){throw YI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?CI(this._delegate,e):CI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw YI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return DI(Qx(e.firestore,c_),[new jv(e._key,Ev.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=JI(n),a=XI(n,(function(t){return new ZI(e.firestore,new X_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return NI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?EI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qx(e,Zx);var t=Qx(e.firestore,c_);return jx(l_(t),e._key,{source:"server"}).then((function(n){return RI(t,e,n)}))}(this._delegate):function(e){e=Qx(e,Zx);var t=Qx(e.firestore,c_);return jx(l_(t),e._key).then((function(n){return RI(t,e,n)}))}(this._delegate),t.then((function(e){return new ZI(n.firestore,new X_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(QI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ud("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Zx(n._delegate,r,new Wd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Zx(n._delegate,r,t))}}]),e}();function YI(e,t,n){return e.message=e.message.replace(t,n),e}function JI(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!zI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function XI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zI(e[0])?e[0]:zI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ZI=function(){function e(t,n){o(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"ref",get:function(){return new $I(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return nI(this._delegate,e._delegate)}}]),e}(),eE=function(e){m(n,e);var t=x(n);function n(){return o(this,n),t.apply(this,arguments)}return s(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||rd()}(void 0!==t),t}}]),n}(ZI),tE=function(){function e(t,n){o(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GI(t)}return s(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,aI(this._delegate,function(e,t,n){var r=t,i=Y_("where",e);return new oI(i,r,n)}(t,n,r)))}catch(i){throw YI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,aI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Y_("orderBy",e);return new uI(n,t)}(t,n)))}catch(r){throw YI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,aI(this._delegate,function(e){return $x("limit",e),new sI("limit",e,"F")}(t)))}catch(n){throw YI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,aI(this._delegate,function(e){return $x("limitToLast",e),new sI("limitToLast",e,"L")}(t)))}catch(n){throw YI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,aI(this._delegate,lI.apply(void 0,arguments)))}catch(t){throw YI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,aI(this._delegate,fI.apply(void 0,arguments)))}catch(t){throw YI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,aI(this._delegate,dI.apply(void 0,arguments)))}catch(t){throw YI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,aI(this._delegate,pI.apply(void 0,arguments)))}catch(t){throw YI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return a_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?SI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qx(e,e_);var t=Qx(e.firestore,c_),n=l_(t),r=new II(t);return Bx(n,e._query,{source:"server"}).then((function(n){return new eI(t,r,e,n)}))}(this._delegate):function(e){e=Qx(e,e_);var t=Qx(e.firestore,c_),n=l_(t),r=new II(t);return rI(e._query),Bx(n,e._query).then((function(n){return new eI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new rE(n.firestore,new eI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=JI(n),a=XI(n,(function(t){return new rE(e.firestore,new eI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return NI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(QI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),nE=function(){function e(t,n){o(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new eE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),rE=function(){function e(t,n){o(this,e),this._firestore=t,this._delegate=n}return s(e,[{key:"query",get:function(){return new tE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new eE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new nE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new eE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return nI(this._delegate,e._delegate)}}]),e}(),iE=function(e){m(n,e);var t=x(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return s(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new $I(this.firestore,e):null}},{key:"doc",value:function(e){try{return new $I(this.firestore,void 0===e?r_(this._delegate):r_(this._delegate,e))}catch(t){throw YI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Qx(e.firestore,c_),r=r_(e),i=wI(e.converter,t);return DI(n,[N_(C_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ev.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new $I(t.firestore,e)}))}},{key:"isEqual",value:function(e){return i_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(QI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(tE);function aE(e){return Qx(e,Zx)}var oE,uE=function(){function e(){o(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_(g_,n)}return s(e,[{key:"isEqual",value:function(e){return(e=ee(e))instanceof g_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dd.keyField().canonicalString())}}]),e}(),sE=function(){function e(t){o(this,e),this._delegate=t}return s(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=LI();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new A_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=MI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=FI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new L_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),cE={Firestore:KI,GeoPoint:b_,Timestamp:_d,Blob:BI,Transaction:WI,WriteBatch:HI,DocumentReference:$I,DocumentSnapshot:ZI,Query:tE,QueryDocumentSnapshot:eE,QuerySnapshot:rE,CollectionReference:iE,FieldPath:uE,FieldValue:sE,setLogLevel:function(e){!function(e){Jh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function lE(){return lE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lE.apply(this,arguments)}!function(e){!function(e,t){e.INTERNAL.registerComponent(new le("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},cE)))}(e,(function(e,t){return new KI(e,t,new qI)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(mt),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(oE||(oE={}));var fE=function(e){return e};var hE="beforeunload",dE="popstate";function pE(e){e.preventDefault(),e.returnValue=""}function vE(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function yE(){return Math.random().toString(36).substr(2,8)}function mE(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function gE(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var kE=(0,t.createContext)(null);var wE=(0,t.createContext)(null);var bE=(0,t.createContext)({outlet:null,matches:[]});function xE(e,t){if(!e)throw new Error(t)}function _E(e,t,n){void 0===n&&(n="/");var r=DE(("string"===typeof t?gE(t):t).pathname||"/",n);if(null==r)return null;var i=IE(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=CE(i[o],r);return a}function IE(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||xE(!1),a.relativePath=a.relativePath.slice(r.length));var o=RE([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&xE(!1),IE(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:TE(o,e.index),routesMeta:u})})),t}var EE=/^:\w+$/,SE=function(e){return"*"===e};function TE(e,t){var n=e.split("/"),r=n.length;return n.some(SE)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!SE(e)})).reduce((function(e,t){return e+(EE.test(t)?3:""===t?1:10)}),r)}function CE(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=NE({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:RE([i,l.pathname]),pathnameBase:PE(RE([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=RE([i,l.pathnameBase]))}return a}function NE(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=p(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function AE(e,t,n){var r,i="string"===typeof e?gE(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?gE(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:OE(a),hash:LE(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function DE(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var RE=function(e){return e.join("/").replace(/\/\/+/g,"/")},PE=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},OE=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},LE=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function ME(){return null!=(0,t.useContext)(wE)}function FE(){return ME()||xE(!1),(0,t.useContext)(wE).location}function VE(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(bE.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function UE(e){var n=e.to,r=e.replace,i=e.state;ME()||xE(!1);var a=function(){ME()||xE(!1);var e=(0,t.useContext)(kE),n=e.basename,r=e.navigator,i=(0,t.useContext)(bE).matches,a=FE().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=AE(e,JSON.parse(o),a);"/"!==n&&(i.pathname=RE([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}();return(0,t.useEffect)((function(){a(n,{replace:r,state:i})})),null}function jE(e){xE(!1)}function BE(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?oE.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;ME()&&xE(!1);var h=PE(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=gE(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,b=p.state,x=void 0===b?null:b,_=p.key,I=void 0===_?"default":_,E=(0,t.useMemo)((function(){var e=DE(y,h);return null==e?null:{pathname:e,search:g,hash:w,state:x,key:I}}),[h,y,g,w,x,I]);return null==E?null:(0,t.createElement)(kE.Provider,{value:d},(0,t.createElement)(wE.Provider,{children:a,value:{location:E,navigationType:s}}))}function zE(e){var n=e.children,r=e.location;return function(e,n){ME()||xE(!1);var r,i=(0,t.useContext)(bE).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,FE());if(n){var c,l="string"===typeof n?gE(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||xE(!1),r=l}else r=s;var f=r.pathname||"/",h=_E(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return VE(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:RE([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:RE([u,e.pathnameBase])})})),i)}(qE(n),r)}function qE(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==jE&&xE(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=qE(e.props.children)),n.push(r)}else n.push.apply(n,qE(e.props.children))})),n}function KE(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,fE({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(dE,(function(){if(a)f.call(a),a=null;else{var e=oE.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=oE.Pop,u=i(),s=u[0],c=u[1],l=vE(),f=vE();function h(e){return"string"===typeof e?e:mE(e)}function d(e,t){return void 0===t&&(t=null),fE(lE({pathname:c.pathname,hash:"",search:""},"string"===typeof e?gE(e):e,{state:t,key:yE()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==s&&(s=0,r.replaceState(lE({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=oE.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=oE.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(hE,pE),function(){t(),f.length||n.removeEventListener(hE,pE)}}};return g}({window:i}));var o=a.current,u=p((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(BE,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}function GE(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function WE(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var HE=function(){return HE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},HE.apply(this,arguments)},QE=function(e){return{loading:void 0===e||null===e,value:e}},$E=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return HE(HE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return QE(t.defaultValue);case"value":return HE(HE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),QE(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},YE=function(e,n){var r=$E((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return ee(e).onAuthStateChanged(t,n,r)}(e,(function(e){return GE(void 0,void 0,void 0,(function(){var t;return WE(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[s,a,i];return(0,t.useMemo)((function(){return c}),c)};var JE=function(){return JE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},JE.apply(this,arguments)},XE=function(e){return{loading:void 0===e||null===e,value:e}},ZE=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return JE(JE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return XE(t.defaultValue);case"value":return JE(JE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),XE(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},eS=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},tS=function(e,t){var n=!e&&!t,r=!!e&&!!t&&a_(e,t);return n||r},nS=function(e,t){return eS(e,tS,t)},rS=function(e,n){var r=null===n||void 0===n?void 0:n.snapshotOptions,i=function(e,n){var r=ZE(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=nS(e,o);(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?NI(l.current,n.snapshotListenOptions,s,u):NI(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,a,i];return(0,t.useMemo)((function(){return f}),f)}(e,n),a=i[0],o=i[1],u=i[2],s=[iS(a,r),o,u,a];return(0,t.useMemo)((function(){return s}),s)},iS=function(e,n){return(0,t.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)}))}),[e,n])},aS=n(184),oS=function(){return(0,aS.jsxs)("div",{className:"lds-default",children:[(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{}),(0,aS.jsx)("div",{})]})},uS=function(e){return(0,aS.jsxs)("div",{className:"be-comment",style:{margin:10,marginLeft:e.userId===e.data.uid?"auto":"10px",padding:5},children:[(0,aS.jsxs)("div",{style:{display:"flex",flexDirection:e.userId===e.data.uid?"row-reverse":"row",padding:5},children:[(0,aS.jsx)("div",{className:"be-img-comment",children:(0,aS.jsx)("a",{href:"#",children:(0,aS.jsx)("img",{src:e.data.photoURL,alt:"avatar",className:"be-ava-comment"})})}),(0,aS.jsx)("div",{className:"be-comment-content",children:(0,aS.jsxs)("div",{className:"be-comment-info",children:[(0,aS.jsx)("div",{className:"be-comment-name",children:e.data.displayName}),(0,aS.jsx)("div",{className:"be-comment-time",children:e.time})]})})]}),(0,aS.jsx)("span",{className:"be-comment-text ",style:{marginLeft:e.userId===e.data.uid?"auto":"10px"},children:e.data.text})]})},sS=function(){var e,n=(0,t.useContext)(kS),r=n.auth,i=n.firestore,a=p(YE(r),1)[0],o=p((0,t.useState)(""),2),u=o[0],s=o[1],c=p(rS(i.collection("messages").orderBy("createdAt")),2),l=c[0],f=c[1],h=function(){var e=ce(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=mt.firestore.FieldValue.serverTimestamp(),console.log(n),i.collection("messages").add({uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,text:u,createdAt:LI()}),s(""),console.log(i.collection("messages"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return f?(0,aS.jsx)(oS,{}):(l&&(e=l.map((function(e){var t=null===e.createdAt?"":e.createdAt.toDate().toLocaleString();return(0,aS.jsx)(uS,{data:e,time:t,userId:a.uid},null===e.createdAt?"":e.createdAt.seconds+"."+e.createdAt.nanoseconds)}))),(0,aS.jsxs)("div",{className:"wrapper",children:[e,(0,aS.jsxs)("form",{className:"form_message",children:[(0,aS.jsx)("textarea",{className:"message-field",cols:"30",rows:"5",value:u,onChange:function(e){return s(e.target.value)}}),(0,aS.jsx)("button",{className:"btn send-btn",onClick:h,children:"Send"})]})]}))},cS=function(){var e=(0,t.useContext)(kS).auth,n=function(){var t=ce(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new mt.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:r=t.sent,r.user;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,aS.jsx)("div",{className:"wrapper",children:(0,aS.jsxs)("div",{className:"login",children:[(0,aS.jsx)("p",{children:"Please login to join chat"}),(0,aS.jsx)("button",{className:"btn login-btn",type:"button",onClick:n,children:"Login"})]})})},lS="/login",fS="/chat",hS=[{path:lS,Component:cS}],dS=[{path:fS,Component:sS}],pS=function(){var e=(0,t.useContext)(kS).auth;return p(YE(e),1)[0]?(0,aS.jsxs)(zE,{children:[dS.map((function(e){var t=e.path,n=e.Component;return(0,aS.jsx)(jE,{path:t,element:(0,aS.jsx)(n,{})},t)})),(0,aS.jsx)(jE,{path:"*",element:(0,aS.jsx)(UE,{to:fS})})]}):(0,aS.jsxs)(zE,{children:[hS.map((function(e){var t=e.path,n=e.Component;return(0,aS.jsx)(jE,{path:t,element:(0,aS.jsx)(n,{})},t)})),(0,aS.jsx)(jE,{path:"*",element:(0,aS.jsx)(UE,{to:lS})})]})},vS=function(){var e=(0,t.useContext)(kS).auth,n=p(YE(e),1)[0];return(0,aS.jsx)("div",{className:"nav",children:(0,aS.jsx)("div",{className:"wrapper",children:(0,aS.jsxs)("div",{className:"nav_row",children:[(0,aS.jsx)("div",{className:"nav_greeting",children:"Welcome :)"}),n?(0,aS.jsx)("button",{className:"btn logout-btn",onClick:function(){return e.signOut()},children:"Logout"}):null]})})})};var yS=function(){var e=(0,t.useContext)(kS).auth,n=p(YE(e),3),r=(n[0],n[1]);return n[2],r?(0,aS.jsx)(oS,{}):(0,aS.jsxs)(KE,{children:[(0,aS.jsx)(vS,{}),(0,aS.jsx)(pS,{})]})},mS=mt.initializeApp({apiKey:"AIzaSyBHsyKkVoQwbdrq8VdX9aV0bItxCOTHnYU",authDomain:"chat-react-ex.firebaseapp.com",projectId:"chat-react-ex",storageBucket:"chat-react-ex.appspot.com",messagingSenderId:"45452069337",appId:"1:45452069337:web:6c30799d23a45904b771c8",measurementId:"G-89N0KSCN6K"}).firestore(),gS=mt.auth(),kS=(0,t.createContext)(null);i.createRoot(document.getElementById("root")).render((0,aS.jsx)(kS.Provider,{value:{firebase:mt,auth:gS,firestore:mS},children:(0,aS.jsx)(yS,{})}))}()}();
//# sourceMappingURL=main.1ec33da1.js.map